var ac_main=(function(t){function e(e){for(var o,r,s=e[0],l=e[1],c=e[2],u=0,p=[];u<s.length;u++)r=s[u],a[r]&&p.push(a[r][0]),a[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);for(d&&d(e);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],o=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var o={},a={1:0},i=[];function r(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var s=window.webpackJsonpac_name_=window.webpackJsonpac_name_||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;return i.push([487,0]),n()})({119:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(75),a=(function(){function t(){this.fields={}}return t.prototype.toDevice=function(){var t=this,e=new o.a;return e.id=this.id,e.name=this.name,e.description=this.description,e.app_name=this.app_name,e.type=this.type,e.fields=[],Object.keys(this.fields).forEach((function(n){e.fields.push({name:n,value:t.fields[n]})})),e},t})()},122:function(t,e,n){var o=n(556);t.exports="string"==typeof o?o:o.toString()},147:function(t,e,n){"use strict";var o=n(1),a=n(3),i=n(25),r=(function(){return function(){}})(),s=n(51),l=n(41);n.d(e,"a",(function(){return c}));var c=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.device_id=new i.a,e.arguments=[],e}return o.b(e,t),Object.defineProperty(e.prototype,"all_errors",{get:function(){var t;return(t=this.errors).concat.apply(t,this.arguments.map((function(t){return t.all_errors}))).concat(this.trigger?this.trigger.all_errors:[])},enumerable:!0,configurable:!0}),o.a([Object(a.Type)((function(){return r})),o.c("design:type",r)],e.prototype,"position",void 0),o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",i.a)],e.prototype,"device_id",void 0),o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],e.prototype,"arguments",void 0),o.a([Object(a.Type)((function(){return s.a})),o.c("design:type",s.a)],e.prototype,"trigger",void 0),e})(l.a)},148:function(t,e,n){"use strict";var o=n(1),a=n(3),i=n(72),r=(function(){return function(){}})(),s=(function(){function t(){this.failure=!1}return o.a([Object(a.Type)((function(){return r})),o.c("design:type",r)],t.prototype,"schema",void 0),t})(),l=(function(){function t(){this.parameters=[],this.returns=[]}return o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],t.prototype,"parameters",void 0),o.a([Object(a.Type)((function(){return s})),o.c("design:type",Array)],t.prototype,"returns",void 0),t})(),c=(function(){function t(){this.parameters=[],this.returns=[]}return o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],t.prototype,"parameters",void 0),o.a([Object(a.Type)((function(){return s})),o.c("design:type",Array)],t.prototype,"returns",void 0),t})(),d=(function(){function t(){this.parameters=[],this.returns=[]}return o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],t.prototype,"parameters",void 0),o.a([Object(a.Type)((function(){return s})),o.c("design:type",Array)],t.prototype,"returns",void 0),t})(),u=(function(){function t(){this.required=!1}return o.a([Object(a.Type)((function(){return r})),o.c("design:type",r)],t.prototype,"schema",void 0),t})(),p=(function(){function t(){this.fields=[]}return o.a([Object(a.Type)((function(){return u})),o.c("design:type",Array)],t.prototype,"fields",void 0),t})();n.d(e,"a",(function(){return f}));var f=(function(){function t(){this.action_apis=[],this.condition_apis=[],this.transform_apis=[],this.device_apis=[]}return o.a([Object(a.Type)((function(){return l})),o.c("design:type",Array)],t.prototype,"action_apis",void 0),o.a([Object(a.Type)((function(){return c})),o.c("design:type",Array)],t.prototype,"condition_apis",void 0),o.a([Object(a.Type)((function(){return d})),o.c("design:type",Array)],t.prototype,"transform_apis",void 0),o.a([Object(a.Type)((function(){return p})),o.c("design:type",Array)],t.prototype,"device_apis",void 0),t})()},149:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return m}));var o=n(1),a=n(0),i=n(11),r=n(6),s=n(55),l=n(95),c=(n(79),n(3)),d=n(206),u=n(50),p=n(15),f=n(477),h=n(151),m=(function(){function e(t,e,n,o,a,r){this.executionService=t,this.authService=e,this.cdr=n,this.toastyService=o,this.toastyConfig=a,this.utils=r,this.workflowStatuses=[],this.displayWorkflowStatuses=[],this.workflows=[],this.availableWorkflows=[],this.workflowStatusStartedRelativeTimes={},this.workflowStatusCompletedRelativeTimes={},this.actionStatusStartedRelativeTimes={},this.actionStatusCompletedRelativeTimes={},this.filterQuery=new i.FormControl}return e.prototype.ngOnInit=function(){var e=this;this.toastyConfig.theme="bootstrap",this.workflowSelectConfig={width:"100%",placeholder:"Select a Workflow"},this.workflowStatusActions={resume:"resume",pause:"pause",abort:"abort"},this.getWorkflows(),this.getWorkflowStatuses(),this.getWorkflowStatusSSE(),this.getActionStatusSSE(),this.filterQuery.valueChanges.debounceTime(500).subscribe((function(t){return e.filterWorkflowStatuses()})),l.Observable.interval(3e4).subscribe((function(){e.recalculateRelativeTimes()})),this.recalculateTableCallback=function(t){e.actionStatusTable&&e.actionStatusTable.recalculate&&e.actionStatusTable.recalculate()},t(document).on("shown.bs.modal",".actionStatusModal",this.recalculateTableCallback)},e.prototype.ngAfterViewChecked=function(){this.actionStatusTable&&this.actionStatusTable.recalculate&&this.actionStatusContainer.nativeElement.clientWidth!==this.actionStatusComponentWidth&&(this.actionStatusComponentWidth=this.actionStatusContainer.nativeElement.clientWidth,this.actionStatusTable.recalculate(),this.cdr.detectChanges())},e.prototype.ngOnDestroy=function(){this.workflowStatusEventSource&&this.workflowStatusEventSource.close&&this.workflowStatusEventSource.close(),this.actionStatusEventSource&&this.actionStatusEventSource.close&&this.actionStatusEventSource.close(),this.recalculateTableCallback&&t(document).off("shown.bs.modal",".actionStatusModal",this.recalculateTableCallback)},e.prototype.filterWorkflowStatuses=function(){var t=this.filterQuery.value?this.filterQuery.value.toLocaleLowerCase():"";this.displayWorkflowStatuses=this.workflowStatuses.filter((function(e){return e.name.toLocaleLowerCase().includes(t)||e.status.toLocaleLowerCase().includes(t)||e.current_action&&(e.current_action.name.toLocaleLowerCase().includes(t)||e.current_action.action_name.toLocaleLowerCase().includes(t)||e.current_action.app_name.toLocaleLowerCase().includes(t))}))},e.prototype.getWorkflowStatuses=function(){var t=this;this.executionService.getWorkflowStatusList().then((function(e){e.forEach((function(e){t.calculateLocalizedTimes(e)})),t.displayWorkflowStatuses=t.workflowStatuses=e,t.recalculateRelativeTimes()})).catch((function(e){return t.toastyService.error("Error retrieving workflow statuses: "+e.message)}))},e.prototype.getWorkflowStatusSSE=function(){var t=this;this.authService.getAccessTokenRefreshed().then((function(e){t.workflowStatusEventSource=new window.EventSource("api/streams/workflowqueue/workflow_status?access_token="+e),t.workflowStatusEventSource.addEventListener("queued",(function(e){return t.workflowStatusEventHandler(e)})),t.workflowStatusEventSource.addEventListener("started",(function(e){return t.workflowStatusEventHandler(e)})),t.workflowStatusEventSource.addEventListener("paused",(function(e){return t.workflowStatusEventHandler(e)})),t.workflowStatusEventSource.addEventListener("resumed",(function(e){return t.workflowStatusEventHandler(e)})),t.workflowStatusEventSource.addEventListener("awaiting_data",(function(e){return t.workflowStatusEventHandler(e)})),t.workflowStatusEventSource.addEventListener("triggered",(function(e){return t.workflowStatusEventHandler(e)})),t.workflowStatusEventSource.addEventListener("aborted",(function(e){return t.workflowStatusEventHandler(e)})),t.workflowStatusEventSource.addEventListener("completed",(function(e){return t.workflowStatusEventHandler(e)})),t.workflowStatusEventSource.onerror=function(t){console.error(t)}}))},e.prototype.workflowStatusEventHandler=function(t){var e=Object(c.plainToClass)(f.a,JSON.parse(t.data)),n=this.workflowStatuses.find((function(t){return t.execution_id===e.execution_id}));if(n){switch(n.status=e.status,t.type){case"queued":delete n.current_action;break;case"started":n.started_at||(n.started_at=e.timestamp,this.workflowStatusStartedRelativeTimes[n.execution_id]=this.utils.getRelativeLocalTime(e.timestamp)),n.current_action=e.current_action;break;case"paused":case"resumed":case"awaiting_data":case"triggered":n.current_action=e.current_action;break;case"completed":n.completed_at=e.timestamp,this.workflowStatusCompletedRelativeTimes[n.execution_id]=this.utils.getRelativeLocalTime(e.timestamp),delete n.current_action;break;case"aborted":n.completed_at=e.timestamp,this.workflowStatusCompletedRelativeTimes[n.execution_id]=this.utils.getRelativeLocalTime(e.timestamp);break;default:this.toastyService.warning("Unknown Workflow Status SSE Type: "+t.type+".")}this.calculateLocalizedTimes(n)}else{var o=e.toNewWorkflowStatus();this.calculateLocalizedTimes(o),this.workflowStatuses.push(o),this.workflowStatuses=this.workflowStatuses.slice()}this.filterWorkflowStatuses()},e.prototype.getActionStatusSSE=function(t){var e=this;void 0===t&&(t=null),this.actionStatusEventSource&&this.actionStatusEventSource.close(),this.authService.getAccessTokenRefreshed().then((function(n){var o="api/streams/workflowqueue/actions?summary=true&access_token="+n;t&&(o+="&workflow_execution_id="+t),e.actionStatusEventSource=new window.EventSource(o),e.actionStatusEventSource.addEventListener("started",(function(t){return e.actionStatusEventHandler(t)})),e.actionStatusEventSource.addEventListener("success",(function(t){return e.actionStatusEventHandler(t)})),e.actionStatusEventSource.addEventListener("failure",(function(t){return e.actionStatusEventHandler(t)})),e.actionStatusEventSource.addEventListener("awaiting_data",(function(t){return e.actionStatusEventHandler(t)})),e.actionStatusEventSource.onerror=function(t){console.error(t)}}))},e.prototype.actionStatusEventHandler=function(t){var e=Object(c.plainToClass)(h.a,JSON.parse(t.data)),n=this.workflowStatuses.find((function(t){return t.execution_id===e.workflow_execution_id}));if(n&&(n.current_action={execution_id:e.execution_id,id:e.action_id,name:e.name,app_name:e.app_name,action_name:e.action_name}),this.loadedWorkflowStatus&&this.loadedWorkflowStatus.execution_id===e.workflow_execution_id){var o=this.loadedWorkflowStatus.action_statuses.find((function(t){return t.execution_id===e.execution_id}));if(o){switch(o.status=e.status,t.type){case"started":o.started_at=e.timestamp,this.actionStatusStartedRelativeTimes[o.execution_id]=this.utils.getRelativeLocalTime(e.timestamp);break;case"success":case"failure":o.completed_at=e.timestamp,o.result=e.result,this.actionStatusCompletedRelativeTimes[o.execution_id]=this.utils.getRelativeLocalTime(e.timestamp);break;case"awaiting_data":break;default:this.toastyService.warning("Unknown Action Status SSE Type: "+t.type+".")}this.calculateLocalizedTimes(o)}else{var a=e.toNewActionStatus();this.calculateLocalizedTimes(a),this.loadedWorkflowStatus.action_statuses.push(a),this.loadedWorkflowStatus.action_statuses=this.loadedWorkflowStatus.action_statuses.slice()}}this.filterWorkflowStatuses()},e.prototype.performWorkflowStatusAction=function(t,e){var n=this;this.executionService.performWorkflowStatusAction(t.execution_id,e).then((function(){return n.toastyService.success("Successfully told "+t.name+" to  "+e)})).catch((function(t){return n.toastyService.error("Error performing "+e+" on workflow: "+t.message)}))},e.prototype.getWorkflows=function(){var t=this;this.executionService.getPlaybooks().then((function(e){t.workflows=e.map((function(t){return t.workflows})).reduce((function(t,e){return t.concat(e)}),[]);var n=[{id:"",text:""}];e.forEach((function(t){t.workflows.forEach((function(e){n.push({id:e.id,text:t.name+" - "+e.name})}))})),t.availableWorkflows=n}))},e.prototype.excuteSelectedWorkflow=function(){var t=this;this.executionService.addWorkflowToQueue(this.selectedWorkflow.id).then((function(e){t.toastyService.success('Successfully started execution of "'+t.selectedWorkflow.name+'"')})).catch((function(e){return t.toastyService.error("Error executing workflow: "+e.message)}))},e.prototype.workflowSelectChange=function(t){t.value&&""!==t.value?this.selectedWorkflow=this.workflows.find((function(e){return e.id===t.value})):this.selectedWorkflow=null},e.prototype.openActionStatusModal=function(e,n){var o=this;e.preventDefault(),(this.loadedWorkflowStatus&&this.loadedWorkflowStatus.execution_id===n.execution_id?Promise.resolve():this.executionService.getWorkflowStatus(n.execution_id).then((function(t){o.calculateLocalizedTimes(t),t.action_statuses.forEach((function(t){o.calculateLocalizedTimes(t)})),o.loadedWorkflowStatus=t,o.recalculateRelativeTimes()})).catch((function(t){return o.toastyService.error('Error loading action results for "'+n.name+'": '+t.message)}))).then((function(){t(".actionStatusModal").modal("show")}))},e.prototype.getFriendlyJSON=function(t){if(!t)return"N/A";var e=JSON.stringify(t,null,1);return(e=e.replace(/[\{\[\}\]"]/g,"").trim())||"N/A"},e.prototype.getFriendlyArguments=function(t){if(!t||!t.length)return"N/A";var e={};t.forEach((function(t){if(t.value&&(e[t.name]=t.value),t.reference&&(e[t.name]=t.reference.toString()),t.selection&&t.selection.length){var n=t.selection.join(".");e[t.name]=e[t.name]+" ("+n+")"}}));var n=JSON.stringify(e,null,1);return n=n.replace(/[\{\}"]/g,"")},e.prototype.getAppName=function(t){return t?t.app_name:"N/A"},e.prototype.getActionName=function(t){if(!t)return"N/A";var e=t.name;return e!==t.action_name&&(e=e+" ("+t.action_name+")"),e},e.prototype.appNameComparator=function(t,e){return t?e?t.app_name.toLowerCase()<e.app_name.toLowerCase()?-1:t.app_name.toLowerCase()>e.app_name.toLowerCase()?1:void 0:-1:1},e.prototype.actionNameComparator=function(t,e){return t?e?t.action_name.toLowerCase()<e.action_name.toLowerCase()?-1:t.action_name.toLowerCase()>e.action_name.toLowerCase()?1:void 0:-1:1},e.prototype.recalculateRelativeTimes=function(){var t=this;this.workflowStatuses&&this.workflowStatuses.length&&(this.workflowStatuses.forEach((function(e){e.started_at&&(t.workflowStatusStartedRelativeTimes[e.execution_id]=t.utils.getRelativeLocalTime(e.started_at)),e.completed_at&&(t.workflowStatusCompletedRelativeTimes[e.execution_id]=t.utils.getRelativeLocalTime(e.completed_at))})),this.loadedWorkflowStatus&&this.loadedWorkflowStatus.action_statuses&&this.loadedWorkflowStatus.action_statuses.length&&this.loadedWorkflowStatus.action_statuses.forEach((function(e){e.started_at&&(t.actionStatusStartedRelativeTimes[e.execution_id]=t.utils.getRelativeLocalTime(e.started_at)),e.completed_at&&(t.actionStatusCompletedRelativeTimes[e.execution_id]=t.utils.getRelativeLocalTime(e.completed_at))})))},e.prototype.calculateLocalizedTimes=function(t){t.started_at&&(t.localized_started_at=this.utils.getLocalTime(t.started_at)),t.completed_at&&(t.localized_completed_at=this.utils.getLocalTime(t.completed_at))},o.a([Object(a.ViewChild)("actionStatusContainer"),o.c("design:type",a.ElementRef)],e.prototype,"actionStatusContainer",void 0),o.a([Object(a.ViewChild)("actionStatusTable"),o.c("design:type",s.DatatableComponent)],e.prototype,"actionStatusTable",void 0),e=o.a([Object(a.Component)({selector:"execution-component",template:n(549),styles:[n(548)],encapsulation:a.ViewEncapsulation.None,providers:[d.a,u.a,p.a]}),o.c("design:paramtypes",[d.a,u.a,a.ChangeDetectorRef,r.c,r.a,p.a])],e)})()}).call(this,n(23))},15:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(1),a=n(0),i=n(4),r=(function(){function t(){}return t.prototype.getTruncatedString=function(t,e,n){return(t=this.getDefaultString(t,n)).length<=e?t:t.substr(0,e)+"..."},t.prototype.getDefaultString=function(t,e){t||(t="");var n=t.trim();return n||(e||"")},t.prototype.getCurrentIsoString=function(){return i.utc().toISOString()},t.prototype.getLocalTime=function(t){return i.utc(t).local().toLocaleString()},t.prototype.getRelativeLocalTime=function(t){return i.utc(t).local().fromNow()},t.prototype.cloneDeep=function(t){return JSON.parse(JSON.stringify(t))},t=o.a([Object(a.Injectable)()],t)})()},150:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var o=n(1),a=n(0),i=n(6),r=(n(79),n(55)),s=n(205),l=n(15),c=(function(){function e(t,e,n,o,a){this.metricsService=t,this.toastyService=e,this.toastyConfig=n,this.utils=o,this.cdr=a,this.appMetrics=[],this.appFilter="",this.workflowMetrics=[],this.availableApps=[]}return e.prototype.ngOnInit=function(){var e=this;this.toastyConfig.theme="bootstrap",this.appSelectConfig={width:"100%",placeholder:"Select an App to view its Metrics"},this.recalculateTableCallback=function(t){e.recalculateTable(t)},t(document).on("shown.bs.tab",'a[data-toggle="tab"]',this.recalculateTableCallback),this.getAppMetrics(),this.getWorkflowMetrics()},e.prototype.ngOnDestroy=function(){this.recalculateTableCallback&&t(document).off("shown.bs.tab",'a[data-toggle="tab"]',this.recalculateTableCallback)},e.prototype.recalculateTable=function(t){var e;switch(t.target.getAttribute("href")){case"#apps":e=this.appMetricsTable;break;case"#workflows":e=this.workflowMetricsTable}e&&e.recalculate&&(this.cdr.detectChanges(),e.recalculate())},e.prototype.appSelectChange=function(t){t.value&&""!==t.value?this.appFilter=t.value:this.appFilter=""},e.prototype.getFilteredAppMetrics=function(){var t=this;return this.appFilter&&"all"!=this.appFilter?this.appMetrics.filter((function(e){return e.name==t.appFilter})):this.appMetrics},e.prototype.displayAppMetrics=function(){var t=[];return this.getFilteredAppMetrics().forEach((function(e){e.actions.forEach((function(n){t.push({app:e.name,action:n.name,success:n.success_metrics.display_text,error:n.error_metrics.display_text,total_count:n.success_metrics.count+n.error_metrics.count})}))})),t},e.prototype.getAppMetrics=function(){var t=this;this.metricsService.getAppMetrics().then((function(e){t.appMetrics=e,t.availableApps=[{id:"",text:""},{id:"all",text:"All"}].concat(e.map((function(t){return{id:t.name,text:t.name}}))),t.displayAppMetrics()})).catch((function(e){return t.toastyService.error("Error retrieving app metrics: "+e.message)}))},e.prototype.getWorkflowMetrics=function(){var t=this;this.metricsService.getWorkflowMetrics().then((function(e){t.workflowMetrics=e})).catch((function(e){return t.toastyService.error("Error retrieving workflow metrics: "+e.message)}))},e.prototype.getFriendlyArray=function(t){return t.join(", ")},e.prototype.getFriendlyObject=function(t){var e=JSON.stringify(t,null,1);return e=e.substr(1,e.length-2).replace(/"/g,"")},o.a([Object(a.ViewChild)("appMetricsTable"),o.c("design:type",r.DatatableComponent)],e.prototype,"appMetricsTable",void 0),o.a([Object(a.ViewChild)("workflowMetricsTable"),o.c("design:type",r.DatatableComponent)],e.prototype,"workflowMetricsTable",void 0),e=o.a([Object(a.Component)({selector:"metrics-component",template:n(561),encapsulation:a.ViewEncapsulation.None,styles:[n(560)],providers:[s.a,l.a]}),o.c("design:paramtypes",[s.a,i.c,i.a,l.a,a.ChangeDetectorRef])],e)})()}).call(this,n(23))},151:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(1),a=n(3),i=n(25),r=n(152),s=(function(){function t(){this.arguments=[]}return t.prototype.toNewActionStatus=function(){var t=new r.a;return t.workflow_execution_id=this.workflow_execution_id,t.workflow_id=this.workflow_id,t.execution_id=this.execution_id,t.action_id=this.action_id,t.name=this.name,t.app_name=this.app_name,t.action_name=this.action_name,t.status=this.status,t.started_at=this.timestamp,t.arguments=this.arguments,t.result=this.result,t},o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],t.prototype,"arguments",void 0),t})()},152:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(1),a=n(3),i=n(25),r=(function(){function t(){this.arguments=[]}return o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],t.prototype,"arguments",void 0),o.a([Object(a.Exclude)({toPlainOnly:!0}),o.c("design:type",String)],t.prototype,"localized_started_at",void 0),o.a([Object(a.Exclude)({toPlainOnly:!0}),o.c("design:type",String)],t.prototype,"localized_completed_at",void 0),t})()},153:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(1),a=n(3),i=n(51),r=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.b(e,t),Object.defineProperty(e.prototype,"all_errors",{get:function(){return this.errors.concat(this.condition?this.condition.all_errors:[])},enumerable:!0,configurable:!0}),o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",i.a)],e.prototype,"condition",void 0),e})(n(41).a)},154:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(1),a=n(3),i=n(25),r=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arguments=[],e}return o.b(e,t),Object.defineProperty(e.prototype,"all_errors",{get:function(){var t;return(t=this.errors).concat.apply(t,this.arguments.map((function(t){return t.all_errors})))},enumerable:!0,configurable:!0}),o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],e.prototype,"arguments",void 0),e})(n(41).a)},155:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(1),a=n(3),i=n(154),r=n(25),s=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arguments=[],e.transforms=[],e}return o.b(e,t),Object.defineProperty(e.prototype,"all_errors",{get:function(){var t,e;return(t=(e=this.errors).concat.apply(e,this.arguments.map((function(t){return t.all_errors})))).concat.apply(t,this.transforms.map((function(t){return t.all_errors})))},enumerable:!0,configurable:!0}),o.a([Object(a.Type)((function(){return r.a})),o.c("design:type",Array)],e.prototype,"arguments",void 0),o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],e.prototype,"transforms",void 0),e})(n(41).a)},156:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return E}));var o=n(1),a=n(0),i=n(6),r=n(55),s=n(159),l=n(95),c=n(484),d=n(3),u=n(77),p=n(483),f=n(482),h=n(481),m=n(480),g=n(479),v=n(207),b=n(50),y=n(15),w=n(39),k=n(34),x=n(147),S=n(153),_=n(25),T=n(51),C=n(151),A=n(478),E=(function(){function e(t,e,n,o,a,i){this.playbookService=t,this.authService=e,this.toastyService=n,this.toastyConfig=o,this.cdr=a,this.utils=i,this.devices=[],this.relevantDevices=[],this.playbooks=[],this.appApis=[],this.offset={x:-330,y:-170},this.actionStatuses=[],this.consoleLog=[],this.waitingOnData=!1,this.actionStatusStartedRelativeTimes={},this.actionStatusCompletedRelativeTimes={},this.modalParams={title:"",submitText:"",shouldShowPlaybook:!1,shouldShowExistingPlaybooks:!1,selectedPlaybookId:"",newPlaybook:"",shouldShowWorkflow:!1,newWorkflow:"",submit:function(){return null}}}return e.prototype.ngOnInit=function(){var e=this;this.toastyConfig.theme="bootstrap";var n=u();n.clipboard||p(u,t),n.edgehandles||u.use(f),n.gridGuide||u.use(h),n.panzoom||u.use(m),n.undoRedo||u.use(g),this.playbookService.getDevices().then((function(t){return e.devices=t})),this.playbookService.getApis().then((function(t){return e.appApis=t.sort((function(t,e){return t.name>e.name?1:-1}))})),this.getPlaybooksWithWorkflows(),this._addCytoscapeEventBindings(),l.Observable.interval(3e4).subscribe((function(){e.recalculateRelativeTimes()})),this.recalculateConsoleTableCallback=function(t){return e.recalculateConsoleTable(t)},t(document).on("shown.bs.tab",'a[data-toggle="tab"]',this.recalculateConsoleTableCallback)},e.prototype.ngAfterViewChecked=function(){this.workflowResultsTable&&this.workflowResultsTable.recalculate&&this.workflowResultsContainer.nativeElement.clientWidth!==this.executionResultsComponentWidth&&(this.executionResultsComponentWidth=this.workflowResultsContainer.nativeElement.clientWidth,this.workflowResultsTable.recalculate(),this.cdr.detectChanges())},e.prototype.ngOnDestroy=function(){this.eventSource&&this.eventSource.close&&this.eventSource.close(),this.consoleEventSource&&this.consoleEventSource.close&&this.consoleEventSource.close(),this.recalculateConsoleTableCallback&&t(document).off("shown.bs.tab",'a[data-toggle="tab"]',this.recalculateConsoleTableCallback)},e.prototype.getConsoleSSE=function(t){var e=this;this.consoleEventSource&&this.consoleEventSource.close(),this.authService.getAccessTokenRefreshed().then((function(n){var o="api/streams/console/log?access_token="+n+"&workflow_execution_id="+t;e.consoleEventSource=new window.EventSource(o),e.consoleEventSource.addEventListener("log",(function(t){return e.consoleEventHandler(t)})),e.consoleEventSource.onerror=function(t){console.error(t)}}))},e.prototype.consoleEventHandler=function(t){var e=Object(d.plainToClass)(A.a,JSON.parse(t.data)).toNewConsoleLog();this.consoleLog.push(e)},e.prototype.getActionStatusSSE=function(t){var e=this;this.eventSource&&this.eventSource.close(),this.authService.getAccessTokenRefreshed().then((function(n){var o="api/streams/workflowqueue/actions?access_token="+n+"&workflow_execution_id="+t;e.eventSource=new window.EventSource(o),e.eventSource.addEventListener("started",(function(t){return e.actionStatusEventHandler(t)})),e.eventSource.addEventListener("success",(function(t){return e.actionStatusEventHandler(t)})),e.eventSource.addEventListener("failure",(function(t){return e.actionStatusEventHandler(t)})),e.eventSource.addEventListener("awaiting_data",(function(t){return e.actionStatusEventHandler(t)})),e.eventSource.onerror=function(t){console.error(t)}}))},e.prototype.actionStatusEventHandler=function(t){var e=Object(d.plainToClass)(C.a,JSON.parse(t.data));if(this.cy){var n=this.cy.elements('node[_id="'+e.action_id+'"]');if(n)switch(e.status){case"success":n.addClass("success-highlight"),n.removeClass("failure-highlight"),n.removeClass("executing-highlight"),n.removeClass("awaiting-data-highlight");break;case"failure":n.removeClass("success-highlight"),n.addClass("failure-highlight"),n.removeClass("executing-highlight"),n.removeClass("awaiting-data-highlight");break;case"executing":n.removeClass("success-highlight"),n.removeClass("failure-highlight"),n.addClass("executing-highlight"),n.removeClass("awaiting-data-highlight");break;case"awaiting_data":n.removeClass("success-highlight"),n.removeClass("failure-highlight"),n.removeClass("executing-highlight"),n.addClass("awaiting-data-highlight")}}var o=this.actionStatuses.find((function(t){return t.execution_id===e.execution_id}));if(o){switch(o.status=e.status,t.type){case"started":o.started_at=e.timestamp;break;case"success":case"failure":o.completed_at=e.timestamp,o.result=e.result;break;case"awaiting_data":break;default:this.toastyService.warning("Unknown Action Status SSE Type: "+t.type+".")}this.recalculateRelativeTimes(o),this.calculateLocalizedTimes(o)}else{var a=e.toNewActionStatus();this.calculateLocalizedTimes(a),this.actionStatuses.push(a)}this.actionStatuses=this.actionStatuses.slice()},e.prototype.executeWorkflow=function(){var t=this;this.loadedWorkflow&&(this.clearExecutionHighlighting(),this.playbookService.addWorkflowToQueue(this.loadedWorkflow.id).then((function(e){t.getActionStatusSSE(e.id),t.getConsoleSSE(e.id),t.toastyService.success("Starting execution of "+t.loadedPlaybook.name+" - "+t.loadedWorkflow.name+".")})).catch((function(e){return t.toastyService.error("Error starting execution of "+t.loadedPlaybook.name+" - "+t.loadedWorkflow.name+": "+e.message)})))},e.prototype.loadWorkflow=function(t,e){var n=this;this.closeWorkflow(),t.id&&e.id?this.playbookService.loadWorkflow(e.id).then((function(e){n.loadedPlaybook=t,n.loadedWorkflow=e,n.setupGraph(),n._closeWorkflowsModal()})).catch((function(o){return n.toastyService.error('Error loading workflow "'+t.name+" - "+e.name+'": '+o.message)})):(this.loadedPlaybook=t,this.loadedWorkflow=e,this.setupGraph())},e.prototype.setupGraph=function(){var t=this;this.loadedWorkflow.actions||(this.loadedWorkflow.actions=[]),this.loadedWorkflow.actions.forEach((function(t){t.arguments.forEach((function(t){t.selection&&Array.isArray(t.selection)&&(t.selection=t.selection.join("."))}))})),this.cy=u({container:document.getElementById("cy"),boxSelectionEnabled:!1,autounselectify:!1,wheelSensitivity:.1,layout:{name:"preset"},style:[{selector:"node",css:{content:"data(label)","text-valign":"center","text-halign":"center",shape:"roundrectangle","background-color":"#bbb","selection-box-color":"red","font-family":"Segoe UI, Tahoma, Geneva, Verdana, sans-serif, sans-serif","font-weight":"lighter","font-size":"15px",width:"label",height:"label",padding:"10px"}},{selector:'node[type="action"]',css:{"background-color":"#bbb"}},{selector:'node[type="eventAction"]',css:{shape:"star","background-color":"#edbd21"}},{selector:"node[?isStartNode]",css:{"border-width":"3px","border-color":"#991818"}},{selector:"node[?hasErrors]",css:{color:"#991818","font-style":"italic"}},{selector:"node:selected",css:{"background-color":"#77b0d0"}},{selector:".success-highlight",css:{"background-color":"#399645","transition-property":"background-color","transition-duration":"0.5s"}},{selector:".failure-highlight",css:{"background-color":"#8e3530","transition-property":"background-color","transition-duration":"0.5s"}},{selector:".executing-highlight",css:{"background-color":"#ffef47","transition-property":"background-color","transition-duration":"0.5s"}},{selector:".awaiting-data-highlight",css:{"background-color":"#f4ad42","transition-property":"background-color","transition-duration":"0.5s"}},{selector:"$node > node",css:{"padding-top":"10px","padding-left":"10px","padding-bottom":"10px","padding-right":"10px","text-valign":"top","text-halign":"center"}},{selector:"edge",css:{"target-arrow-shape":"triangle","curve-style":"bezier"}},{selector:"edge[?hasErrors]",css:{"target-arrow-color":"#991818","line-color":"#991818","line-style":"dashed"}},{selector:".eh-handle",style:{"background-color":"#337ab7",width:"1",height:"1",shape:"ellipse","overlay-opacity":"0"}},{selector:".eh-source",style:{"border-width":"3","border-color":"#337ab7"}},{selector:".eh-target",style:{"border-width":"3","border-color":"#337ab7"}},{selector:".eh-preview, .eh-ghost-edge",style:{"background-color":"#337ab7","line-color":"#337ab7","target-arrow-color":"#337ab7","source-arrow-color":"#337ab7"}}]}),this.ur=this.cy.undoRedo({}),this.cy.panzoom({}),this.cy.edgehandles({preview:!1,toggleOffOnLeave:!0,complete:function(e,n,o){t.loadedWorkflow.branches||(t.loadedWorkflow.branches=[]);for(var a=function(a){var i=s.UUID.UUID(),r=e.data("_id"),l=n[a].data("_id");if(o[a].data({_id:i,temp:!0}),t.loadedWorkflow.branches.find((function(t){return t.source_id===r&&t.destination_id===l})))return t.cy.remove(o),{value:void 0};var c=t.loadedWorkflow.actions.find((function(t){return t.id===r})),d=t._getAction(c.app_name,c.action_name),u="";d.default_return?u=d.default_return:d.returns.length&&(u=d.returns[0].status);var p=new S.a;p.id=i,p.source_id=r,p.destination_id=l,p.status=u,p.priority=1,t.loadedWorkflow.branches.push(p)},i=0;i<n.length;i++){var r=a(i);if("object"==typeof r)return r.value}t.cy.remove(o),o.forEach((function(t){return t.data("temp",!1)})),t.ur.do("add",o)}}),this.cy.clipboard(),this.cy.gridGuide({snapToGridDuringDrag:!0,zoomDash:!0,panGrid:!0,centerToEdgeAlignment:!0,distributionGuidelines:!0,geometricGuideline:!0,guidelinesStackOrder:4,guidelinesTolerance:2,guidelinesStyle:{strokeStyle:"#8b7d6b",geometricGuidelineRange:400,range:100,minDistRange:10,distGuidelineOffset:10,horizontalDistColor:"#ff0000",verticalDistColor:"#00ff00",initPosAlignmentColor:"#0000ff",lineDash:[0,0],horizontalDistLine:[0,0],verticalDistLine:[0,0],initPosAlignmentLine:[0,0]}});var e=this.loadedWorkflow.branches.map((function(t){var e={group:"edges"};return e.data={id:t.id,_id:t.id,source:t.source_id,target:t.destination_id,hasErrors:t.has_errors},e})),n=this.loadedWorkflow.actions.map((function(e){var n={group:"nodes",position:t.utils.cloneDeep(e.position)};return n.data={id:e.id,_id:e.id,label:e.name,isStartNode:e.id===t.loadedWorkflow.start,hasErrors:e.has_errors},t._setNodeDisplayProperties(n,e),n}));this.cy.add(n.concat(e)),this.cy.fit(null,50),this.setStartNode(this.loadedWorkflow.start),this.cy.on("select","node",(function(e){return t.onNodeSelect(e)})),this.cy.on("select","edge",(function(e){return t.onEdgeSelect(e)})),this.cy.on("unselect",(function(e){return t.onUnselect(e)})),this.cy.on("add","node",(function(e){return t.onNodeAdded(e)})),this.cy.on("remove","node",(function(e){return t.onNodeRemoved(e)})),this.cy.on("remove","edge",(function(e){return t.onEdgeRemove(e)}))},e.prototype.closeWorkflow=function(){this.loadedPlaybook=null,this.loadedWorkflow=null,this.selectedBranchParams=null,this.selectedAction=null},e.prototype.save=function(){this.saveWorkflow(this.cy.elements().jsons())},e.prototype.saveWorkflow=function(t){var e=this;this.cy.$(":selected").unselect();var n=Object(d.classToClass)(this.loadedWorkflow);if(n.start){var o;if(n.actions.forEach((function(n){n.position=t.find((function(t){return t.data._id===n.id})).position,n.device_id.hasInput()?n.device_id.sanitize():delete n.device_id,e._sanitizeArgumentsForSave(n.arguments),e._sanitizeExpressionAndChildren(n.trigger)})),n.branches.forEach((function(t){e._sanitizeExpressionAndChildren(t.condition)})),this.loadedPlaybook.id)o=this.loadedWorkflow.id?this.playbookService.saveWorkflow(n):this.playbookService.newWorkflow(this.loadedPlaybook.id,n);else{var a=Object(d.classToClass)(this.loadedPlaybook);a.workflows=[n],o=this.playbookService.newPlaybook(a).then((function(t){return e.loadedPlaybook=t,e.playbooks.push(t),e.playbooks.sort((function(t,e){return t.name>e.name?1:-1})),t.workflows[0]}))}o.then((function(t){e.loadedPlaybook.workflows.find((function(e){return e.id===t.id}))||(e.loadedPlaybook.workflows.push(t),e.loadedPlaybook.workflows.sort((function(t,e){return t.name>e.name?1:-1}))),e.loadedWorkflow=t,e.setupGraph(),e.toastyService.success("Successfully saved workflow "+e.loadedPlaybook.name+" - "+n.name+".")})).catch((function(t){return e.toastyService.error("Error saving workflow "+e.loadedPlaybook.name+" - "+n.name+": "+t.message)}))}else this.toastyService.warning("Workflow cannot be saved without a starting action.")},e.prototype.getPlaybooksWithWorkflows=function(){var t=this;this.playbookService.getPlaybooks().then((function(e){return t.playbooks=e}))},e.prototype._sanitizeExpressionAndChildren=function(t){var e=this;t&&(t.conditions&&t.conditions.length&&t.conditions.forEach((function(t){e._sanitizeArgumentsForSave(t.arguments),t.transforms.forEach((function(t){e._sanitizeArgumentsForSave(t.arguments)}))})),t.child_expressions&&t.child_expressions.length&&t.child_expressions.forEach((function(t){t.conditions.forEach((function(t){e._sanitizeArgumentsForSave(t.arguments),t.transforms.forEach((function(t){e._sanitizeArgumentsForSave(t.arguments)}))})),e._sanitizeExpressionAndChildren(t)})))},e.prototype._sanitizeArgumentsForSave=function(t){for(var e=[],n=0,o=t;n<o.length;n++){var a=o[n];"string"==typeof a.value&&(a.value=a.value.trim()),null!=a.value&&""!==a.value||""!==a.reference||e.unshift(t.indexOf(a)),a.reference&&void 0!==a.value&&delete a.value,""===a.reference&&delete a.reference,delete a.errors}for(var i=0,r=e;i<r.length;i++){var s=r[i];t.splice(s,1)}t.forEach((function(t){if(t.reference){if(null==t.selection)t.selection=[];else if("string"==typeof t.selection)if(t.selection=t.selection.trim(),t.selection=t.selection.split("."),""===t.selection[0])t.selection=[];else for(var e=0;e<t.selection.length;e++)isNaN(t.selection[e])||(t.selection[e]=+t.selection[e])}else delete t.selection}))},e.prototype.specifyTrigger=function(t){t.trigger||(t.trigger=new T.a)},e.prototype.removeTrigger=function(t){delete t.trigger},e.prototype.specifyCondition=function(t){t.condition||(t.condition=new T.a)},e.prototype.removeCondition=function(t){delete t.condition},e.prototype.exportPlaybook=function(t,e){var n=this;t.stopPropagation(),this.playbookService.exportPlaybook(e.id).subscribe((function(t){Object(c.saveAs)(t,e.name+".playbook")}),(function(t){return n.toastyService.error('Error exporting playbook "'+e.name+'": '+t.message)}))},e.prototype.onImportSelectChange=function(t){this.playbookToImport=t.srcElement.files[0]},e.prototype.importPlaybook=function(){var t=this;this.playbookToImport&&this.playbookService.importPlaybook(this.playbookToImport).subscribe((function(e){t.playbooks.push(e),t.playbooks.sort((function(t,e){return t.name>e.name?1:-1})),t.toastyService.success('Successfuly imported playbook "'+t.playbookToImport.name+'".'),t.playbookToImport=null,t.importFile.nativeElement.value=""}),(function(e){return t.toastyService.error('Error importing playbook "'+t.playbookToImport.name+'": '+e.message)}))},e.prototype.onNodeSelect=function(t){var e=this;this.selectedBranchParams=null;var n=t.target.data();this.cy.elements('[_id!="'+n._id+'"]').unselect();var o=this.loadedWorkflow.actions.find((function(t){return t.id===n._id}));if(o){var a=this._getAction(o.app_name,o.action_name),i=[];!this.users&&(a.parameters.findIndex((function(t){return"user"===t.schema.type}))>-1||a.parameters.findIndex((function(t){return t.schema.items&&"user"===t.schema.items.type}))>-1)&&(this.waitingOnData=!0,i.push(this.playbookService.getUsers().then((function(t){return e.users=t})))),!this.roles&&(a.parameters.findIndex((function(t){return"role"===t.schema.type}))>-1||a.parameters.findIndex((function(t){return t.schema.items&&"role"===t.schema.items.type}))>-1)&&(this.waitingOnData=!0,i.push(this.playbookService.getRoles().then((function(t){return e.roles=t})))),i.length&&Promise.all(i).then((function(){e.waitingOnData=!1})).catch((function(t){e.waitingOnData=!1,e.toastyService.error("Error grabbing users or roles: "+t.message)})),this.selectedAction=o,this.selectedActionApi=a,this.relevantDevices=this.devices.filter((function(t){return t.app_name===e.selectedAction.app_name}))}},e.prototype.onEdgeSelect=function(t){this.selectedAction=null,this.selectedBranchParams=null;var e=t.target.data("_id");this.cy.elements('[_id!="'+e+'"]').unselect();var n=this.loadedWorkflow.branches.find((function(t){return t.id===e})),o=this.loadedWorkflow.actions.find((function(t){return t.id===n.source_id}));this.selectedBranchParams={branch:n,returnTypes:this._getAction(o.app_name,o.action_name).returns,appName:o.app_name,actionName:o.action_name}},e.prototype.onUnselect=function(t){this.selectedAction&&this.cy.elements('node[_id="'+this.selectedAction.id+'"]').data("label",this.selectedAction.name),this.cy.$(":selected").length||(this.selectedAction=null,this.selectedBranchParams=null)},e.prototype.onEdgeRemove=function(t){var e=t.target.data();if(e&&!e.temp){var n=e.source,o=e.target;this.loadedWorkflow.branches=this.loadedWorkflow.branches.filter((function(t){return!(t.source_id===n&&t.destination_id===o)}))}},e.prototype.onNodeAdded=function(t){var e=t.target;e.isNode()&&1===this.cy.nodes().size()&&this.setStartNode(e.data("_id"))},e.prototype.onNodeRemoved=function(t){var e=t.target,n=e.data();n&&e.isNode()&&this.loadedWorkflow.start===n._id&&this.setStartNode(null),this.selectedAction&&this.selectedAction.id===n._id&&(this.selectedAction=null),this.loadedWorkflow.actions=this.loadedWorkflow.actions.filter((function(t){return t.id!==n._id})),this.loadedWorkflow.branches=this.loadedWorkflow.branches.filter((function(t){return!(t.source_id===n._id||t.destination_id===n._id)}))},e.prototype.handleDropEvent=function(t){if(null!==this.cy){var e=t.dragData.appName,n=t.dragData.actionApi,o={x:t.mouseEvent.layerX,y:t.mouseEvent.layerY};this.insertNode(e,n.name,o,!0)}},e.prototype.handleDoubleClickEvent=function(t,e){if(null!==this.cy){var n=this.cy.extent(),o={x:this.avg(n.x1,n.x2),y:this.avg(n.y1,n.y2)};this.insertNode(t,e,o,!1)}},e.prototype.avg=function(t,e){return(t+e)/2},e.prototype.insertNode=function(t,e,n,o){var a,i=this,r=s.UUID.UUID(),l=[],c=this._getAction(t,e).parameters;c&&c.length&&this._getAction(t,e).parameters.forEach((function(t){l.push(i.getDefaultArgument(t))}));var d=0;this.loadedWorkflow.actions.forEach((function(t){return t.action_name===e?d++:null}));var u=d?e+" "+(d+1):e;t&&e&&(a=new x.a),a.id=r,a.name=u,a.app_name=t,a.action_name=e,a.arguments=l,this.loadedWorkflow.actions.push(a);var p={group:"nodes",data:{id:r,_id:r,label:u},renderedPosition:null,position:null};this._setNodeDisplayProperties(p,a),o?p.renderedPosition=n:p.position=n,this.ur.do("add",p)},e.prototype.copy=function(){this.cy.clipboard().copy(this.cy.$(":selected"))},e.prototype.paste=function(){var t=this;this.ur.do("paste").forEach((function(e){var n=Object(d.classToClass)(t.loadedWorkflow.actions.find((function(t){return t.id===e.data("_id")}))),o=s.UUID.UUID();n.id=o,n.arguments.forEach((function(t){return delete t.id})),e.data({id:o,_id:o,isStartNode:!1}),t.loadedWorkflow.actions.push(n)}))},e.prototype._setNodeDisplayProperties=function(t,e){this._getAction(e.app_name,e.action_name).event?t.type="eventAction":t.type="action"},e.prototype.clearExecutionResults=function(){this.clearExecutionHighlighting(),this.consoleLog=[],this.actionStatuses=[]},e.prototype.clearExecutionHighlighting=function(){this.cy.elements().removeClass("success-highlight failure-highlight executing-highlight")},e.prototype.setStartNode=function(t){if(t)this.loadedWorkflow.start=t;else{var e=this.cy.nodes().roots();e.size()>0&&(this.loadedWorkflow.start=e[0].data("_id"))}this.cy.elements("node[?isStartNode]").data("isStartNode",!1),this.cy.elements('node[_id="'+t+'"]').data("isStartNode",!0)},e.prototype.removeSelectedNodes=function(){var t=this.cy.$(":selected");this.cy.elements(":selected").unselect(),t.length>0&&this.ur.do("remove",t)},e.prototype._addCytoscapeEventBindings=function(){var t=this;document.addEventListener("keydown",(function(e){var n=document.activeElement.tagName;"BODY"!==n&&"BUTTON"!==n||null!==t.cy&&(46===e.which?t.removeSelectedNodes():e.ctrlKey&&(67===e.which?t.copy():86===e.which&&t.paste()))}))},e.prototype.renamePlaybookModal=function(t,e){var n=this;t.stopPropagation(),this._closeWorkflowsModal(),this.modalParams={title:"Rename Existing Playbook",submitText:"Rename Playbook",shouldShowPlaybook:!0,submit:function(){n.playbookService.renamePlaybook(e.id,n.modalParams.newPlaybook).then((function(t){n.playbooks.find((function(e){return e.id===t.id})).name=t.name,n.playbooks.sort((function(t,e){return t.name>e.name?1:-1})),n.toastyService.success('Successfully renamed playbook "'+t.name+'".'),n._closeModal()})).catch((function(t){return n.toastyService.error('Error renaming playbook "'+n.modalParams.newPlaybook+'": '+t.message)}))}},this._openModal()},e.prototype.duplicatePlaybookModal=function(t,e){var n=this;t.stopPropagation(),this._closeWorkflowsModal(),this.modalParams={title:"Duplicate Existing Playbook",submitText:"Duplicate Playbook",shouldShowPlaybook:!0,submit:function(){n.playbookService.duplicatePlaybook(e.id,n.modalParams.newPlaybook).then((function(t){n.playbooks.push(t),n.playbooks.sort((function(t,e){return t.name>e.name?1:-1})),n.toastyService.success('Successfully duplicated playbook "'+e.name+'" as "'+t.name+'".'),n._closeModal()})).catch((function(t){return n.toastyService.error('Error duplicating playbook "'+n.modalParams.newPlaybook+'": '+t.message)}))}},this._openModal()},e.prototype.deletePlaybook=function(t,e){var n=this;t.stopPropagation(),confirm('Are you sure you want to delete playbook "'+e.name+'"?')&&this.playbookService.deletePlaybook(e.id).then((function(){n.playbooks=n.playbooks.filter((function(t){return t.id!==e.id})),n.loadedPlaybook&&e.id===n.loadedPlaybook.id&&n.closeWorkflow(),n.toastyService.success('Successfully deleted playbook "'+e.name+'".')})).catch((function(t){return n.toastyService.error('Error deleting playbook "'+e.name+'": '+t.message)}))},e.prototype.newWorkflowModal=function(){var t=this;this.loadedWorkflow&&!confirm('Are you sure you want to create a new workflow? Any unsaved changes on "'+this.loadedWorkflow.name+'" will be lost!')||(this.modalParams={title:"Create New Workflow",submitText:"Add Workflow",shouldShowExistingPlaybooks:!0,shouldShowPlaybook:!0,shouldShowWorkflow:!0,submit:function(){var e=new k.a;e.name=t.modalParams.newWorkflow;var n=t.playbooks.find((function(e){return e.id===t.modalParams.selectedPlaybookId}));n||((n=new w.a).name=t.modalParams.newPlaybook,n.workflows.push(e)),t.loadWorkflow(n,e),t._closeModal()}},this._openModal())},e.prototype.duplicateWorkflowModal=function(t,e){var n=this;this._closeWorkflowsModal(),this.modalParams={title:"Duplicate Existing Workflow",submitText:"Duplicate Workflow",shouldShowPlaybook:!0,shouldShowExistingPlaybooks:!0,selectedPlaybookId:t,shouldShowWorkflow:!0,submit:function(){var t,o,a=n.playbooks.find((function(t){return t.id===n.modalParams.selectedPlaybookId}));if(a||(t=n.modalParams.newPlaybook),t){var i=new w.a;i.name=t,o=n.playbookService.newPlaybook(i).then((function(t){n.playbooks.push(t),n.playbooks.sort((function(t,e){return t.name>e.name?1:-1})),a=t,n.modalParams.selectedPlaybookId=t.id}))}else o=Promise.resolve();o.then((function(){return n.playbookService.duplicateWorkflow(e,a.id,n.modalParams.newWorkflow)})).then((function(t){a.workflows.push(t),a.workflows.sort((function(t,e){return t.name>e.name?1:-1})),n.toastyService.success('Successfully duplicated workflow "'+a.name+" - "+n.modalParams.newWorkflow+'".'),n._closeModal()})).catch((function(t){return n.toastyService.error('Error duplicating workflow "'+a.name+" - "+n.modalParams.newWorkflow+'": '+t.message)}))}},this._openModal()},e.prototype.deleteWorkflow=function(t,e){var n=this;confirm('Are you sure you want to delete workflow "'+t.name+" - "+e.name+'"?')&&this.playbookService.deleteWorkflow(e.id).then((function(){var o=n.playbooks.find((function(e){return e.id===t.id}));o.workflows=o.workflows.filter((function(t){return t.id!==e.id})),o.workflows.length||(n.playbooks=n.playbooks.filter((function(t){return t.id!==o.id}))),n.loadedPlaybook&&n.loadedWorkflow&&t.id===n.loadedPlaybook.id&&e.id===n.loadedWorkflow.id&&n.closeWorkflow(),n.toastyService.success('Successfully deleted workflow "'+t.name+" - "+e.name+'".')})).catch((function(o){return n.toastyService.error('Error deleting workflow "'+t.name+" - "+e.name+'": '+o.message)}))},e.prototype._openModal=function(){t("#playbookAndWorkflowActionModal").modal("show")},e.prototype._closeModal=function(){t("#playbookAndWorkflowActionModal").modal("hide")},e.prototype._closeWorkflowsModal=function(){t("#workflowsModal").modal("hide")},e.prototype.getPreviousActions=function(){return this.loadedWorkflow.actions},e.prototype._getAction=function(t,e){return this.appApis.find((function(e){return e.name===t})).action_apis.find((function(t){return t.name===e}))},e.prototype.getOrInitializeSelectedActionArgument=function(t){var e=this.selectedAction.arguments.find((function(e){return e.name===t.name}));return e||(e=this.getDefaultArgument(t),this.selectedAction.arguments.push(e),e)},e.prototype.getDefaultArgument=function(t){return Object(d.plainToClass)(_.a,{name:t.name,value:null!=t.schema.default?t.schema.default:null,reference:"",selection:""})},e.prototype.getConditionApis=function(t){return this.appApis.find((function(e){return e.name===t})).condition_apis},e.prototype.getTransformApis=function(t){return this.appApis.find((function(e){return e.name===t})).transform_apis},e.prototype.getDeviceApis=function(t){return this.appApis.find((function(e){return e.name===t})).device_apis},e.prototype.getInputApiArgs=function(t,e,n){return this._getAction(t,e).parameters.find((function(t){return t.name===n}))},e.prototype.getAppsWithActions=function(){return this.appApis.filter((function(t){return t.action_apis&&t.action_apis.length}))},e.prototype.getFriendlyJSON=function(t){if(!t)return"N/A";var e=JSON.stringify(t,null,1);return(e=e.replace(/[\{\[\}\]"]/g,"").trim())||"N/A"},e.prototype.getFriendlyArguments=function(t){if(!t||!t.length)return"N/A";var e={};t.forEach((function(t){if(t.value&&(e[t.name]=t.value),t.reference&&(e[t.name]=t.reference.toString()),t.selection&&t.selection.length){var n=t.selection.join(".");e[t.name]=e[t.name]+" ("+n+")"}}));var n=JSON.stringify(e,null,1);return n=n.replace(/[\{\}"]/g,"")},e.prototype.removeWhitespace=function(t){return t.replace(/\s/g,"")},e.prototype.recalculateRelativeTimes=function(t){var e,n=this;(e=t?[t]:this.actionStatuses)&&e.length&&e.forEach((function(t){t.started_at&&(n.actionStatusStartedRelativeTimes[t.execution_id]=n.utils.getRelativeLocalTime(t.started_at)),t.completed_at&&(n.actionStatusCompletedRelativeTimes[t.execution_id]=n.utils.getRelativeLocalTime(t.completed_at))}))},e.prototype.calculateLocalizedTimes=function(t){t.started_at&&(t.localized_started_at=this.utils.getLocalTime(t.started_at)),t.completed_at&&(t.localized_completed_at=this.utils.getLocalTime(t.completed_at))},e.prototype.getErrors=function(){return this.loadedWorkflow?this.loadedWorkflow.all_errors.map((function(t){return{error:t}})):[]},e.prototype.recalculateConsoleTable=function(t){var e;switch(t.target.getAttribute("href")){case"#console":e=this.consoleTable;break;case"#executionLog":e=this.workflowResultsTable;break;case"#errorLog":e=this.errorLogTable}e&&e.recalculate&&(this.cdr.detectChanges(),e.recalculate())},e.prototype.search_for_actions=function(t){var e;e=t.target.value;this.apps_actions.nativeElement.querySelectorAll(".panel-title");var n=this.apps_actions.nativeElement.querySelectorAll(".panel-body");if(this.apps_actions.nativeElement.querySelectorAll(".panel").forEach((function(t){t.style.display="block"})),""!=e.trim())for(var o=0,a=n;o<a.length;o++){var i=a[o];i.textContent.toLowerCase().includes(e.toLowerCase().trim())?(i.closest(".panel").closest(".panel").style.display="block",i.closest(".panel").closest(".panel:not(.actionPanel)").style.display="block"):i.closest(".panel").style.display="none"}},o.a([Object(a.ViewChild)("cyRef"),o.c("design:type",a.ElementRef)],e.prototype,"cyRef",void 0),o.a([Object(a.ViewChild)("workflowResultsContainer"),o.c("design:type",a.ElementRef)],e.prototype,"workflowResultsContainer",void 0),o.a([Object(a.ViewChild)("workflowResultsTable"),o.c("design:type",r.DatatableComponent)],e.prototype,"workflowResultsTable",void 0),o.a([Object(a.ViewChild)("consoleContainer"),o.c("design:type",a.ElementRef)],e.prototype,"consoleContainer",void 0),o.a([Object(a.ViewChild)("consoleTable"),o.c("design:type",r.DatatableComponent)],e.prototype,"consoleTable",void 0),o.a([Object(a.ViewChild)("errorLogContainer"),o.c("design:type",a.ElementRef)],e.prototype,"errorLogContainer",void 0),o.a([Object(a.ViewChild)("errorLogTable"),o.c("design:type",r.DatatableComponent)],e.prototype,"errorLogTable",void 0),o.a([Object(a.ViewChild)("importFile"),o.c("design:type",a.ElementRef)],e.prototype,"importFile",void 0),o.a([Object(a.ViewChild)("accordion"),o.c("design:type",a.ElementRef)],e.prototype,"apps_actions",void 0),e=o.a([Object(a.Component)({selector:"playbook-component",template:n(595),styles:[n(594),n(590),n(587)],encapsulation:a.ViewEncapsulation.None,providers:[v.a,b.a,y.a]}),o.c("design:paramtypes",[v.a,b.a,i.c,i.a,a.ChangeDetectorRef,y.a])],e)})()}).call(this,n(23))},205:function(t,e,n){"use strict";var o=n(1),a=n(0),i=n(13),r=n(22),s=(n(125),n(100),n(3)),l=n(4),c=(function(){function t(){this.count=0,this.avg_time="0:00:00.000000"}return Object.defineProperty(t.prototype,"display_avg_time",{get:function(){var t=l.duration(this.avg_time);return t.asSeconds()>=1?t.asSeconds()+" s":t.asMilliseconds()+" ms"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"display_text",{get:function(){return this.count>0?this.count+" ("+this.display_avg_time+")":"0"},enumerable:!0,configurable:!0}),t})(),d=(function(){function t(){this.success_metrics=new c,this.error_metrics=new c}return o.a([Object(s.Type)((function(){return c})),o.c("design:type",c)],t.prototype,"success_metrics",void 0),o.a([Object(s.Type)((function(){return c})),o.c("design:type",c)],t.prototype,"error_metrics",void 0),t})(),u=(function(){function t(){this.actions=[]}return o.a([Object(s.Type)((function(){return d})),o.c("design:type",Array)],t.prototype,"actions",void 0),t})(),p=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.b(e,t),e})(c);n.d(e,"a",(function(){return f}));var f=(function(){function t(t){this.authHttp=t}return t.prototype.getAppMetrics=function(){return this.authHttp.get("/api/metrics/apps").toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(u,t.apps)})).catch(this.handleError)},t.prototype.getWorkflowMetrics=function(){return this.authHttp.get("/api/metrics/workflows").toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(p,t.workflows)})).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof i.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=o.a([Object(a.Injectable)(),o.c("design:paramtypes",[r.JwtHttp])],t)})()},206:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var o=n(1),a=n(0),i=n(13),r=n(22),s=(n(100),n(3)),l=n(73),c=n(39),d=(function(){function t(t){this.authHttp=t}return t.prototype.addWorkflowToQueue=function(t){return this.authHttp.post("api/workflowqueue",{workflow_id:t}).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(l.a,t)})).catch(this.handleError)},t.prototype.performWorkflowStatusAction=function(t,e){return this.authHttp.patch("api/workflowqueue",{execution_id:t,status:e}).toPromise().then((function(){return null})).catch(this.handleError)},t.prototype.getWorkflowStatusList=function(){return this.authHttp.get("api/workflowqueue").toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(l.a,t)})).catch(this.handleError)},t.prototype.getWorkflowStatus=function(t){return this.authHttp.get("api/workflowqueue/"+t).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(l.a,t)})).catch(this.handleError)},t.prototype.getPlaybooks=function(){return this.authHttp.get("/api/playbooks").toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(c.a,t)})).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof i.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=o.a([Object(a.Injectable)(),o.c("design:paramtypes",[r.JwtHttp])],t)})()},207:function(t,e,n){"use strict";n.d(e,"a",(function(){return g}));var o=n(1),a=n(0),i=n(13),r=n(22),s=n(3),l=n(34),c=n(39),d=n(148),u=n(75),p=n(74),f=n(49),h=n(73),m=n(2),g=(function(){function t(t){this.authHttp=t}return t.prototype.getPlaybooks=function(){return this.authHttp.get("/api/playbooks").toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(c.a,t)})).catch(this.handleError)},t.prototype.newPlaybook=function(t){return this.authHttp.post("/api/playbooks",t).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(c.a,t)})).catch(this.handleError)},t.prototype.renamePlaybook=function(t,e){return this.authHttp.patch("/api/playbooks",{id:t,name:e}).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(c.a,t)})).catch(this.handleError)},t.prototype.duplicatePlaybook=function(t,e){return this.authHttp.post("/api/playbooks?source="+t,{name:e}).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(c.a,t)})).catch(this.handleError)},t.prototype.deletePlaybook=function(t){return this.authHttp.delete("/api/playbooks/"+t).toPromise().then(this.extractData).catch(this.handleError)},t.prototype.exportPlaybook=function(t){var e=new i.RequestOptions({responseType:i.ResponseContentType.Blob});return this.authHttp.get("/api/playbooks/"+t+"?mode=export",e).map((function(t){return t.blob()})).catch(this.handleError)},t.prototype.importPlaybook=function(t){var e=new FormData;e.append("file",t,t.name);var n=new i.Headers;n.append("Accept","application/json");var o=new i.RequestOptions({headers:n});return this.authHttp.post("/api/playbooks",e,o).map((function(t){return Object(s.plainToClass)(c.a,t.json())})).catch((function(t){return m.Observable.throw(t)}))},t.prototype.duplicateWorkflow=function(t,e,n){return this.authHttp.post("/api/workflows?source="+t,{playbook_id:e,name:n}).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(l.a,t)})).catch(this.handleError)},t.prototype.deleteWorkflow=function(t){return this.authHttp.delete("/api/workflows/"+t).toPromise().then(this.extractData).catch(this.handleError)},t.prototype.newWorkflow=function(t,e){return e.playbook_id=t,this.authHttp.post("/api/workflows",Object(s.classToPlain)(e)).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(l.a,t)})).catch(this.handleError)},t.prototype.saveWorkflow=function(t){return this.authHttp.put("/api/workflows",Object(s.classToPlain)(t)).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(l.a,t)})).catch(this.handleError)},t.prototype.loadWorkflow=function(t){return this.authHttp.get("/api/workflows/"+t).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(l.a,t)})).catch(this.handleError)},t.prototype.addWorkflowToQueue=function(t){return this.authHttp.post("api/workflowqueue",{workflow_id:t}).toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(h.a,t)})).catch(this.handleError)},t.prototype.getDevices=function(){return this.authHttp.get("/api/devices").toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(u.a,t)})).catch(this.handleError)},t.prototype.getApis=function(){return this.authHttp.get("/api/apps/apis").toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(d.a,t)})).catch(this.handleError)},t.prototype.getUsers=function(){return this.authHttp.get("/api/users").toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(p.a,t)})).catch(this.handleError)},t.prototype.getRoles=function(){return this.authHttp.get("/api/roles").toPromise().then(this.extractData).then((function(t){return Object(s.plainToClass)(f.a,t)})).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof i.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=o.a([Object(a.Injectable)(),o.c("design:paramtypes",[r.JwtHttp])],t)})()},210:function(t,e,n){var o=n(572);t.exports="string"==typeof o?o:o.toString()},211:function(t,e,n){var o=n(576);t.exports="string"==typeof o?o:o.toString()},212:function(t,e,n){var o=n(583);t.exports="string"==typeof o?o:o.toString()},25:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=(function(){function t(){this.errors=[]}return Object.defineProperty(t.prototype,"all_errors",{get:function(){return this.errors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"has_errors",{get:function(){return this.all_errors.length>0},enumerable:!0,configurable:!0}),t.prototype.hasInput=function(){return this.reference||this.value},t.prototype.sanitize=function(){if(delete this.errors,"string"==typeof this.value&&(this.value=this.value.trim()),this.reference&&void 0!==this.value&&delete this.value,""===this.reference&&delete this.reference,this.value||this.reference)if(this.reference){if(null==this.selection)this.selection=[];else if("string"==typeof this.selection)if(this.selection=this.selection.trim(),this.selection=this.selection.split("."),""===this.selection[0])this.selection=[];else for(var t=0;t<this.selection.length;t++)isNaN(this.selection[t])||(this.selection[t]=+this.selection[t])}else delete this.selection},t})()},34:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(1),a=n(3),i=n(147),r=n(153),s=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actions=[],e.branches=[],e}return o.b(e,t),Object.defineProperty(e.prototype,"all_errors",{get:function(){var t,e;return(t=(e=this.errors).concat.apply(e,this.actions.map((function(t){return t.all_errors})))).concat.apply(t,this.branches.map((function(t){return t.all_errors})))},enumerable:!0,configurable:!0}),e.prototype.listBranchCounters=function(){var t=this;return this.branches.map((function(e){var n=t.findActionById(e.source_id),o=t.findActionById(e.destination_id);return{id:e.id,text:(n||{name:null}).name+" > "+(o||{name:null}).name}}))},e.prototype.findActionById=function(t){return this.actions.find((function(e){return e.id==t}))},o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],e.prototype,"actions",void 0),o.a([Object(a.Type)((function(){return r.a})),o.c("design:type",Array)],e.prototype,"branches",void 0),e})(n(41).a)},39:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n(1),a=n(3),i=n(34),r=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.workflows=[],e}return o.b(e,t),Object.defineProperty(e.prototype,"all_errors",{get:function(){var t;return(t=this.errors).concat.apply(t,this.workflows.map((function(t){return t.all_errors})))},enumerable:!0,configurable:!0}),o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],e.prototype,"workflows",void 0),e})(n(41).a)},41:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=(function(){function t(){this.errors=[]}return Object.defineProperty(t.prototype,"all_errors",{get:function(){return this.errors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"has_errors",{get:function(){return this.all_errors.length>0},enumerable:!0,configurable:!0}),t})()},430:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error('Cannot find module "'+t+'".');throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=430},477:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(1),a=n(3),i=n(97),r=n(73),s=(function(){function t(){}return t.prototype.toNewWorkflowStatus=function(){var t=new r.a;return t.execution_id=this.execution_id,t.workflow_id=this.workflow_id,t.name=this.name,t.status=this.status,t.current_action=this.current_action,t},o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",i.a)],t.prototype,"current_action",void 0),t})()},478:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=(function(){function t(){}return t.prototype.toNewConsoleLog=function(){var e=new t;return e.message=this.message,e.action_name=this.action_name,e.app_name=this.app_name,e.workflow=this.workflow,e.level=this.level,e},t})()},487:function(t,e,n){"use strict";n.r(e);var o=n(475),a=n(1),i=n(0),r=n(13),s=n(42),l=n(11),c=n(18),d=n(55),u=n(6),p=n(486),f=n(22),h=n(485),m=n(476),g=n(120),v=n(156),b=(n(79),n(4)),y=(n(125),n(100),n(3)),w=(function(){return function(){}})(),k=(function(){function t(){this.workflows=[],this.task_trigger=new w}return a.a([Object(y.Type)((function(){return w})),a.c("design:type",w)],t.prototype,"task_trigger",void 0),t})(),x=n(39),S={0:"stopped",1:"running",2:"paused"},_=(function(){function t(t){this.authHttp=t}return t.prototype.getSchedulerStatus=function(){return this.authHttp.get("/api/scheduler").toPromise().then(this.extractData).then((function(t){return S[t.status]})).catch(this.handleError)},t.prototype.changeSchedulerStatus=function(t){return this.authHttp.put("/api/scheduler",{status:t}).toPromise().then(this.extractData).then((function(t){return S[t.status]})).catch(this.handleError)},t.prototype.getScheduledTasks=function(){return this.authHttp.get("/api/scheduledtasks").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(k,t)})).catch(this.handleError)},t.prototype.addScheduledTask=function(t){return this.authHttp.post("/api/scheduledtasks",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(k,t)})).catch(this.handleError)},t.prototype.editScheduledTask=function(t){return this.authHttp.put("/api/scheduledtasks",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(k,t)})).catch(this.handleError)},t.prototype.deleteScheduledTask=function(t){return this.authHttp.delete("/api/scheduledtasks/"+t).toPromise().then((function(){return null})).catch(this.handleError)},t.prototype.changeScheduledTaskStatus=function(t,e){return this.authHttp.patch("/api/scheduledtasks",{id:t,action:e}).toPromise().then((function(){return null})).catch(this.handleError)},t.prototype.getPlaybooks=function(){return this.authHttp.get("/api/playbooks").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(x.a,t)})).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof r.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=a.a([Object(i.Injectable)(),a.c("design:paramtypes",[f.JwtHttp])],t)})(),T=(function(){return function(){}})(),C=(function(){return function(){}})(),A=(function(){return function(){}})(),E=(function(){function t(t,e,n,o){this.schedulerService=t,this.activeModal=e,this.toastyService=n,this.toastyConfig=o,this.workingScheduledTask=new k,this.availableWorkflows=[],this.scheduledItemTriggerTypes=["date","interval","cron"],this.cron=new T,this.interval=new C,this.date=new A}return t.prototype.ngOnInit=function(){this.toastyConfig.theme="bootstrap",this.workflowSelectConfig={width:"100%",multiple:!0,allowClear:!0,placeholder:"Select workflow(s) to run...",closeOnSelect:!1}},t.prototype.submit=function(){var t=this,e=this.validate();e?this.toastyService.error(e):("cron"===this.workingScheduledTask.task_trigger.type&&this.convertStringsToInt(this.workingScheduledTask.task_trigger.args),this.workingScheduledTask.id?this.schedulerService.editScheduledTask(this.workingScheduledTask).then((function(e){return t.activeModal.close({scheduledTask:e,isEdit:!0})})).catch((function(e){return t.toastyService.error(e.message)})):this.schedulerService.addScheduledTask(this.workingScheduledTask).then((function(e){return t.activeModal.close({scheduledTask:e,isEdit:!1})})).catch((function(e){return t.toastyService.error(e.message)})))},t.prototype.validate=function(){if(!this.workingScheduledTask.name)return"A name is required.";if(!this.workingScheduledTask.workflows||!this.workingScheduledTask.workflows.length)return"Please specify at least one workflow to be run.";var t=this.workingScheduledTask.task_trigger.args;if(!t)return"Please select a type and fill out the trigger parameters.";if(!t.start_date&&!t.run_date)return"A start date is required.";if(("interval"===this.workingScheduledTask.task_trigger.type||"cron"===this.workingScheduledTask.task_trigger.type)&&+t.start_date>+t.end_date)return"The end date cannot be before the start date.";return"interval"!==this.workingScheduledTask.task_trigger.type||this._doesArgsHaveAnything(t)?"cron"!==this.workingScheduledTask.task_trigger.type||this._doesArgsHaveAnything(t)?"":"You must specify some cron parameters for the actions to occur.":"You must specify some interval of time for the actions to occur."},t.prototype._doesArgsHaveAnything=function(t){var e=!1;return Object.keys(t).forEach((function(n){!e&&"start_date"!==n&&"end_date"!==n&&t[n]&&("string"==typeof t[n]?(t[n]=t[n].trim(),t[n]&&"0"!==t[n]&&"*"!==t[n]&&(e=!0)):e=!0)})),e},t.prototype.changeType=function(t){switch(t){case"cron":this.workingScheduledTask.task_trigger.args=this.cron;break;case"interval":this.workingScheduledTask.task_trigger.args=this.interval;break;case"date":this.workingScheduledTask.task_trigger.args=this.date;break;default:this.workingScheduledTask.task_trigger.args=null}},t.prototype.workflowsSelectChanged=function(t){this.workingScheduledTask.workflows=t.value},t.prototype.getToday=function(){return b().format("YYYY-MM-DD")},t.prototype.convertStringsToInt=function(t){if("object"==typeof t)for(var e=0,n=Object.entries(t);e<n.length;e++){var o=n[e],a=o[0],i=o[1];if("start_date"===a||"end_date"===a)return;if(isNaN(i))return;t[a]=+i}},a.a([Object(i.Input)(),a.c("design:type",k)],t.prototype,"workingScheduledTask",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"title",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"submitText",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"availableWorkflows",void 0),t=a.a([Object(i.Component)({selector:"scheduler-modal",template:n(584),styles:[n(212)],providers:[_]}),a.c("design:paramtypes",[_,c.a,u.c,u.a])],t)})(),M=n(15),j=(function(){function t(t,e,n,o,a){this.schedulerService=t,this.modalService=e,this.toastyService=n,this.toastyConfig=o,this.utils=a,this.scheduledTasks=[],this.displayScheduledTasks=[],this.availableWorkflows=[],this.filterQuery=new l.FormControl}return t.prototype.ngOnInit=function(){var t=this;this.toastyConfig.theme="bootstrap",this.getSchedulerStatus(),this.getWorkflows(),this.getScheduledTasks(),this.filterQuery.valueChanges.debounceTime(500).subscribe((function(e){return t.filterScheduledTasks()}))},t.prototype.filterScheduledTasks=function(){var t=this.filterQuery.value?this.filterQuery.value.toLocaleLowerCase():"";this.displayScheduledTasks=this.scheduledTasks.filter((function(e){return e.name.toLocaleLowerCase().includes(t)||e.description.toString().includes(t)}))},t.prototype.getSchedulerStatus=function(){var t=this;this.schedulerService.getSchedulerStatus().then((function(e){return t.schedulerStatus=e})).catch((function(e){return t.toastyService.error("Error retrieving scheduler status: "+e.message)}))},t.prototype.changeSchedulerStatus=function(t){var e=this;"start"===t&&"paused"===this.schedulerStatus&&(t="resume"),this.schedulerService.changeSchedulerStatus(t).then((function(t){t&&(e.schedulerStatus=t)})).catch((function(t){return e.toastyService.error("Error changing scheduler status: "+t.message)}))},t.prototype.getScheduledTasks=function(){var t=this;this.schedulerService.getScheduledTasks().then((function(e){return t.displayScheduledTasks=t.scheduledTasks=e})).catch((function(e){return t.toastyService.error("Error retrieving scheduled tasks: "+e.message)}))},t.prototype.addScheduledTask=function(){var t=this.modalService.open(E,{size:"lg"});t.componentInstance.title="Schedule a New Task",t.componentInstance.submitText="Add Scheduled Task",t.componentInstance.availableWorkflows=this.availableWorkflows,this._handleModalClose(t)},t.prototype.editScheduledTask=function(t){var e=this.modalService.open(E,{size:"lg"});e.componentInstance.title="Edit Task "+t.name,e.componentInstance.submitText="Save Changes",e.componentInstance.availableWorkflows=this.availableWorkflows,e.componentInstance.workingScheduledTask=this.utils.cloneDeep(t),delete e.componentInstance.workingScheduledTask.$$index,this._handleModalClose(e)},t.prototype.deleteScheduledTask=function(t){var e=this;confirm('Are you sure you want to delete the scheduled task "'+t.name+'"?')&&this.schedulerService.deleteScheduledTask(t.id).then((function(){e.scheduledTasks=e.scheduledTasks.filter((function(e){return e.id!==t.id})),e.filterScheduledTasks(),e.toastyService.success('Scheduled Task "'+t.name+'" successfully deleted.')})).catch((function(t){return e.toastyService.error("Error deleting task: "+t.message)}))},t.prototype.changeScheduledTaskStatus=function(t,e){var n,o=this;switch(e){case"start":n="running";break;case"pause":n="paused";break;case"stop":n="stopped";break;default:this.toastyService.error("Attempted to set an unknown status "+e)}n&&this.schedulerService.changeScheduledTaskStatus(t.id,e).then((function(){t.status=n})).catch((function(t){return o.toastyService.error("Error changing scheduler status: "+t.message)}))},t.prototype.getWorkflows=function(){var t=this;this.schedulerService.getPlaybooks().then((function(e){e.forEach((function(e){e.workflows.forEach((function(n){t.availableWorkflows.push({id:n.id,text:e.name+" - "+n.name})}))}))}))},t.prototype.getRule=function(t){var e=JSON.stringify(t.task_trigger.args,null,1);return e=e.substr(1,e.length-2).replace(/"/g,"")},t.prototype.getFriendlyWorkflows=function(t){return this.availableWorkflows&&t.workflows&&t.workflows.length?this.availableWorkflows.filter((function(e){return t.workflows.indexOf(e.id)>=0})).map((function(t){return t.text})).join(", "):""},t.prototype._handleModalClose=function(t){var e=this;t.result.then((function(t){if(t&&t.scheduledTask)if(t.isEdit){var n=e.scheduledTasks.find((function(e){return e.id===t.scheduledTask.id}));Object.assign(n,t.scheduledTask),e.filterScheduledTasks(),e.toastyService.success('Scheduled task "'+t.scheduledTask.name+'" successfully edited.')}else e.scheduledTasks.push(t.scheduledTask),e.filterScheduledTasks(),e.toastyService.success('Scheduled task "'+t.scheduledTask.name+'" successfully added.')}),(function(t){t&&e.toastyService.error(t.message)}))},t=a.a([Object(i.Component)({selector:"scheduler-component",template:n(581),styles:[n(212),n(580)],encapsulation:i.ViewEncapsulation.None,providers:[_,M.a]}),a.c("design:paramtypes",[_,c.b,u.c,u.a,M.a])],t)})(),O=n(75),I=n(148),P=(function(){function t(t){this.authHttp=t}return t.prototype.getDevices=function(){return this.authHttp.get("/api/devices").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(O.a,t)})).catch(this.handleError)},t.prototype.addDevice=function(t){return this.authHttp.post("/api/devices",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(O.a,t)})).catch(this.handleError)},t.prototype.editDevice=function(t){return this.authHttp.patch("/api/devices",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(O.a,t)})).catch(this.handleError)},t.prototype.deleteDevice=function(t){return this.authHttp.delete("/api/devices/"+t).toPromise().then((function(){return null})).catch(this.handleError)},t.prototype.getDeviceApis=function(){return this.authHttp.get("api/apps/apis?field_name=device_apis").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(I.a,t)})).then((function(t){return t.filter((function(t){return t.device_apis&&t.device_apis.length}))})).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof r.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=a.a([Object(i.Injectable)(),a.c("design:paramtypes",[f.JwtHttp])],t)})(),D=n(119),N=(function(){function t(t,e,n,o,a){this.devicesService=t,this.activeModal=e,this.toastyService=n,this.toastyConfig=o,this.cdr=a,this.workingDevice=new D.a,this.appNames=[],this.appApis=[],this.deviceTypesForApp=[],this.deviceTypeFields={},this.validationErrors={},this.encryptedConfirmFields={},this.encryptedFieldsToBeCleared={}}return t.prototype.ngOnInit=function(){this.toastyConfig.theme="bootstrap"},t.prototype.ngAfterViewInit=function(){var t=this;this.workingDevice.app_name&&(this.deviceTypesForApp=this.appApis.find((function(e){return e.name===t.workingDevice.app_name})).device_apis),this.cdr.detectChanges(),this.workingDevice.type&&(this.deviceTypeFields[this.workingDevice.type]=this.workingDevice.fields,this.typeRef.nativeElement.value=this.workingDevice.type,this.handleDeviceTypeSelection(null,this.workingDevice.type)),this.cdr.detectChanges()},t.prototype.handleAppSelection=function(t,e){this.workingDevice.app_name=e,this.deviceTypesForApp=this.appApis.find((function(t){return t.name===e})).device_apis,this.selectedDeviceType&&this._clearDeviceTypeData()},t.prototype.handleDeviceTypeSelection=function(t,e){var n=this;e?(this.selectedDeviceType=this.appApis.find((function(t){return t.name===n.workingDevice.app_name})).device_apis.find((function(t){return t.name===e})),this.workingDevice.type=e,this.workingDevice.fields=this.deviceTypeFields[e]=this.deviceTypeFields[e]||this._getDefaultValues(this.selectedDeviceType),this._getEncryptedConfirmFields(this.selectedDeviceType),this.validationErrors={}):this._clearDeviceTypeData()},t.prototype.handleEncryptedFieldClear=function(t,e){this.encryptedFieldsToBeCleared[t]=e},t.prototype.submit=function(){var t=this;if(this.validate()){var e=this.workingDevice.toDevice();this.workingDevice.id?(e.fields.forEach((function(e,n,o){t.selectedDeviceType.fields.find((function(t){return t.name===e.name})).encrypted&&(t.encryptedFieldsToBeCleared[e.name]?e.value="":("string"==typeof e.value&&!e.value.trim()||"number"==typeof e.value&&!e.value)&&o.splice(n,1))})),this.devicesService.editDevice(e).then((function(e){return t.activeModal.close({device:e,isEdit:!0})})).catch((function(e){return t.toastyService.error(e.message)}))):this.devicesService.addDevice(e).then((function(e){return t.activeModal.close({device:e,isEdit:!1})})).catch((function(e){return t.toastyService.error(e.message)}))}},t.prototype.isBasicInfoValid=function(){return!!(this.workingDevice.name&&this.workingDevice.name.trim()&&this.workingDevice.app_name&&this.workingDevice.type)},t.prototype.validate=function(){var t=this;this.validationErrors={};var e=this.workingDevice.fields;return Object.keys(e).forEach((function(n){"string"==typeof e[n]&&(e[n]=e[n].trim(),t.encryptedConfirmFields[n]&&(t.encryptedConfirmFields[n]=t.encryptedConfirmFields[n].trim()))})),this.selectedDeviceType.fields.forEach((function(n){if(!n.required||t.workingDevice.id&&n.encrypted||!(null==e[n.name]||"string"==typeof e[n.name]&&!e[n.name]||"number"==typeof e[n.name]&&null===e[n.name]))switch(n.schema.type){case"string":if(null==e[n.name]&&(e[n.name]=""),n.encrypted&&!t.encryptedFieldsToBeCleared[n.name]&&t.encryptedConfirmFields[n.name]!==e[n.name]&&t._concatValidationMessage(n.name,"The values for "+n.name+" do not match."),n.schema.enum){var o=n.schema.enum.slice(0);n.required||o.push(""),o.indexOf(e[n.name])<0&&t._concatValidationMessage(n.name,"You must select a value from the list.")}if(!e[n.name])break;void 0!==n.schema.minLength&&e[n.name].length<n.schema.minLength&&t._concatValidationMessage(n.name,"Must be at least "+n.schema.minLength+" characters."),void 0!==n.schema.maxLength&&e[n.name].length>n.schema.maxLength&&t._concatValidationMessage(n.name,"Must be at most "+n.schema.minLength+" characters."),n.schema.pattern&&!new RegExp(n.schema.pattern).test(e[n.name])&&t._concatValidationMessage(n.name,"Input must match a given pattern: "+n.schema.pattern+".");break;case"number":case"integer":if(null==e[n.name])break;var a=t.getMin(n.schema),i=t.getMax(n.schema);null!==a&&e[n.name]<a&&t._concatValidationMessage(n.name,"The minimum value is "+a+"."),null!==i&&e[n.name]>i&&t._concatValidationMessage(n.name,"The maximum value is "+i+"."),void 0!==n.schema.multipleOf&&e[n.name]%n.schema.multipleOf&&t._concatValidationMessage(n.name,"The value must be a multiple of "+n.schema.multipleOf+".");break;case"boolean":e[n.name]=e[n.name]||!1;break;default:t._concatValidationMessage(n.name,"The type specified for field "+n.name+" is invalid.")}else t.validationErrors[n.name]="You must enter a value for "+n.name+"."})),!Object.keys(this.validationErrors).length},t.prototype.getMin=function(t){return void 0===t.minimum?null:t.exclusiveMinimum?t.minimum+1:t.minimum},t.prototype.getMax=function(t){return void 0===t.maximum?null:t.exclusiveMaximum?t.maximum-1:t.maximum},t.prototype._getEncryptedConfirmFields=function(t){var e=this;this.encryptedConfirmFields={},t.fields.forEach((function(t){t.encrypted&&(e.encryptedConfirmFields[t.name]="")}))},t.prototype._getDefaultValues=function(t){var e={};return t.fields.forEach((function(t){t.schema.default?e[t.name]=t.schema.default:e[t.name]=null})),e},t.prototype._clearDeviceTypeData=function(){this.selectedDeviceType=null,this.workingDevice.type=null,this.workingDevice.fields=null,this.validationErrors={},this.encryptedConfirmFields={}},t.prototype._concatValidationMessage=function(t,e){this.validationErrors[t]?this.validationErrors[t]+="\n"+e:this.validationErrors[t]=e},a.a([Object(i.Input)(),a.c("design:type",D.a)],t.prototype,"workingDevice",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"title",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"submitText",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"appNames",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"appApis",void 0),a.a([Object(i.ViewChild)("typeRef"),a.c("design:type",i.ElementRef)],t.prototype,"typeRef",void 0),t=a.a([Object(i.Component)({selector:"device-modal",template:n(577),styles:[n(211)],providers:[P]}),a.c("design:paramtypes",[P,c.a,u.c,u.a,i.ChangeDetectorRef])],t)})(),W=(function(){function t(t,e,n,o){this.devicesService=t,this.modalService=e,this.toastyService=n,this.toastyConfig=o,this.devices=[],this.displayDevices=[],this.appNames=[],this.availableApps=[],this.appApis=[],this.selectedApps=[],this.filterQuery=new l.FormControl}return t.prototype.ngOnInit=function(){var t=this;this.toastyConfig.theme="bootstrap",this.appSelectConfig={width:"100%",multiple:!0,allowClear:!0,placeholder:"Filter by app(s)...",closeOnSelect:!1},this.getDevices(),this.getDeviceApis(),this.filterQuery.valueChanges.debounceTime(500).subscribe((function(e){return t.filterDevices()}))},t.prototype.appSelectChange=function(t){this.selectedApps=t.value,this.filterDevices()},t.prototype.filterDevices=function(){var t=this,e=this.filterQuery.value?this.filterQuery.value.toLocaleLowerCase():"";this.displayDevices=this.devices.filter((function(n){return(n.name.toLocaleLowerCase().includes(e)||n.app_name.toLocaleLowerCase().includes(e))&&(!t.selectedApps.length||t.selectedApps.indexOf(n.app_name)>-1)}))},t.prototype.getDevices=function(){var t=this;this.devicesService.getDevices().then((function(e){return t.displayDevices=t.devices=e})).catch((function(e){return t.toastyService.error("Error retrieving devices: "+e.message)}))},t.prototype.addDevice=function(){var t=this.modalService.open(N);t.componentInstance.title="Add New Device",t.componentInstance.submitText="Add Device",t.componentInstance.appNames=this.appNames,t.componentInstance.appApis=this.appApis,this._handleModalClose(t)},t.prototype.editDevice=function(t){var e=this.modalService.open(N);e.componentInstance.title="Edit Device "+t.name,e.componentInstance.submitText="Save Changes",e.componentInstance.appNames=this.appNames,e.componentInstance.appApis=this.appApis,e.componentInstance.workingDevice=t.toWorkingDevice(),this._handleModalClose(e)},t.prototype.deleteDevice=function(t){var e=this;confirm('Are you sure you want to delete the device "'+t.name+'"?')&&this.devicesService.deleteDevice(t.id).then((function(){e.devices=e.devices.filter((function(e){return e.id!==t.id})),e.filterDevices(),e.toastyService.success('Device "'+t.name+'" successfully deleted.')})).catch((function(t){return e.toastyService.error("Error deleting device: "+t.message)}))},t.prototype.getDeviceApis=function(){var t=this;this.devicesService.getDeviceApis().then((function(e){t.appApis=e,t.appNames=e.map((function(t){return t.name})),t.availableApps=t.appNames.map((function(t){return{id:t,text:t}}))})).catch((function(e){return t.toastyService.error("Error retrieving device types: "+e.message)}))},t.prototype.getCustomFields=function(t){var e={};t.fields.forEach((function(t){t.value&&(e[t.name]=t.value)}));var n=JSON.stringify(e,null,1);return n=n.substr(1,n.length-2).replace(/"/g,"")},t.prototype._handleModalClose=function(t){var e=this;t.result.then((function(t){if(t&&t.device)if(t.isEdit){var n=e.devices.find((function(e){return e.id===t.device.id}));Object.assign(n,t.device),e.filterDevices(),e.toastyService.success('Device "'+t.device.name+'" successfully edited.')}else e.devices.push(t.device),e.filterDevices(),e.toastyService.success('Device "'+t.device.name+'" successfully added.')}),(function(t){t&&e.toastyService.error(t.message)}))},t=a.a([Object(i.Component)({selector:"devices-component",template:n(574),styles:[n(211)],encapsulation:i.ViewEncapsulation.None,providers:[P]}),a.c("design:paramtypes",[P,c.b,u.c,u.a])],t)})(),R=(function(){return function(){}})(),L=(function(){function t(){this.body=[],this.read_by=[]}return a.a([Object(y.Type)((function(){return R})),a.c("design:type",Array)],t.prototype,"body",void 0),t})(),F=(function(){return function(){}})(),H=n(25),q=(function(){function t(t){this.authHttp=t}return t.prototype.listMessages=function(){return this.authHttp.get("/api/messages").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(F,t)})).catch(this.handleError)},t.prototype.getMessage=function(t){return this.authHttp.get("/api/messages/"+t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(L,t)})).catch(this.handleError)},t.prototype.performActionOnMessages=function(t,e){return Array.isArray(t)||(t=[t]),this.authHttp.put("/api/messages",{ids:t,action:e}).toPromise().then((function(){return null})).catch(this.handleError)},t.prototype.respondToMessage=function(t,e){var n=new H.a;n.name="action",n.value=e;var o={execution_ids:[t],data_in:e,arguments:[n]};return this.authHttp.put("/api/triggers/send_data",o).toPromise().then(this.extractData).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof r.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=a.a([Object(i.Injectable)(),a.c("design:paramtypes",[f.JwtHttp])],t)})(),U=(function(){function t(t,e,n,o,a){this.messagesService=t,this.activeModal=e,this.toastyService=n,this.toastyConfig=o,this.utils=a}return t.prototype.ngOnInit=function(){this.toastyConfig.theme="bootstrap"},t.prototype.performMessageAction=function(t){var e=this;this.messagesService.respondToMessage(this.message.workflow_execution_id,t).then((function(){e.message.awaiting_response=!1,e.message.responded_at=e.utils.getCurrentIsoString(),e.toastyService.success('Successfully performed "'+t+'" on message.')})).catch((function(n){return e.toastyService.error("Error performing "+t+" on message: "+n.message)}))},t.prototype.dismiss=function(){this.activeModal.dismiss()},a.a([Object(i.Input)(),a.c("design:type",L)],t.prototype,"message",void 0),t=a.a([Object(i.Component)({selector:"messages-modal",template:n(573),styles:[n(210)],providers:[q,M.a]}),a.c("design:paramtypes",[q,c.a,u.c,u.a,M.a])],t)})(),z=(function(){function t(t,e,n,o,a){this.messagesService=t,this.modalService=e,this.toastyService=n,this.toastyConfig=o,this.utils=a,this.messages=[],this.displayMessages=[],this.filterQuery=new l.FormControl,this.selectMapping={},this.messageRelativeTimes={}}return t.prototype.ngOnInit=function(){var t=this;this.toastyConfig.theme="bootstrap",this.listMessages(),this.filterQuery.valueChanges.debounceTime(500).subscribe((function(e){return t.filterMessages()}))},t.prototype.filterMessages=function(){var t=this,e=this.filterQuery.value?this.filterQuery.value.toLocaleLowerCase():"";this.displayMessages=this.messages.filter((function(n){return t.messageRelativeTimes[n.id]=t.utils.getRelativeLocalTime(n.created_at),n.subject.toLocaleLowerCase().includes(e)}))},t.prototype.listMessages=function(){var t=this;this.messagesService.listMessages().then((function(e){t.messages=e,t.filterMessages()})).catch((function(e){return t.toastyService.error("Error retrieving messages: "+e.message)}))},t.prototype.openMessage=function(t,e){var n=this;t.preventDefault(),this.messagesService.getMessage(e.id).then((function(t){e.is_read=!0,e.last_read_at=n.utils.getCurrentIsoString();var o=n.modalService.open(U);o.componentInstance.message=n.utils.cloneDeep(t),n._handleModalClose(o)})).catch((function(t){return n.toastyService.error("Error opening message: "+t.message)}))},t.prototype.deleteSelected=function(){var t=this,e=this._getSelectedIds();confirm("Are you sure you want to delete "+e.length+" messages?")&&this.messagesService.performActionOnMessages(e,"delete").then((function(){t.messages=t.messages.filter((function(t){return-1===e.indexOf(t.id)})),e.forEach((function(e){t.selectMapping[e]=!1})),t.filterMessages()})).catch((function(e){return t.toastyService.error("Error deleting messages: "+e.message)}))},t.prototype.markSelectedAsRead=function(){var t=this,e=this._getSelectedIds();this.messagesService.performActionOnMessages(e,"read").then((function(){t.messages.forEach((function(n){-1!==e.indexOf(n.id)&&(n.is_read=!0,n.last_read_at=t.utils.getCurrentIsoString())}))})).catch((function(e){return t.toastyService.error("Error marking messages as read: "+e.message)}))},t.prototype.markSelectedAsUnread=function(){var t=this,e=this._getSelectedIds();this.messagesService.performActionOnMessages(e,"unread").then((function(){t.messages.forEach((function(t){-1!==e.indexOf(t.id)&&(t.is_read=!1,t.last_read_at=null)}))})).catch((function(e){return t.toastyService.error("Error marking messages as unread: "+e.message)}))},t.prototype._getSelectedIds=function(){var t=this,e=[];return Object.keys(this.selectMapping).forEach((function(n){t.selectMapping[n]&&e.push(+n)})),e},t.prototype._handleModalClose=function(t){var e=this;t.result.then((function(t){return null}),(function(t){t&&e.toastyService.error(t.message)}))},t=a.a([Object(i.Component)({selector:"messages-component",template:n(570),styles:[n(210)],providers:[q,M.a]}),a.c("design:paramtypes",[q,c.b,u.c,u.a,M.a])],t)})(),G=(function(){return function(){this.events=[]}})(),B=(function(){function t(){this.subscriptions=[]}return a.a([Object(y.Type)((function(){return G})),a.c("design:type",Array)],t.prototype,"subscriptions",void 0),t})(),V=(function(){function t(){}return a.a([Object(y.Type)((function(){return B})),a.c("design:type",Array)],t.prototype,"cases",void 0),t})(),J=(function(){return function(){this.events=[]}})(),Q=(function(){function t(t){this.authHttp=t}return t.prototype.getCases=function(){return this.authHttp.get("/api/cases").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(B,t)})).catch(this.handleError)},t.prototype.getEventsForCase=function(t){return this.authHttp.get("/api/cases/"+t+"/events").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(V,t)})).catch(this.handleError)},t.prototype.addCase=function(t){return this.authHttp.post("/api/cases",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(B,t)})).catch(this.handleError)},t.prototype.editCase=function(t){return this.authHttp.put("/api/cases",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(B,t)})).catch(this.handleError)},t.prototype.deleteCase=function(t){return this.authHttp.delete("/api/cases/"+t).toPromise().then((function(){return null})).catch(this.handleError)},t.prototype.getAvailableSubscriptions=function(){return this.authHttp.get("/api/availablesubscriptions").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(J,t)})).catch(this.handleError)},t.prototype.getPlaybooks=function(){return this.authHttp.get("/api/playbooks?full=true").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(x.a,t)})).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof r.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=a.a([Object(i.Injectable)(),a.c("design:paramtypes",[f.JwtHttp])],t)})(),$=n(76),Y=(function(){return function(){this.children=[]}})(),K=(function(){function t(t,e,n,o){this.casesService=t,this.activeModal=e,this.toastyService=n,this.toastyConfig=o,this.availableSubscriptions=[],this.workingEvents=[],this.selectedNode={name:"",id:"",type:""},this.i=0}return t.prototype.ngOnInit=function(){var t=this;this.toastyConfig.theme="bootstrap",this.existingSubscriptionIds=this.workingCase.subscriptions.map((function(t){return t.id}));var e=20,n=90,o=30,a=90,i=1350-a-n,r=500-e-o;this.svg=$.b("svg#caseSubscriptionsTree").attr("width",i+n+a).attr("height",r+e+o).append("g").attr("transform","translate("+a+","+e+")"),this.treemap=$.d().size([r,i]),this.root=$.a(this.subscriptionTree),this.root.x0=r/2,this.root.y0=0,this.existingSubscriptionIds.indexOf("controller")>=0&&(this.root.data._included=!0),this.root.children&&this.root.children.length&&this.root.children.forEach((function(e){return t.checkInclusionAndCheckChildrenForExpansion(e)})),this.update(this.root)},t.prototype.update=function(t){var e=this,n=this.treemap(this.root),o=n.descendants(),a=n.descendants().slice(1);o.forEach((function(t){return t.y=180*t.depth}));var i=this.svg.selectAll("g.node").data(o,(function(t){return t.id||(t.id=++e.i)})),r=i.enter().append("g").classed("node",!0).classed("included",(function(t){return t.data._included})).attr("transform",(function(e){return"translate("+t.y0+","+t.x0+")"})).attr("id",(function(t){return"id-"+t.data.id})).on("click",(function(t){return e.click(t)})).on("dblclick",(function(t){return e.dblclick(t)}));r.append("circle").classed("node",!0).attr("r",1e-6).style("fill",(function(t){return t._children?"lightsteelblue":"#fff"})),r.append("text").attr("dy",".35em").attr("x",(function(t){return t.children||t._children?-13:13})).attr("text-anchor",(function(t){return t.children||t._children?"end":"start"})).text((function(t){return t.data.name}));var s=r.merge(i);s.transition().duration(400).attr("transform",(function(t){return"translate("+t.y+","+t.x+")"})),s.select("circle.node").attr("r",10).style("fill",(function(t){return t._children?"lightsteelblue":"#fff"}));var l=i.exit().transition().duration(400).attr("transform",(function(e){return"translate("+t.y+","+t.x+")"})).remove();l.select("circle").attr("r",1e-6),l.select("text").style("fill-opacity",1e-6);var c=this.svg.selectAll("path.link").data(a,(function(t){return t.id}));c.enter().insert("path","g").classed("link",!0).attr("d",(function(n){var o={x:t.x0,y:t.y0};return e.diagonal(o,o)})).merge(c).transition().duration(400).attr("d",(function(t){return e.diagonal(t,t.parent)})),c.exit().transition().duration(400).attr("d",(function(n){var o={x:t.x,y:t.y};return e.diagonal(o,o)})).remove(),o.forEach((function(t){t.x0=t.x,t.y0=t.y}))},t.prototype.checkInclusionAndCheckChildrenForExpansion=function(t){var e=this;this.existingSubscriptionIds.indexOf(t.data.id)>=0&&(t.data._included=!0);var n=!1;return t.children&&t.children.forEach((function(t){n=e.checkInclusionAndCheckChildrenForExpansion(t)||n})),!n&&t.children&&(t._children=t.children,t.children=null),t.data._included},t.prototype.diagonal=function(t,e){return"M "+t.y+" "+t.x+"\n\t\t\tC "+(t.y+e.y)/2+" "+t.x+",\n\t\t\t"+(t.y+e.y)/2+" "+e.x+",\n\t\t\t"+e.y+" "+e.x},t.prototype.click=function(t){var e=this;if(t.data.type){this.selectedNode={name:t.data.name,id:t.data.id,type:t.data.type};var n=this.availableSubscriptions.find((function(e){return e.type===t.data.type})).events,o=this.workingCase.subscriptions.find((function(e){return e.id===t.data.id})),a=o?o.events:[];this.workingEvents=[],n.forEach((function(t){e.workingEvents.push({name:t,isChecked:a.indexOf(t)>-1})})),$.c("g.node.highlighted").classed("highlighted",!1),$.b("g.node#id-"+this.selectedNode.id).classed("highlighted",!0)}},t.prototype.dblclick=function(t){t.children?(t._children=t.children,t.children=null):(t.children=t._children,t._children=null),this.update(t)},t.prototype.handleEventSelectionChange=function(t,e){var n=this;if(this.selectedNode.name){t.isChecked=e;var o=this.workingCase.subscriptions.find((function(t){return t.id===n.selectedNode.id}));if(o||((o=new G).id=this.selectedNode.id,this.workingCase.subscriptions.push(o),$.b("svg#caseSubscriptionsTree").select("g.node#id-"+this.selectedNode.id).classed("included",!0).datum((function(t){return t.data._included=!0,t}))),o.events=this.workingEvents.filter((function(t){return t.isChecked})).map((function(t){return t.name})),!o.events.length){var a=this.workingCase.subscriptions.indexOf(o);this.workingCase.subscriptions.splice(a,1),$.b("svg#caseSubscriptionsTree").select("g.node#id-"+this.selectedNode.id).classed("included",!1).datum((function(t){return t.data._included=!1,t}))}}else console.error("Attempted to select events without a node selected.")},t.prototype.submit=function(){var t=this,e=this.validate();e?this.toastyService.error(e):this.workingCase.id?this.casesService.editCase(this.workingCase).then((function(e){return t.activeModal.close({case:e,isEdit:!0})})).catch((function(e){return t.toastyService.error(e.message)})):this.casesService.addCase(this.workingCase).then((function(e){return t.activeModal.close({case:e,isEdit:!1})})).catch((function(e){return t.toastyService.error(e.message)}))},t.prototype.validate=function(){return""},a.a([Object(i.Input)(),a.c("design:type",B)],t.prototype,"workingCase",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"title",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"submitText",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"availableSubscriptions",void 0),a.a([Object(i.Input)(),a.c("design:type",Y)],t.prototype,"subscriptionTree",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"workingEvents",void 0),t=a.a([Object(i.Component)({encapsulation:i.ViewEncapsulation.None,selector:"case-modal",template:n(569),styles:[n(568)],providers:[Q]}),a.c("design:paramtypes",[Q,c.a,u.c,u.a])],t)})(),X=(function(){function t(t,e,n,o,a){this.casesService=t,this.modalService=e,this.toastyService=n,this.toastyConfig=o,this.utils=a,this.cases=[],this.availableCases=[],this.availableSubscriptions=[],this.caseEvents=[],this.displayCases=[],this.displayCaseEvents=[],this.eventFilterQuery=new l.FormControl,this.caseFilterQuery=new l.FormControl,this.caseHierarchy={subscriptionType:"playbook",arrayPropertyName:"playbooks",children:[{subscriptionType:"workflow",arrayPropertyName:"workflows",children:[{subscriptionType:"action",arrayPropertyName:"actions",children:[{subscriptionType:"conditional_expression",arrayPropertyName:"trigger",prefix:"Trigger: ",recursivePropertyName:"child_expressions",children:[{subscriptionType:"condition",arrayPropertyName:"conditions",prefix:"Condition: ",children:[{subscriptionType:"transform",arrayPropertyName:"transforms",prefix:"Transform: ",children:[]}]}]},{subscriptionType:"branch",arrayPropertyName:"branches",prefix:"Branch: ",children:[{subscriptionType:"conditional_expression",arrayPropertyName:"condition",prefix:"Condition: ",recursivePropertyName:"child_expressions",children:[{subscriptionType:"condition",arrayPropertyName:"conditions",prefix:"Condition: ",children:[{subscriptionType:"transform",arrayPropertyName:"transforms",prefix:"Transform: ",children:[]}]}]}]}]}]}]}}return t.prototype.ngOnInit=function(){var t=this;this.toastyConfig.theme="bootstrap",this.caseSelectConfig={width:"100%",placeholder:"Select a Case to view its Events"},this.getCases(),this.getAvailableSubscriptions(),this.getPlaybooks(),this.eventFilterQuery.valueChanges.debounceTime(500).subscribe((function(e){return t.filterEvents()})),this.caseFilterQuery.valueChanges.debounceTime(500).subscribe((function(e){return t.filterCases()}))},t.prototype.caseSelectChange=function(t){t.value&&""!==t.value&&this.getCaseEvents(t.value)},t.prototype.filterEvents=function(){var t=this.eventFilterQuery.value?this.eventFilterQuery.value.toLocaleLowerCase():"";this.displayCaseEvents=this.caseEvents.filter((function(e){return e.type.toLocaleLowerCase().includes(t)||e.message.includes(t)}))},t.prototype.filterCases=function(){var t=this.caseFilterQuery.value?this.caseFilterQuery.value.toLocaleLowerCase():"";this.displayCases=this.cases.filter((function(e){return e.name.toLocaleLowerCase().includes(t)||e.note.includes(t)}))},t.prototype.getCases=function(){var t=this;this.casesService.getCases().then((function(e){t.displayCases=t.cases=e,t.availableCases=[{id:"",text:""}].concat(e.map((function(t){return{id:t.id.toString(),text:t.name}})))})).catch((function(e){return t.toastyService.error("Error retrieving cases: "+e.message)}))},t.prototype.getCaseEvents=function(t){var e=this;this.casesService.getEventsForCase(+t).then((function(t){e.displayCaseEvents=e.caseEvents=t,e.filterEvents()})).catch((function(t){return e.toastyService.error("Error retrieving events: "+t.message)}))},t.prototype.addCase=function(){var t=this.modalService.open(K,{windowClass:"casesModal"});t.componentInstance.title="Add New Case",t.componentInstance.submitText="Add Case",t.componentInstance.workingCase=new B,t.componentInstance.availableSubscriptions=this.availableSubscriptions,t.componentInstance.subscriptionTree=this.utils.cloneDeep(this.subscriptionTree),this._handleModalClose(t)},t.prototype.editCase=function(t){var e=this.modalService.open(K,{windowClass:"casesModal"});e.componentInstance.title="Edit Case: "+t.name,e.componentInstance.submitText="Save Changes",e.componentInstance.workingCase=this.utils.cloneDeep(t),delete e.componentInstance.workingCase.$$index,e.componentInstance.availableSubscriptions=this.availableSubscriptions,e.componentInstance.subscriptionTree=this.utils.cloneDeep(this.subscriptionTree),this._handleModalClose(e)},t.prototype.deleteCase=function(t){var e=this;confirm('Are you sure you want to delete the case "'+t.name+'"? This will also delete any associated events.')&&this.casesService.deleteCase(t.id).then((function(){e.cases=e.cases.filter((function(e){return e.id!==t.id})),e.filterCases(),e.toastyService.success('Case "'+t.name+'" successfully deleted.')})).catch((function(t){return e.toastyService.error(t.message)}))},t.prototype.getAvailableSubscriptions=function(){var t=this;this.casesService.getAvailableSubscriptions().then((function(e){return t.availableSubscriptions=e})).catch((function(e){return t.toastyService.error("Error retrieving case subscriptions: "+e.message)}))},t.prototype.getPlaybooks=function(){var t=this;this.casesService.getPlaybooks().then((function(e){return t.subscriptionTree=t.convertPlaybooksToSubscriptionTree(e)})).catch((function(e){return t.toastyService.error("Error retrieving subscription tree: "+e.message)}))},t.prototype.convertPlaybooksToSubscriptionTree=function(t){var e=this,n={name:"Controller",id:"controller",type:"controller",children:[]};return t.forEach((function(t){t.workflows.forEach((function(t){t.actions.forEach((function(t){t.branches=[],t.trigger&&(t.trigger=[t.trigger])})),t.branches.forEach((function(e){var n=t.actions.find((function(t){return t.id===e.destination_id}));n&&(e.name=n.name),t.actions.find((function(t){return t.id===e.source_id})).branches.push(e),e.condition&&(e.condition=[e.condition])}))}))})),t.forEach((function(t){n.children.push(e.getNodeRecursive(t,e.caseHierarchy))})),n},t.prototype.getNodeRecursive=function(t,e){var n=this,o="";e.prefix&&(o=e.prefix),t.name?o+=t.name:t.action_name?o+=t.action_name:t.operator?o+=t.operator:o="(name unknown)";var a={name:o,id:t.id?t.id:"",type:e.subscriptionType,children:[]};return e.recursivePropertyName&&Array.isArray(t[e.recursivePropertyName])&&t[e.recursivePropertyName].forEach((function(t){a.children.push(n.getNodeRecursive(t,e))})),e.children.forEach((function(e){Array.isArray(t[e.arrayPropertyName])&&t[e.arrayPropertyName].forEach((function(t){a.children.push(n.getNodeRecursive(t,e))}))})),a.children.length||delete a.children,a},t.prototype.getFriendlyArray=function(t){return t.join(", ")},t.prototype.getFriendlyObject=function(t){var e=JSON.stringify(t,null,1);return e=e.substr(1,e.length-2).replace(/"/g,"")},t.prototype._handleModalClose=function(t){var e=this;t.result.then((function(t){if(t&&t.case)if(t.isEdit){var n=e.cases.find((function(e){return e.id===t.case.id}));Object.assign(n,t.case),e.filterCases(),e.toastyService.success('Case "'+t.case.name+'" successfully edited.')}else e.cases.push(t.case),e.filterCases(),e.toastyService.success('Case "'+t.case.name+'" successfully added.')}),(function(t){t&&e.toastyService.error(t.message)}))},t=a.a([Object(i.Component)({selector:"cases-component",template:n(565),encapsulation:i.ViewEncapsulation.None,styles:[n(564)],providers:[Q,M.a]}),a.c("design:paramtypes",[Q,c.b,u.c,u.a,M.a])],t)})(),Z=n(150),tt=(function(){function t(){this.type="disk"}return t.getDefault=function(){return{type:"disk",directory:"./data/cache",shards:8,timeout:.01,retry:!0}},t})(),et=(function(){function t(){this.cache=new tt}return t.getDefaultConfiguration=function(){return{db_path:"./data/walkoff.db",walkoff_db_type:"sqlite",case_db_path:"./data/events.db",case_db_type:"sqlite",clear_case_db_on_startup:!1,host:"127.0.0.1",port:5e3,access_token_duration:15,refresh_token_duration:30,zmq_results_address:"tcp://127.0.0.1:5556",zmq_communication_address:"tcp://127.0.0.1:5557",number_processes:4,number_threads_per_process:3,cache:tt.getDefault()}},t})(),nt=n(74),ot=n(49),at=(function(){return function(){this.actions=[]}})(),it=(function(){function t(t){this.authHttp=t}return t.prototype.getConfiguration=function(){return this.authHttp.get("/api/configuration").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(et,t)})).catch(this.handleError)},t.prototype.updateConfiguration=function(t){return this.authHttp.put("/api/configuration",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(et,t)})).catch(this.handleError)},t.prototype.getUsers=function(){return this.authHttp.get("/api/users").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(nt.a,t)})).catch(this.handleError)},t.prototype.addUser=function(t){return this.authHttp.post("/api/users",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(nt.a,t)})).catch(this.handleError)},t.prototype.editUser=function(t){return this.authHttp.put("/api/users",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(nt.a,t)})).catch(this.handleError)},t.prototype.deleteUser=function(t){return this.authHttp.delete("/api/users/"+t).toPromise().then((function(){return null})).catch(this.handleError)},t.prototype.getRoles=function(){return this.authHttp.get("/api/roles").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(ot.a,t)})).catch(this.handleError)},t.prototype.addRole=function(t){return this.authHttp.post("/api/roles",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(ot.a,t)})).catch(this.handleError)},t.prototype.editRole=function(t){return this.authHttp.put("/api/roles",t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(ot.a,t)})).catch(this.handleError)},t.prototype.deleteRole=function(t){return this.authHttp.delete("/api/roles/"+t).toPromise().then((function(){return null})).catch(this.handleError)},t.prototype.getAvailableResourceActions=function(){return this.authHttp.get("/api/availableresourceactions").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(at,t)})).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof r.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=a.a([Object(i.Injectable)(),a.c("design:paramtypes",[f.JwtHttp])],t)})(),rt=n(96),st=(function(){function t(t,e,n,o){this.settingsService=t,this.activeModal=e,this.toastyService=n,this.toastyConfig=o,this.toastyConfig.theme="bootstrap"}return t.prototype.ngOnInit=function(){this.roleSelectData=this.roles.map((function(t){return{id:t.id.toString(),text:t.name}})),this.roleSelectConfig={width:"100%",placeholder:"Select role(s)",multiple:!0,allowClear:!0,closeOnSelect:!1},this.workingUser.role_ids||(this.workingUser.role_ids=[]),this.roleSelectInitialValue=JSON.parse(JSON.stringify(this.workingUser.role_ids))},t.prototype.roleSelectChange=function(t){this.workingUser.role_ids=t.value.map((function(t){return+t}))},t.prototype.submit=function(){var t=this,e=this.validate();if(e)this.toastyService.error(e);else{var n=this.workingUser.toSave();n.id?this.settingsService.editUser(n).then((function(e){return t.activeModal.close({user:e,isEdit:!0})})).catch((function(e){return t.toastyService.error(e.message)})):this.settingsService.addUser(n).then((function(e){return t.activeModal.close({user:e,isEdit:!1})})).catch((function(e){return t.toastyService.error(e.message)}))}},t.prototype.validate=function(){return this.workingUser?this.workingUser.id||this.workingUser.newPassword?this.workingUser.confirmNewPassword!==this.workingUser.newPassword?"Passwords do not match.":"":"You must specify a password.":"User is not specified."},a.a([Object(i.Input)(),a.c("design:type",rt.a)],t.prototype,"workingUser",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"title",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"submitText",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"roles",void 0),t=a.a([Object(i.Component)({selector:"user-modal",template:n(557),styles:[n(122)],providers:[it]}),a.c("design:paramtypes",[it,c.a,u.c,u.a])],t)})(),lt=(function(){function t(t,e,n,o){var a=this;this.settingsService=t,this.modalService=e,this.toastyService=n,this.toastyConfig=o,this.configuration=new et,this.cacheTypes=["disk","redis"],this.dbTypes=["sqlite","mysql","postgresql","oracle","mssql"],this.tlsVersions=["1.1","1.2","1.3"],this.users=[],this.displayUsers=[],this.filterQuery=new l.FormControl,this.roles=[],this.toastyConfig.theme="bootstrap",this.getConfiguration(),this.getUsers(),this.getRoles(),this.filterQuery.valueChanges.debounceTime(500).subscribe((function(t){return a.filterUsers()}))}return t.prototype.filterUsers=function(){var t=this.filterQuery.value?this.filterQuery.value.toLocaleLowerCase():"";this.displayUsers=this.users.filter((function(e){return e.username.toLocaleLowerCase().includes(t)}))},t.prototype.getConfiguration=function(){var t=this;this.settingsService.getConfiguration().then((function(e){Object.assign(t.configuration,e),t.configuration.cache||(t.configuration.cache=new tt)})).catch((function(e){return t.toastyService.error(e.message)}))},t.prototype.updateConfiguration=function(){var t=this;this.settingsService.updateConfiguration(this.configuration).then((function(e){Object.assign(t.configuration,e),t.configuration.cache||(t.configuration.cache=new tt),t.toastyService.success("Configuration successfully updated.")})).catch((function(e){return t.toastyService.error(e.message)}))},t.prototype.resetConfiguration=function(){confirm("Are you sure you want to reset the configuration? \t\t\tNote that you'll have to save the configuration after reset to update it on the server.")&&Object.assign(this.configuration,et.getDefaultConfiguration())},t.prototype.getRoles=function(){var t=this;this.settingsService.getRoles().then((function(e){return t.roles=e})).catch((function(e){return t.toastyService.error("Error retrieving roles: "+e.message)}))},t.prototype.getUsers=function(){var t=this;this.settingsService.getUsers().then((function(e){return t.displayUsers=t.users=e})).catch((function(e){return t.toastyService.error("Error retrieving users: "+e.message)}))},t.prototype.addUser=function(){var t=this.modalService.open(st);t.componentInstance.title="Add New User",t.componentInstance.submitText="Add User",t.componentInstance.roles=this.roles;var e=new rt.a;e.active=!0,t.componentInstance.workingUser=e,this._handleModalClose(t)},t.prototype.editUser=function(t){var e=this.modalService.open(st);e.componentInstance.title="Edit User: "+t.username,e.componentInstance.submitText="Save Changes",e.componentInstance.roles=this.roles,e.componentInstance.workingUser=t.toWorkingUser(),this._handleModalClose(e)},t.prototype.deleteUser=function(t){var e=this;confirm('Are you sure you want to delete the user "'+t.username+'"?')&&this.settingsService.deleteUser(t.id).then((function(){e.users=e.users.filter((function(e){return e.id!==t.id})),e.filterUsers(),e.toastyService.success('User "'+t.username+'" successfully deleted.')})).catch((function(t){return e.toastyService.error(t.message)}))},t.prototype.getFriendlyRoles=function(t){return t.map((function(t){return t.name})).join(", ")},t.prototype.getFriendlyBool=function(t){return t?"Yes":"No"},t.prototype._handleModalClose=function(t){var e=this;t.result.then((function(t){if(t&&t.user)if(t.isEdit){var n=e.users.find((function(e){return e.id===t.user.id}));Object.assign(n,t.user),e.filterUsers(),e.toastyService.success('User "'+t.user.username+'" successfully edited.')}else e.users.push(t.user),e.filterUsers(),e.toastyService.success('User "'+t.user.username+'" successfully added.')}),(function(t){t&&e.toastyService.error(t.message)}))},t=a.a([Object(i.Component)({selector:"settings-component",template:n(554),styles:[n(122)],providers:[it]}),a.c("design:paramtypes",[it,c.b,u.c,u.a])],t)})(),ct=n(50),dt=(function(){function t(t,e,n,o){this.route=t,this.authService=e,this.toastyService=n,this.toastyConfig=o}return t.prototype.ngOnInit=function(){var t=this;this.toastyConfig.theme="bootstrap",this.paramsSub=this.route.params.subscribe((function(e){t.interfaceName=e.interfaceName,t.getInterface()}))},t.prototype.getInterface=function(){var t=this;this.authService.getAccessTokenRefreshed().then((function(e){var n=new XMLHttpRequest;n.open("GET","custominterfaces/"+t.interfaceName+"/",!0),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&(t.main.nativeElement.removeChild(t.main.nativeElement.lastChild),t.activeIFrame=document.createElement("iframe"),t.activeIFrame.srcdoc=n.responseText,t.activeIFrame.src="data:text/html;charset=utf-8,"+n.responseText,t.main.nativeElement.appendChild(t.activeIFrame))},n.setRequestHeader("Authorization","Bearer "+e),n.send()})).catch((function(e){return t.toastyService.error("Error retrieving interface: "+e.message)}))},a.a([Object(i.ViewChild)("interfacesMain"),a.c("design:type",i.ElementRef)],t.prototype,"main",void 0),t=a.a([Object(i.Component)({selector:"interfaces-component",template:n(553),styles:[n(552)],encapsulation:i.ViewEncapsulation.None,providers:[ct.a]}),a.c("design:paramtypes",[g.a,ct.a,u.c,u.a])],t)})(),ut=n(149),pt=[{path:"",redirectTo:"/playbook",pathMatch:"full"},{path:"playbook",component:v.a},{path:"scheduler",component:j},{path:"devices",component:W},{path:"messages",component:z},{path:"cases",component:X},{path:"metrics",component:Z.a},{path:"settings",component:lt},{path:"execution",component:ut.a},{path:"interfaces/:interfaceName",component:dt}],ft=(function(){function t(){}return t=a.a([Object(i.NgModule)({imports:[g.b.forRoot(pt)],exports:[g.b]})],t)})(),ht=n(64);function mt(t,e){var n={endPoint:"/api/auth/refresh",beforeSeconds:300,tokenName:"refresh_token",refreshTokenGetter:function(){var t=sessionStorage.getItem("refresh_token");if(t&&Object(ht.tokenNotExpired)(null,t))return t;location.href="/login"},tokenSetter:function(t){return(t=t.json()).access_token?(sessionStorage.setItem("access_token",t.access_token),!0):(sessionStorage.removeItem("access_token"),sessionStorage.removeItem("refresh_token"),location.href="/login",!1)}},o=new ht.AuthConfig({noJwtError:!0,tokenName:"access_token",tokenGetter:function(){return sessionStorage.getItem("access_token")}});return new f.JwtHttp(new f.JwtConfigService(n,o),t,e)}var gt=(function(){function t(t){this.authHttp=t}return t.prototype.getInterfaceNames=function(){return this.authHttp.get("/api/interfaces").toPromise().then(this.extractData).catch(this.handleError)},t.prototype.getInitialNotifications=function(){return this.authHttp.get("/api/notifications").toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(F,t)})).catch(this.handleError)},t.prototype.getMessage=function(t){return this.authHttp.get("/api/messages/"+t).toPromise().then(this.extractData).then((function(t){return Object(y.plainToClass)(L,t)})).catch(this.handleError)},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof r.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=a.a([Object(i.Injectable)(),a.c("design:paramtypes",[f.JwtHttp])],t)})(),vt=(function(){return function(){}})(),bt=(function(){function t(t,e,n,o,a,i){this.mainService=t,this.authService=e,this.modalService=n,this.toastyService=o,this.toastyConfig=a,this.utils=i,this.interfaceNames=[],this.jwtHelper=new ht.JwtHelper,this.messageListings=[],this.newMessagesCount=0,this.notificationRelativeTimes={}}return t.prototype.ngOnInit=function(){this.toastyConfig.theme="bootstrap",this.currentUser=this.authService.getAndDecodeAccessToken().user_claims.username,this.getInterfaceNames(),this.getInitialNotifications(),this.getNotificationsSSE()},t.prototype.ngOnDestroy=function(){this.eventSource&&this.eventSource.close&&this.eventSource.close()},t.prototype.getInterfaceNames=function(){var t=this;this.mainService.getInterfaceNames().then((function(e){return t.interfaceNames=e})).catch((function(e){return t.toastyService.error("Error retrieving interfaces: "+e.message)}))},t.prototype.getInitialNotifications=function(){var t=this;this.mainService.getInitialNotifications().then((function(e){t.messageListings=e.concat(t.messageListings),t._recalculateNewMessagesCount()})).catch((function(e){return t.toastyService.error("Error retrieving notifications: "+e.message)}))},t.prototype.getNotificationsSSE=function(){var t=this;this.authService.getAccessTokenRefreshed().then((function(e){t.eventSource=new window.EventSource("/api/streams/messages/notifications?access_token="+e),t.eventSource.addEventListener("created",(function(e){var n=Object(y.plainToClass)(F,JSON.parse(e.data)),o=t.messageListings.find((function(t){return t.id===n.id})),a=t.messageListings.indexOf(o);a>-1?t.messageListings[a]=n:t.messageListings.unshift(n),(t.messageListings.filter((function(t){return t.is_read})).length>5||t.messageListings.length>20)&&t.messageListings.pop(),t._recalculateNewMessagesCount(),t.recalculateRelativeTimes()})),t.eventSource.addEventListener("responded",(function(e){var n=Object(y.plainToClass)(vt,JSON.parse(e.data)),o=t.messageListings.find((function(t){return t.id===n.id}));o&&(o.awaiting_response=!1)})),t.eventSource.addEventListener("error",(function(t){console.error(t)}))}))},t.prototype.logout=function(){this.authService.logout().then((function(){return location.href="/login"})).catch((function(t){return console.error(t)}))},t.prototype.openMessage=function(t,e){var n=this;t.preventDefault(),this.mainService.getMessage(e.id).then((function(t){e.is_read=!0,e.last_read_at=n.utils.getCurrentIsoString(),n._recalculateNewMessagesCount(),n.messageModalRef=n.modalService.open(U),n.messageModalRef.componentInstance.message=n.utils.cloneDeep(t),n._handleModalClose(n.messageModalRef)})).catch((function(t){return n.toastyService.error("Error opening message: "+t.message)}))},t.prototype.recalculateRelativeTimes=function(){var t=this;this.messageListings.forEach((function(e){t.notificationRelativeTimes[e.id]=t.utils.getRelativeLocalTime(e.created_at)}))},t.prototype._recalculateNewMessagesCount=function(){this.newMessagesCount=this.messageListings.filter((function(t){return!t.is_read})).length},t.prototype._handleModalClose=function(t){var e=this;t.result.then((function(t){return null}),(function(t){t&&e.toastyService.error(t.message)}))},t=a.a([Object(i.Component)({selector:"main-component",template:n(545),styles:[n(544)],providers:[gt,ct.a,M.a]}),a.c("design:paramtypes",[gt,ct.a,c.b,u.c,u.a,M.a])],t)})(),yt=(function(){function t(t,e,n,o,a){this.settingsService=t,this.activeModal=e,this.toastyService=n,this.toastyConfig=o,this.utils=a,this.resourceNames=[],this.selectPermissionMapping={},this.newResourceTempIdTracker=-1,this.toastyConfig.theme="bootstrap",this.permissionSelectConfig={width:"100%",placeholder:"Select permission(s) for this resource",multiple:!0,allowClear:!0,closeOnSelect:!1}}return t.prototype.ngOnInit=function(){var t=this;this.availableResourceActions.forEach((function(e){var n=e.name;e.app_name&&(n+=" - "+e.app_name),t.resourceNames.push(n)})),this.workingRole.resources.forEach((function(e){var n=t.availableResourceActions.find((function(t){return t.name===e.name&&t.app_name===e.app_name}));t.selectPermissionMapping[e.resource_id]=n.actions.map((function(t){return{id:t,text:t}}))}))},t.prototype.addResource=function(){var t=this,e=this.availableResourceActions.find((function(e){var n=t.selectedAvailableResourceActionName.split(" - ");return 1===n.length?e.name===n[0]:e.name===n[0]&&e.app_name===n[1]})),n={resource_id:this.newResourceTempIdTracker--,role_id:this.workingRole.id,name:e.name,permissions:[]};e.app_name&&(n.app_name=e.app_name),this.selectPermissionMapping[n.resource_id]=e.actions.map((function(t){return{id:t,text:t}})),this.workingRole.resources.push(n)},t.prototype.removeResource=function(t){this.workingRole.resources.splice(this.workingRole.resources.indexOf(t),1)},t.prototype.permissionSelectChange=function(t,e){e.permissions=t.value},t.prototype.submit=function(){var t=this,e=this.validate();if(e)this.toastyService.error(e);else{var n=this.utils.cloneDeep(this.workingRole);n.resources.forEach((function(t){t.resource_id<0&&delete t.resource_id})),n.id?this.settingsService.editRole(n).then((function(e){return t.activeModal.close({role:e,isEdit:!0})})).catch((function(e){return t.toastyService.error(e.message)})):this.settingsService.addRole(n).then((function(e){return t.activeModal.close({role:e,isEdit:!1})})).catch((function(e){return t.toastyService.error(e.message)}))}},t.prototype.validate=function(){return""},a.a([Object(i.Input)(),a.c("design:type",ot.a)],t.prototype,"workingRole",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"title",void 0),a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"submitText",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"availableResourceActions",void 0),t=a.a([Object(i.Component)({selector:"settings-role-modal",template:n(541),styles:[n(122)],providers:[it,M.a]}),a.c("design:paramtypes",[it,c.a,u.c,u.a,M.a])],t)})(),wt=n(34),kt=n(72),xt=["string","number","boolean"],St=(function(){function t(){this.valueType="static",this.propertyName="",this.availableTypes=xt,this.arrayTypes=[],this.objectTypes={}}return t.prototype.ngOnInit=function(){this.initParameterSchema(),this.initDeviceSelect(),this.initBranchCounterSelect(),this.initTypeSelector(),this.initUserSelect(),this.initRoleSelect()},t.prototype.initDeviceSelect=function(){this.isDeviceArgument&&(this.argument.name="__device__")},t.prototype.initParameterSchema=function(){if(!this.isDeviceArgument)if(this.parameterSchema=this.parameterApi.schema,null==this.argument.reference&&(this.argument.reference=""),null==this.argument.value)"array"===this.parameterSchema.type?this.argument.value=[]:"object"===this.parameterSchema.type&&(this.argument.value={});else if(this.argument.value&&"array"===this.parameterSchema.type)for(var t=0,e=this.argument.value;t<e.length;t++){var n=e[t];this.arrayTypes.push(typeof n)}else if(this.argument.value&&"object"===this.parameterSchema.type)for(var o in this.argument.value)this.argument.value.hasOwnProperty(o)&&(this.objectTypes[o]=typeof this.argument.value[o])},t.prototype.initTypeSelector=function(){var t=this;this.valueTypes=this.isDeviceArgument?[{id:"device",name:"Device"},{id:"action",name:"Action Output"}]:[{id:"static",name:"Static Value"},{id:"action",name:"Action Output"},{id:"branch",name:"Branch Counter"}],this.isDeviceArgument&&!this.argument.reference?this.valueType="device":this.argument.reference&&(this.loadedWorkflow.actions.find((function(e){return e.id==t.argument.reference}))?this.valueType="action":this.loadedWorkflow.branches.find((function(e){return e.id==t.argument.reference}))&&(this.valueType="branch")),this.selectedType=this.availableTypes[0]},t.prototype.initUserSelect=function(){this.isUserSelect&&(this.selectData=this.users.map((function(t){return{id:t.id.toString(),text:t.username}})),this.selectConfig={width:"100%",placeholder:"Select user"},this.selectInitialValue=JSON.parse(JSON.stringify(this.argument.value)),"array"===this.parameterSchema.type&&(this.selectConfig.placeholder+="(s)",this.selectConfig.multiple=!0,this.selectConfig.allowClear=!0,this.selectConfig.closeOnSelect=!1,Array.isArray(this.argument.value)&&(this.selectInitialValue=this.argument.value.map((function(t){return t.toString()})))))},t.prototype.initRoleSelect=function(){this.isRoleSelect&&(this.selectData=this.roles.map((function(t){return{id:t.id.toString(),text:t.name}})),this.selectConfig={width:"100%",placeholder:"Select role"},this.selectInitialValue=JSON.parse(JSON.stringify(this.argument.value)),"array"===this.parameterSchema.type&&(this.selectConfig.placeholder+="(s)",this.selectConfig.multiple=!0,this.selectConfig.allowClear=!0,this.selectConfig.closeOnSelect=!1,Array.isArray(this.argument.value)&&(this.selectInitialValue=this.argument.value.map((function(t){return t.toString()})))))},t.prototype.initBranchCounterSelect=function(){this.branchCounters=this.loadedWorkflow.listBranchCounters()},t.prototype.selectChange=function(t){if(this.clearReference(),"array"===this.parameterSchema.type){var e=t.value.map((function(t){return+t}));this.argument.value=e}else this.argument.value=+t.value},t.prototype.clearReference=function(){delete this.argument.reference},t.prototype.addItem=function(){switch(this.clearReference(),this.selectedType){case"string":this.argument.value.push("");break;case"number":this.argument.value.push(null);break;case"boolean":this.argument.value.push(!1);break;default:return}this.arrayTypes.push(this.selectedType)},t.prototype.moveUp=function(t){var e=t-1,n=this.argument.value[e],o=this.arrayTypes[e];this.argument.value[e]=this.argument.value[t],this.argument.value[t]=n,this.arrayTypes[e]=this.arrayTypes[t],this.arrayTypes[t]=o},t.prototype.moveDown=function(t){var e=t+1,n=this.argument.value[e],o=this.arrayTypes[e];this.argument.value[e]=this.argument.value[t],this.argument.value[t]=n,this.arrayTypes[e]=this.arrayTypes[t],this.arrayTypes[t]=o},t.prototype.removeItem=function(t){this.argument.value.splice(t,1),this.arrayTypes.splice(t,1)},t.prototype.addProperty=function(){if(this.clearReference(),!this.argument.value.hasOwnProperty(this.propertyName)){switch(this.propertyName=this.propertyName.trim(),this.selectedType){case"string":this.argument.value[this.propertyName]="";break;case"number":this.argument.value[this.propertyName]=null;break;case"boolean":this.argument.value[this.propertyName]=!1;break;default:return}this.objectTypes[this.propertyName]=this.selectedType,this.propertyName=""}},t.prototype.removeProperty=function(t){delete this.argument.value[t],delete this.objectTypes[t]},t.prototype.trackArraysBy=function(t,e){return t},t.prototype.getPreviousActions=function(){return this.loadedWorkflow.actions},t.prototype.getMin=function(t){return void 0===t.minimum?null:t.exclusiveMinimum?t.minimum+1:t.minimum},t.prototype.getMax=function(t){return void 0===t.maximum?null:t.exclusiveMaximum?t.maximum-1:t.maximum},t.prototype.isNormalArray=function(t){if("array"!==t.type)return!1;if(Array.isArray(t.items))t.items.forEach((function(t){if("user"===t.type||"role"===t.type)return!1}));else if(t.items&&("user"===t.items.type||"role"===t.items.type))return!1;return!0},Object.defineProperty(t.prototype,"isDeviceArgument",{get:function(){return this.devices&&!this.parameterApi},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isUserSelect",{get:function(){return this.parameterSchema&&("user"===this.parameterSchema.type||"array"===this.parameterSchema.type&&this.parameterSchema.items&&!Array.isArray(this.parameterSchema.items)&&"user"===this.parameterSchema.items.type)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isRoleSelect",{get:function(){return this.parameterSchema&&("role"===this.parameterSchema.type||"array"===this.parameterSchema.type&&this.parameterSchema.items&&!Array.isArray(this.parameterSchema.items)&&"role"===this.parameterSchema.items.type)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isReference",{get:function(){return-1==["static","device","branch"].indexOf(this.valueType)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStatic",{get:function(){return"static"==this.valueType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isActionSelect",{get:function(){return"action"==this.valueType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isStringSelect",{get:function(){return this.isStatic&&this.parameterSchema&&"string"===this.parameterSchema.type&&!this.parameterSchema.enum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isNumberSelect",{get:function(){return this.isStatic&&this.parameterSchema&&("number"===this.parameterSchema.type||"integer"===this.parameterSchema.type)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEnumSelect",{get:function(){return this.isStatic&&this.parameterSchema&&this.parameterSchema.enum},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBooleanSelect",{get:function(){return this.isStatic&&this.parameterSchema&&"boolean"===this.parameterSchema.type},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDeviceSelect",{get:function(){return"device"==this.valueType},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBranchCounterSelect",{get:function(){return"branch"==this.valueType},enumerable:!0,configurable:!0}),t.prototype.resetValue=function(){},a.a([Object(i.Input)(),a.c("design:type",Number)],t.prototype,"id",void 0),a.a([Object(i.Input)(),a.c("design:type",H.a)],t.prototype,"argument",void 0),a.a([Object(i.Input)(),a.c("design:type",kt.a)],t.prototype,"parameterApi",void 0),a.a([Object(i.Input)(),a.c("design:type",wt.a)],t.prototype,"loadedWorkflow",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"users",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"roles",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"devices",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"branchCounters",void 0),t=a.a([Object(i.Component)({selector:"playbook-argument-component",template:n(540),styles:[],encapsulation:i.ViewEncapsulation.None,providers:[]}),a.c("design:paramtypes",[])],t)})(),_t=n(155),Tt=(function(){function t(){}return t.prototype.ngOnInit=function(){var t=this,e=this.appApis.filter((function(t){return t.condition_apis&&t.condition_apis.length}));if(!e.find((function(e){return e.name===t.selectedAppName}))){var n=e[0];n&&(this.selectedAppName=n.name)}this.appNamesWithConditions=e.map((function(t){return t.name})),this.resetConditionSelection(this.selectedAppName)},t.prototype.resetConditionSelection=function(t){var e=this.appApis.find((function(e){return e.name===t}));e.condition_apis&&e.condition_apis.length&&(this.selectedConditionApi=e.condition_apis[0].name)},t.prototype.addCondition=function(){if(this.selectedAppName&&this.selectedConditionApi){var t=new _t.a;t.app_name=this.selectedAppName,t.action_name=this.selectedConditionApi,this.conditions.push(t)}},t.prototype.moveUp=function(t){var e=t-1,n=this.conditions[e];this.conditions[e]=this.conditions[t],this.conditions[t]=n},t.prototype.moveDown=function(t){var e=t+1,n=this.conditions[e];this.conditions[e]=this.conditions[t],this.conditions[t]=n},t.prototype.removeCondition=function(t){this.conditions.splice(t,1)},t.prototype.getConditionApi=function(t,e){var n=this.appApis.find((function(e){return e.name===t})).condition_apis.find((function(t){return t.name===e}));return n.parameters=n.parameters.filter((function(t){return t.name!==n.data_in})),n},t.prototype.getOrInitializeArgument=function(t,e){var n=t.arguments.find((function(t){return t.name===e.name}));return n||(n=this.getDefaultArgument(e),t.arguments.push(n),n)},t.prototype.getDefaultArgument=function(t){return Object(y.plainToClass)(H.a,{name:t.name,value:null!=t.schema.default?t.schema.default:null,reference:"",selection:""})},t.prototype.getConditionNamesForApp=function(){var t=this;return this.appApis.find((function(e){return e.name===t.selectedAppName})).condition_apis.map((function(t){return t.name}))},a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"selectedAppName",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"conditions",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"appApis",void 0),a.a([Object(i.Input)(),a.c("design:type",wt.a)],t.prototype,"loadedWorkflow",void 0),t=a.a([Object(i.Component)({selector:"playbook-conditions-component",template:n(539),styles:[],encapsulation:i.ViewEncapsulation.None,providers:[]}),a.c("design:paramtypes",[])],t)})(),Ct=n(154),At=(function(){function t(){}return t.prototype.ngOnInit=function(){var t=this,e=this.appApis.filter((function(t){return t.transform_apis&&t.transform_apis.length}));if(!e.find((function(e){return e.name===t.selectedAppName}))){var n=e[0];n&&(this.selectedAppName=n.name)}this.appNamesWithTransforms=e.map((function(t){return t.name})),this.resetTransformSelection(this.selectedAppName)},t.prototype.resetTransformSelection=function(t){var e=this.appApis.find((function(e){return e.name===t}));e.transform_apis&&e.transform_apis.length&&(this.selectedTransformApi=e.transform_apis[0].name)},t.prototype.addTransform=function(){if(this.selectedAppName&&this.selectedTransformApi){var t=new Ct.a;t.app_name=this.selectedAppName,t.action_name=this.selectedTransformApi,this.transforms.push(t)}},t.prototype.moveUp=function(t){var e=t-1,n=this.transforms[e];this.transforms[e]=this.transforms[t],this.transforms[t]=n},t.prototype.moveDown=function(t){var e=t+1,n=this.transforms[e];this.transforms[e]=this.transforms[t],this.transforms[t]=n},t.prototype.removeTransform=function(t){this.transforms.splice(t,1)},t.prototype.getTransformApi=function(t,e){var n=this.appApis.find((function(e){return e.name===t})).transform_apis.find((function(t){return t.name===e}));return n.parameters=n.parameters.filter((function(t){return t.name!==n.data_in})),n},t.prototype.getOrInitializeArgument=function(t,e){var n=t.arguments.find((function(t){return t.name===e.name}));return n||(n=this.getDefaultArgument(e),t.arguments.push(n),n)},t.prototype.getDefaultArgument=function(t){return Object(y.plainToClass)(H.a,{name:t.name,value:null!=t.schema.default?t.schema.default:null,reference:"",selection:""})},t.prototype.getTransformNamesForApp=function(){var t=this;return this.appApis.find((function(e){return e.name===t.selectedAppName})).transform_apis.map((function(t){return t.name}))},a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"selectedAppName",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"transforms",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"appApis",void 0),a.a([Object(i.Input)(),a.c("design:type",wt.a)],t.prototype,"loadedWorkflow",void 0),t=a.a([Object(i.Component)({selector:"playbook-transforms-component",template:n(538),styles:[],encapsulation:i.ViewEncapsulation.None,providers:[]}),a.c("design:paramtypes",[])],t)})(),Et=n(51),Mt=(function(){function t(){}return t.prototype.ngOnInit=function(){this.availableOperators=["and","or","xor"],this.conditionalExpression&&!this.conditionalExpression.operator&&(this.conditionalExpression.operator="and")},t.prototype.addChildExpression=function(){this.conditionalExpression.child_expressions.push(new Et.a)},t.prototype.moveUp=function(t){var e=t-1,n=this.conditionalExpression.child_expressions[e];this.conditionalExpression.child_expressions[e]=this.conditionalExpression.child_expressions[t],this.conditionalExpression.child_expressions[t]=n},t.prototype.moveDown=function(t){var e=t+1,n=this.conditionalExpression.child_expressions[e];this.conditionalExpression.child_expressions[e]=this.conditionalExpression.child_expressions[t],this.conditionalExpression.child_expressions[t]=n},t.prototype.removeChildExpression=function(t){this.conditionalExpression.child_expressions.splice(t,1)},a.a([Object(i.Input)(),a.c("design:type",String)],t.prototype,"selectedAppName",void 0),a.a([Object(i.Input)(),a.c("design:type",Et.a)],t.prototype,"conditionalExpression",void 0),a.a([Object(i.Input)(),a.c("design:type",Array)],t.prototype,"appApis",void 0),a.a([Object(i.Input)(),a.c("design:type",wt.a)],t.prototype,"loadedWorkflow",void 0),t=a.a([Object(i.Component)({selector:"playbook-conditional-expression-component",template:n(537),styles:[],encapsulation:i.ViewEncapsulation.None,providers:[]}),a.c("design:paramtypes",[])],t)})(),jt=(function(){function t(t,e,n,o,a){var i=this;this.settingsService=t,this.modalService=e,this.toastyService=n,this.toastyConfig=o,this.utils=a,this.availableResourceActions=[],this.roles=[],this.displayRoles=[],this.filterQuery=new l.FormControl,this.toastyConfig.theme="bootstrap",this.getAvailableResourceActions(),this.getRoles(),this.filterQuery.valueChanges.debounceTime(500).subscribe((function(t){return i.filterRoles()}))}return t.prototype.filterRoles=function(){var t=this.filterQuery.value?this.filterQuery.value.toLocaleLowerCase():"";this.displayRoles=this.roles.filter((function(e){return e.name.toLocaleLowerCase().includes(t)}))},t.prototype.getAvailableResourceActions=function(){var t=this;this.settingsService.getAvailableResourceActions().then((function(e){return t.availableResourceActions=e})).catch((function(e){return t.toastyService.error(e.message)}))},t.prototype.getRoles=function(){var t=this;this.settingsService.getRoles().then((function(e){return t.displayRoles=t.roles=e})).catch((function(e){return t.toastyService.error(e.message)}))},t.prototype.addRole=function(){var t=this.modalService.open(yt);t.componentInstance.title="Add New Role",t.componentInstance.submitText="Add Role",t.componentInstance.availableResourceActions=this.availableResourceActions,t.componentInstance.workingRole=new ot.a,this._handleModalClose(t)},t.prototype.editRole=function(t){var e=this.modalService.open(yt);e.componentInstance.title="Edit Role: "+t.name,e.componentInstance.submitText="Save Changes",e.componentInstance.availableResourceActions=this.availableResourceActions,e.componentInstance.workingRole=this.utils.cloneDeep(t),this._handleModalClose(e)},t.prototype.deleteRole=function(t){var e=this;confirm('Are you sure you want to delete the role "'+t.name+'"?')&&this.settingsService.deleteRole(t.id).then((function(){e.roles=e.roles.filter((function(e){return e.id!==t.id})),e.filterRoles(),e.toastyService.success('Role "'+t.name+'" successfully deleted.')})).catch((function(t){return e.toastyService.error(t.message)}))},t.prototype.getFriendlyPermissions=function(t){var e=t.resources.reduce((function(t,e){var n=e.name;return e.app_name&&(n+=" - "+e.app_name),t[n]=e.permissions,t}),{}),n=JSON.stringify(e,null,1);return n=n.replace(/[\{\}"]/g,"").trim()},t.prototype._handleModalClose=function(t){var e=this;t.result.then((function(t){if(t&&t.role)if(t.isEdit){var n=e.roles.find((function(e){return e.id===t.role.id}));Object.assign(n,t.role),e.filterRoles(),e.toastyService.success('Role "'+t.role.name+'" successfully edited.')}else e.roles.push(t.role),e.filterRoles(),e.toastyService.success('Role "'+t.role.name+'" successfully added.')}),(function(t){t&&e.toastyService.error(t.message)}))},t=a.a([Object(i.Component)({selector:"settings-roles-component",template:n(536),styles:[n(122)],encapsulation:i.ViewEncapsulation.None,providers:[it,M.a]}),a.c("design:paramtypes",[it,c.b,u.c,u.a,M.a])],t)})(),Ot=(function(){function t(){}return t.prototype.transform=function(t,e){var n=[];for(var o in t)t.hasOwnProperty(o)&&n.push(o);return n},t=a.a([Object(i.Pipe)({name:"keys",pure:!1})],t)})(),It=(function(){function t(){}return t=a.a([Object(i.NgModule)({imports:[s.BrowserModule,l.FormsModule,l.ReactiveFormsModule,r.HttpModule,ft,c.c.forRoot(),d.NgxDatatableModule,u.b.forRoot(),p.Select2Module,h.DateTimePickerModule,m.a.forRoot()],declarations:[bt,v.a,j,W,z,X,Z.a,lt,dt,ut.a,E,N,K,st,yt,U,St,Tt,At,Mt,jt,Ot],providers:[{provide:f.JwtHttp,useFactory:mt,deps:[r.Http,r.RequestOptions]}],entryComponents:[E,N,K,st,yt,U],bootstrap:[bt]})],t)})();n(23),n(535),n(522),n(521),n(514),n(511),n(508),n(502),n(493),n(490);document.addEventListener("DOMContentLoaded",(function(t){sessionStorage.getItem("refresh_token")?Object(o.a)().bootstrapModule(It):location.href="/login"}))},49:function(t,e,n){"use strict";var o=n(1),a=n(3),i=(function(){return function(){this.permissions=[]}})();n.d(e,"a",(function(){return r}));var r=(function(){function t(){this.resources=[]}return o.a([Object(a.Type)((function(){return i})),o.c("design:type",Array)],t.prototype,"resources",void 0),t})()},50:function(t,e,n){"use strict";var o=n(1),a=n(0),i=n(13),r=n(64),s=n(22),l=n(3),c=(function(){return function(){}})(),d=(function(){function t(){}return o.a([Object(l.Type)((function(){return c})),o.c("design:type",c)],t.prototype,"user_claims",void 0),t})();n.d(e,"a",(function(){return u}));var u=(function(){function t(t,e){this.authHttp=t,this.http=e,this.jwtHelper=new r.JwtHelper}return t.prototype.login=function(t,e){return this.authHttp.post("/api/auth",{username:t,password:e}).toPromise().then(this.extractData).then((function(t){sessionStorage.setItem("access_token",t.access_token),sessionStorage.setItem("refresh_token",t.refresh_token),location.href="/"})).catch(this.handleError)},t.prototype.logout=function(){var t=this;return this.authHttp.post("/api/auth/logout",{refresh_token:sessionStorage.getItem("refresh_token")}).toPromise().then((function(){t.clearTokens()})).catch(this.handleError)},t.prototype.clearTokens=function(){sessionStorage.removeItem("access_token"),sessionStorage.removeItem("refresh_token")},t.prototype.canAccess=function(t,e){return!1},t.prototype.getRefreshToken=function(){return sessionStorage.getItem("refresh_token")},t.prototype.getAccessToken=function(){return sessionStorage.getItem("access_token")},t.prototype.getAccessTokenRefreshed=function(){var t=this.getAccessToken();if(!this.jwtHelper.isTokenExpired(t))return Promise.resolve(t);var e=this.getRefreshToken();if(!e||this.jwtHelper.isTokenExpired(e))return Promise.reject("Refresh token does not exist or has expired. Please log in again.");var n=new i.Headers({Authorization:"Bearer "+this.getRefreshToken()});return this.http.post("/api/auth/refresh",{},{headers:n}).toPromise().then(this.extractData).then((function(t){return t.access_token})).catch(this.handleError)},t.prototype.getAndDecodeRefreshToken=function(){return Object(l.plainToClass)(d,this.jwtHelper.decodeToken(this.getRefreshToken()))},t.prototype.getAndDecodeAccessToken=function(){return Object(l.plainToClass)(d,this.jwtHelper.decodeToken(this.getAccessToken()))},t.prototype.isAccessTokenFresh=function(){return!!this.getAndDecodeAccessToken().fresh},t.prototype.extractData=function(t){return t.json()||{}},t.prototype.handleError=function(t){var e,n;if(t instanceof i.Response){var o=t.json()||"";n=o.error||o.detail||JSON.stringify(o),e=t.status+" - "+(t.statusText||"")+" "+n}else n=e=t.message?t.message:t.toString();throw console.error(e),new Error(n)},t=o.a([Object(a.Injectable)(),o.c("design:paramtypes",[s.JwtHttp,i.Http])],t)})()},51:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(1),a=n(3),i=n(41),r=n(155),s=(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.conditions=[],e.child_expressions=[],e}return o.b(e,t),Object.defineProperty(e.prototype,"all_errors",{get:function(){var t,e;return(t=(e=this.errors).concat.apply(e,this.conditions.map((function(t){return t.all_errors})))).concat.apply(t,this.child_expressions.map((function(t){return t.all_errors})))},enumerable:!0,configurable:!0}),o.a([Object(a.Type)((function(){return r.a})),o.c("design:type",Array)],e.prototype,"conditions",void 0),o.a([Object(a.Type)((function(){return e})),o.c("design:type",Array)],e.prototype,"child_expressions",void 0),e})(i.a)},536:function(t,e){t.exports='<h1 class="settingsHeader">\n\tRole Settings</h1>\n\n<div class="row">\n\t<div class="col-xs-6">\n\t\t<button (click)="addRole()" class="btn btn-primary">\n\t\t\t<i class="fa fa-plus"></i>Add Role</button>\n\t</div>\n\t<div class="col-xs-6">\n\t\t<div class="form-group row">\n\t\t\t<label class="col-xs-2 col-form-label">Search Filter</label>\n\t\t\t<div class="col-xs-10">\n\t\t\t\t<input class="form-control" [formControl]="filterQuery" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\n<ngx-datatable #roleTable class=\'material expandable\' [columnMode]="\'flex\'" [rows]="displayRoles" [headerHeight]="50" [footerHeight]="50"\n [rowHeight]="undefined" [sorts]="[{prop: \'name\', dir: \'asc\'}]" [limit]="10">\n\t\x3c!-- Column Templates --\x3e\n\t<ngx-datatable-column name="Role Name" prop="name" [flexGrow]="1"></ngx-datatable-column>\n\t<ngx-datatable-column name="Permissions" [sortable]="false" [flexGrow]="5">\n\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t<div *ngFor="let resource of row.resources">\n\t\t\t\t{{resource.name}}: {{resource.permissions.join(\', \')}}\n\t\t\t</div>\n\t\t</ng-template>\n\t</ngx-datatable-column>\n\t<ngx-datatable-column name="Actions" [resizeable]="false" [sortable]="false" [draggable]="false" [flexGrow]="2">\n\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t<button (click)="editRole(row)" class="btn btn-primary" title="Edit Role" [disabled]="row.name === \'admin\'">\n\t\t\t\t<i class="fa fa-edit"></i>\n\t\t\t</button>\n\t\t\t<button (click)="deleteRole(row)" class="btn btn-danger" title="Delete Role" [disabled]="row.name === \'admin\'">\n\t\t\t\t<i class="fa fa-times"></i>\n\t\t\t</button>\n\t\t</ng-template>\n\t</ngx-datatable-column>\n</ngx-datatable>'},537:function(t,e){t.exports='<div class="indent">\n\t\x3c!-- Basic Info --\x3e\n\t<div class="row">\n\t\t<div class="col-xs-6">\n\t\t\t<div class="form-group">\n\t\t\t\t<label>Operator</label>\n\t\t\t\t<select class="form-control" [(ngModel)]="conditionalExpression.operator">\n\t\t\t\t\t<option *ngFor="let i of availableOperators" [value]="i" [label]="i.toUpperCase()">{{i.toUpperCase()}}</option>\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="col-xs-6">\n\t\t\t<div class="form-group">\n\t\t\t\t<label>Negated</label>\n\t\t\t\t<input type="checkbox" class="form-control" [(ngModel)]="conditionalExpression.is_negated">\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\x3c!-- Conditions Component --\x3e\n\t<div>\n\t\t<h4>Conditions</h4>\n\t\t<playbook-conditions-component [conditions]="conditionalExpression.conditions" [appApis]="appApis" [loadedWorkflow]="loadedWorkflow"\n\t\t [selectedAppName]="selectedAppName"></playbook-conditions-component>\n\t</div>\n\t\x3c!-- Add Child Expressions Header --\x3e\n\t<div class="row">\n\t\t<div class="col-xs-6">\n\t\t\t<h4>Child Expressions</h4>\n\t\t</div>\n\t\t<div class="col-xs-6">\n\t\t\t<div class="form-group">\n\t\t\t\t<button class="btn btn-primary pull-right" (click)="addChildExpression()">\n\t\t\t\t\t<i class="fa fa-plus"></i>Add Child Expression\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t\x3c!-- Child expressions control and component --\x3e\n\t<div *ngFor="let childExpression of conditionalExpression.child_expressions; let id = index">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<label>Child Expression {{id+1}}</label>\n\t\t\t</div>\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<div class="pull-right">\n\t\t\t\t\t<button *ngIf="id > 0" class="btn btn-primary" (click)="moveUp(id)" title="Move Up">\n\t\t\t\t\t\t<i class="fa fa-arrow-up"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button *ngIf="id < conditionalExpression.child_expressions.length - 1" class="btn btn-primary" (click)="moveDown(id)" title="Move Down">\n\t\t\t\t\t\t<i class="fa fa-arrow-down"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="btn btn-danger" (click)="removeChildExpression(id)" title="Remove Conditional Expression">\n\t\t\t\t\t\t<i class="fa fa-close"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<playbook-conditional-expression-component [conditionalExpression]="childExpression" [appApis]="appApis" [selectedAppName]="selectedAppName"\n\t\t [loadedWorkflow]="loadedWorkflow"></playbook-conditional-expression-component>\n\t</div>\n</div>'},538:function(t,e){t.exports='<div *ngIf="appNamesWithTransforms.length" class="indent">\n\t<div class="row addBar">\n\t\t<div class="col-xs-4">\n\t\t\t<label>App</label>\n\t\t\t<select class="form-control" [(ngModel)]="selectedAppName" (change)="resetTransformSelection($event.target.value)">\n\t\t\t\t<option *ngFor="let i of appNamesWithTransforms" [value]="i" [label]="i">{{i}}</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class="col-xs-4">\n\t\t\t<label>Action</label>\n\t\t\t<select class="form-control" [(ngModel)]="selectedTransformApi">\n\t\t\t\t<option *ngFor="let i of getTransformNamesForApp()" [value]="i" [label]="i">{{i}}</option>\n\t\t\t</select>\n\t\t\t</div>\n\t\t<div class="col-xs-4">\n\t\t\t<div class="form-group">\n\t\t\t\t<button class="btn btn-primary pull-right" (click)="addTransform()"><i class="fa fa-plus"></i>Add Transform</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div *ngFor="let transform of transforms; let id = index">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<label>Transform {{id+1}}: {{transform.app_name}} - {{transform.action_name}}</label>\n\t\t\t</div>\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<div class="pull-right">\n\t\t\t\t\t<button *ngIf="id > 0" class="btn btn-primary" (click)="moveUp(id)" title="Move Up"><i class="fa fa-arrow-up"></i></button>\n\t\t\t\t\t<button *ngIf="id < transforms.length - 1" class="btn btn-primary" (click)="moveDown(id)" title="Move Down"><i class="fa fa-arrow-down"></i></button>\n\t\t\t\t\t<button class="btn btn-danger" (click)="removeTransform(id)" title="Remove Transform"><i class="fa fa-close"></i></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<playbook-argument-component *ngFor="let parameterApi of getTransformApi(transform.app_name, transform.action_name).parameters; let id = index"\n\t\t[loadedWorkflow]="loadedWorkflow" [argument]="getOrInitializeArgument(transform, parameterApi)" [parameterApi]="parameterApi"\n\t\t[id]="id"></playbook-argument-component>\n\t</div>\n</div>'},539:function(t,e){t.exports='<div *ngIf="appNamesWithConditions.length">\n\t<div class="row addBar">\n\t\t<div class="col-xs-4">\n\t\t\t<label>App</label>\n\t\t\t<select class="form-control" [(ngModel)]="selectedAppName" (change)="resetConditionSelection($event.target.value)">\n\t\t\t\t<option *ngFor="let i of appNamesWithConditions" [value]="i" [label]="i">{{i}}</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class="col-xs-4">\n\t\t\t<label>Action</label>\n\t\t\t<select class="form-control" [(ngModel)]="selectedConditionApi">\n\t\t\t\t<option *ngFor="let i of getConditionNamesForApp()" [value]="i" [label]="i">{{i}}</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class="col-xs-4">\n\t\t\t<div class="form-group">\n\t\t\t\t<button class="btn btn-primary pull-right" (click)="addCondition()">\n\t\t\t\t\t<i class="fa fa-plus"></i>Add Condition\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div *ngFor="let condition of conditions; let id = index">\n\t\t<div class="row">\n\t\t\t<div class="col-xs-4">\n\t\t\t\t<label>Condition {{id+1}}: {{condition.app_name}} - {{condition.action_name}}</label>\n\t\t\t</div>\n\t\t\t<div class="col-xs-4">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label>Negated</label>\n\t\t\t\t\t<input type="checkbox" class="form-control" [(ngModel)]="condition.is_negated">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-xs-4">\n\t\t\t\t<div class="pull-right">\n\t\t\t\t\t<button *ngIf="id > 0" class="btn btn-primary" (click)="moveUp(id)" title="Move Up">\n\t\t\t\t\t\t<i class="fa fa-arrow-up"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button *ngIf="id < conditions.length - 1" class="btn btn-primary" (click)="moveDown(id)" title="Move Down">\n\t\t\t\t\t\t<i class="fa fa-arrow-down"></i>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button class="btn btn-danger" (click)="removeCondition(id)" title="Remove Condition">\n\t\t\t\t\t\t<i class="fa fa-close"></i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<playbook-argument-component *ngFor="let parameterApi of getConditionApi(condition.app_name, condition.action_name).parameters; let id = index"\n\t\t [loadedWorkflow]="loadedWorkflow" [argument]="getOrInitializeArgument(condition, parameterApi)" [parameterApi]="parameterApi"\n\t\t [id]="id"></playbook-argument-component>\n\t\t<div>\n\t\t\t<h4>Transforms</h4>\n\t\t\t<playbook-transforms-component [transforms]="condition.transforms" [appApis]="appApis" [selectedAppName]="selectedAppName"\n\t\t\t [loadedWorkflow]="loadedWorkflow"></playbook-transforms-component>\n\t\t</div>\n\t</div>\n</div>'},540:function(t,e){t.exports='<div class="form-group argument {{id % 2 ? \'odd\' : \'even\'}}">\n\t\x3c!-- Label for argument with optional required icon --\x3e\n\t<label *ngIf="!isDeviceArgument" for="{{argument.name}}">\n\t\tArgument {{id+1}}: {{argument.name}} ({{parameterSchema.type}})\n\t\t<i *ngIf="parameterApi.description != null" class="fa fa-info-circle" [title]="parameterApi.description"></i>\n\t\t<i *ngIf="parameterApi.required" class="fa fa-asterisk required" title="This field is required."></i>\n\t</label>\n\n\t\x3c!-- Columns for allowing users to specify outputs of other action as arguments for this one --\x3e\n\t<div class="row">\n\t\t<div class="col-xs-4">\n\t\t\t<select name="playbookSelect" class="form-control" [(ngModel)]="valueType" (change)="resetValue()">\n\t\t\t\t<option *ngFor="let i of valueTypes" [ngValue]="i.id" [label]="i.name">{{i.name}}</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class="col-xs-8">\n\t\t\t\x3c!-- Normal string text entries --\x3e\n\t\t\t<input *ngIf="isStringSelect" class="form-control" name="{{argument.name}}" [(ngModel)]="argument.value" (change)="clearReference()"\n\t\t\t\ttype="text" [attr.minlength]="parameterSchema.minLength > 0 ? parameterSchema.minLength : null" [attr.maxlength]="parameterSchema.maxLength > 0 ? parameterSchema.maxLength : null"\n\t\t\t\t[attr.pattern]="parameterSchema.pattern ? parameterSchema.pattern : null" [attr.required]="parameterApi.required" [attr.placeholder]="parameterApi.placeholder">\n\n\t\t\t\x3c!-- Enum types, make a select box --\x3e\n\t\t\t<select *ngIf="isEnumSelect" class="form-control" name="{{argument.name}}" [(ngModel)]="argument.value"  (change)="clearReference()" [attr.required]="parameterApi.required">\n\t\t\t\t<option *ngIf="!parameterApi.required" value=""></option>\n\t\t\t\t<option *ngFor="let i of parameterSchema.enum" [value]="i" [label]="i">{{i}}</option>\n\t\t\t</select>\n\n\t\t\t\x3c!-- For numbers enter number info --\x3e\n\t\t\t<input *ngIf="isNumberSelect" class="form-control" name="{{argument.name}}" [(ngModel)]="argument.value" \n\t\t\t\t(change)="clearReference()" type="number" [attr.min]="getMin(parameterSchema)" [attr.max]="getMax(parameterSchema)"\n\t\t\t\t[attr.step]="parameterSchema.multipleOf > 0 ? parameterSchema.multipleOf : null" [attr.required]="parameterApi.required"\n\t\t\t\t[attr.placeholder]="parameterApi.placeholder">\n\n\t\t\t\x3c!-- Checkbox for boolean values --\x3e\n\t\t\t<input *ngIf="isBooleanSelect" type="checkbox" class="form-control" name="{{argument.name}}" [(ngModel)]="argument.value" (change)="clearReference()">\n\n\t\t\t\x3c!-- User select --\x3e\n\t\t\t<select2 *ngIf="isStatic && isUserSelect" [data]="selectData" [value]="selectInitialValue" [options]="selectConfig"\n\t\t\t\t(valueChanged)="selectChange($event)"></select2>\n\n\t\t\t\x3c!-- Role select --\x3e\n\t\t\t<select2 *ngIf="isStatic && isRoleSelect" [data]="selectData" [value]="selectInitialValue" [options]="selectConfig"\n\t\t\t\t(valueChanged)="selectChange($event)"></select2>\n\n\t\t\t\x3c!-- Device select --\x3e\n\t\t\t<select *ngIf="isDeviceSelect" class="form-control" name="device_id" [(ngModel)]="argument.value" (change)="clearReference()">\n\t\t\t\t<option [ngValue]="\'\'"></option>\n\t\t\t\t<option *ngFor="let i of devices" [ngValue]="i.id" [label]="i.name">{{i.name}}</option>\n\t\t\t</select>\n\n\t\t\t\x3c!-- Branch Counter select --\x3e\n\t\t\t<select *ngIf="isBranchCounterSelect" class="form-control" [(ngModel)]="argument.reference">\n\t\t\t\t<option [ngValue]="0"></option>\n\t\t\t\t<option *ngFor="let i of branchCounters" [ngValue]="i.id" [label]="i.text">{{i.text}}</option>\n\t\t\t</select>\n\t\t\t\n\t\t\t\x3c!-- Action select --\x3e\n\t\t\t<ng-container *ngIf="isActionSelect">\n\t\t\t\t<select class="form-control" [(ngModel)]="argument.reference">\n                \t<option [ngValue]="\'\'"></option>\n                \t<option *ngFor="let i of getPreviousActions()" [ngValue]="i.id" [label]="i.name">{{i.name}}</option>\n\t\t\t\t</select>\n\t\t\t\t<input type="text" class="form-control" [(ngModel)]="argument.selection" name="selection" placeholder="(Optional) Selection for object-based outputs">\n\t\t\t</ng-container>\n\t\t</div>\n\t</div>\n</div>\n<div *ngIf="!isDeviceArgument && isStatic && isNormalArray(parameterSchema)" class="indent">\n\t<div class="row">\n\t\t<div class="col-xs-6">\n\t\t\t<select class="form-control" [(ngModel)]="selectedType" name="selectedType">\n\t\t\t\t\t<option *ngFor="let i of availableTypes" [value]="i" [label]="i">{{i}}</option>\n\t\t\t\t</select>\n\t\t</div>\n\t\t<div class="col-xs-6">\n\t\t\t<div class="form-group">\n\t\t\t\t<button class="btn btn-primary pull-right" (click)="addItem()" [disabled]="!selectedType">\n\t\t\t\t\t<i class="fa fa-plus"></i>Add Item\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="form-group argument arrayItem {{itemId % 2 ? \'odd\' : \'even\'}}" *ngFor="let item of argument.value; let itemId = index; trackBy:trackArraysBy">\n\t\t<div class="row propertyHeader">\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<label>Item {{itemId+1}}:</label>\n\t\t\t</div>\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<div class="pull-right">\n\t\t\t\t\t<button *ngIf="itemId > 0" class="btn btn-primary" (click)="moveUp(itemId)" title="Move Up"><i class="fa fa-arrow-up"></i></button>\n\t\t\t\t\t<button *ngIf="itemId < argument.value.length - 1" class="btn btn-primary" (click)="moveDown(itemId)" title="Move Down"><i class="fa fa-arrow-down"></i></button>\n\t\t\t\t\t<button class="btn btn-danger" (click)="removeItem(itemId)" title="Remove Item"><i class="fa fa-close"></i></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<input *ngIf="arrayTypes[itemId] === \'string\'" type="text" class="form-control" [(ngModel)]="argument.value[itemId]">\n\t\t<input *ngIf="arrayTypes[itemId] === \'number\'" type="number" class="form-control" [(ngModel)]="argument.value[itemId]">\n\t\t<input *ngIf="arrayTypes[itemId] === \'boolean\'" type="checkbox" class="form-control" [(ngModel)]="argument.value[itemId]">\n\t</div>\n</div>\n<div *ngIf="!isDeviceArgument && isStatic && parameterSchema.type === \'object\'" class="indent">\n\t<div class="row">\n\t\t<div class="col-xs-6">\n\t\t\t<input type="text" class="form-control" [(ngModel)]="propertyName" placeholder="Enter a parameter name">\n\t\t</div>\n\t\t<div class="col-xs-3">\n\t\t\t<select class="form-control" [(ngModel)]="selectedType" name="selectedType">\n\t\t\t\t<option *ngFor="let i of availableTypes" [value]="i" [label]="i">{{i}}</option>\n\t\t\t</select>\n\t\t</div>\n\t\t<div class="col-xs-3">\n\t\t\t<div class="form-group">\n\t\t\t\t<button class="btn btn-primary pull-right" (click)="addProperty()" [disabled]="!propertyName.trim() || !selectedType">\n\t\t\t\t\t<i class="fa fa-plus"></i>Add Property\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<div class="form-group argument {{itemId % 2 ? \'odd\' : \'even\'}}" *ngFor="let key of argument.value | keys; let itemId = index">\n\t\t<div class="row propertyHeader">\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<label>Property "{{key}}":</label>\n\t\t\t</div>\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<div class="pull-right">\n\t\t\t\t\t<button class="btn btn-danger" (click)="removeProperty(key)" title="Remove Item"><i class="fa fa-close"></i></button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<input *ngIf="objectTypes[key] === \'string\'" type="text" class="form-control" [(ngModel)]="argument.value[key]">\n\t\t<input *ngIf="objectTypes[key] === \'number\'" type="number" class="form-control" [(ngModel)]="argument.value[key]">\n\t\t<input *ngIf="objectTypes[key] === \'boolean\'" type="checkbox" class="form-control" [(ngModel)]="argument.value[key]">\n\t</div>\n</div>'},541:function(t,e){t.exports='<div class="modal-header">\n\t<h4 class="modal-title">{{title}}</h4>\n</div>\n<div id="roleModalBody" class="modal-body">\n\t<div class="container-fluid">\n\t\t<form #roleForm="ngForm">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">\n\t\t\t\t\t\t\tName\n\t\t\t\t\t\t\t<i class="fa fa-asterisk required" title="This field is required."></i>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingRole.name" name="name" #name="ngModel" required>\n\t\t\t\t\t\t<div *ngIf="name.errors && (name.dirty || name.touched)" class="alert alert-danger">\n\t\t\t\t\t\t\t<div [hidden]="!name.errors.required">\n\t\t\t\t\t\t\t\tName is required.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="description">Description</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingRole.description" name="ip" tabindex="2">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<label>Resource</label>\n\t\t\t\t\t<select class="form-control" [(ngModel)]="selectedAvailableResourceActionName" name="selectedAvailableResourceActionName">\n\t\t\t\t\t\t<option *ngFor="let i of resourceNames" [value]="i" [label]="i">{{i}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<button class="btn btn-primary pull-right" (click)="addResource()" [disabled]="!selectedAvailableResourceActionName">\n\t\t\t\t\t\t\t<i class="fa fa-plus"></i>Add Resource\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="resourceGroup form-group {{id % 2 ? \'odd\' : \'even\'}}" *ngFor="let resource of workingRole.resources; let id = index">\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t\t<label>Resource {{id+1}}: {{resource.name}}{{resource.app_name ? \' (\' + resource.app_name + \')\' : \'\'}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t\t<div class="pull-right">\n\t\t\t\t\t\t\t<button class="btn btn-danger" (click)="removeResource(resource)" title="Remove Resource"><i class="fa fa-close"></i></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<select2 [data]="selectPermissionMapping[resource.resource_id]" [value]="resource.permissions" [options]="permissionSelectConfig"\n\t\t\t\t (valueChanged)="permissionSelectChange($event, resource)"></select2>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</div>\n<div class="modal-footer">\n\t<button type="button" class="btn btn-secondary" (click)="activeModal.dismiss()">Undo Changes and Close</button>\n\t<button type="button" class="btn btn-primary" [disabled]="!roleForm.form.valid" (click)="submit()">{{submitText}}</button>\n</div>'},542:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,"/* @import '~@swimlane/ngx-datatable/release/index.css';\n@import '~@swimlane/ngx-datatable/release/themes/material.css';\n@import '~@swimlane/ngx-datatable/release/assets/icons.css';\n@import '~bootstrap/dist/css/bootstrap.min.css';\n@import '~font-awesome/css/font-awesome.min.css';\n@import '~ng2-toasty/style-bootstrap.css';\n@import '~select2/dist/css/select2.min.css'; */\n\n/* h1 {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif, sans-serif;\n  font-weight: bold;\n  font-size: 30px;\n  color: #255876;\n}\n\nh3 {\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif, sans-serif;\n  font-weight: bold;\n} */\n\n.contentContainer {\n    position: relative;\n    padding-bottom: 56.25%; /* 16:9 */\n    padding-top: 25px;\n    height: 0;\n}\n\n/* .contentContainer iframe {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n} */\n\n#walkoffNav {\n  background-color: #3c8dbc;\n}\n\n#walkoffNav a {\n  color: #f6f6f6;\n}\n\n#walkoffNav a .navLink {\n  margin-left: 5px;\n}\n\n#walkoffNav .dropdown-item {\n  color: #333333;\n}\n\n#walkoffNav {\n  margin-bottom: 0;\n  border: none;\n  border-radius: 0;\n}\n\n#walkoffNav .navbar-nav > .user-menu .user-image {\n  float: left;\n  width: 25px;\n  height: 25px;\n  border-radius: 50%;\n  margin-right: 10px;\n  margin-top: -2px;\n}\n\n@media (max-width: 767px) {\n  #walkoffNav .navbar-nav > .user-menu .user-image {\n    float: none;\n    margin-right: 0;\n    margin-top: -8px;\n    line-height: 10px;\n  }\n}\n\n#walkoffNav .navbar-nav .dropdown .dropdown-menu {\n  background-color: #3c8dbc;\n}\n\n#walkoffNav .navbar-nav .dropdown .dropdown-menu .installedInterface {\n  color: white;\n}\n\n#walkoffNav .navbar-nav .dropdown .dropdown-menu .installedInterface:hover {\n  color: #3c8dbc;\n}\n\n#walkoffNav .navbar-nav .dropdown .dropdown-menu .installedInterface span {\n  margin-left: 5px;\n}\n\n#walkoffNav .navbar-nav>.open>a {\n  color: #3c8dbc;\n}\n\n#walkoffNav .navbar-nav .newMessages {\n  color: orange;\n  font-weight: bold;\n}\n\n#walkoffNav .navbar-nav .required {\n  color: crimson;\n}\n\n#walkoffNav .navbar-nav .messages-menu table,\n#walkoffNav .navbar-nav .messages-menu table a {\n  width: 320px;\n  color: white;\n  margin: 5px;\n}\n\n#walkoffNav .navbar-nav .messages-menu table .oldMessage,\n#walkoffNav .navbar-nav .messages-menu table .oldMessage a {\n  color: #DDD;\n  font-style: italic;\n}\n\n#walkoffNav .navbar-nav .messages-menu .noMessages {\n  color: #DDD;\n  font-style: italic;\n  margin-left: 10px;\n}\n\n#walkoffNav .navbar-nav .messages-menu table tr {\n  border-bottom: 1px solid #AAA;\n}\n\n#walkoffNav .navbar-nav .messages-menu table tr:last-child {\n  border-bottom: none;\n}\n\n.footer {\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 51px;\n  background-color: #e7e7e7;\n  padding: 15px;\n}\n",""])},543:function(t,e,n){var o=n(542);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},544:function(t,e,n){var o=n(543);t.exports="string"==typeof o?o:o.toString()},545:function(t,e){t.exports='<div class="wrapper">\n\n  \x3c!-- Main Header --\x3e\n  <header>\n    <nav id="walkoffNav" class="navbar navbar-default navbar-custom">\n      <div class="container-fluid">\n        \x3c!-- Brand and toggle get grouped for better mobile display --\x3e\n        <div class="navbar-header">\n          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"\n            aria-expanded="false">\n            <span class="sr-only">Toggle navigation</span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            <span class="icon-bar"></span>\n            </button>\n            <a class="navbar-brand" href="#"><b>WALK</b>OFF</a>\n        </div>\n\n        \x3c!-- Collect the nav links, forms, and other content for toggling --\x3e\n        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">\n          <ul class="nav navbar-nav">\n            <li class="dropdown">\n              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">\n                Interfaces\n                <span class="caret"></span>\n              </a>\n              <ul class="dropdown-menu">\n                <li *ngFor="let interfaceName of interfaceNames">\n                  <a class="installedInterface" routerLink="/interfaces/{{interfaceName}}"><i class="fa fa-gear"></i><span>{{interfaceName}}</span></a>\n                </li>\n                <li *ngIf="!interfaceNames || !interfaceNames.length">\n                  <span class="dropdown-item">No custom WALKOFF interfaces are installed.</span>\n                </li>\n              </ul>\n            </li>\n            <li>\n              <a routerLink="/playbook" routerLinkActive="active"><i class="fa fa-sitemap"></i><span class="navLink">Playbook</span></a>\n            </li>\n            <li>\n              <a routerLink="/execution" routerLinkActive="active"><i class="fa fa-flag-checkered"></i><span class="navLink">Execution</span></a>\n            </li>\n            <li>\n              <a routerLink="/scheduler" routerLinkActive="active"><i class="fa fa-calendar"></i><span class="navLink">Scheduler</span></a>\n            </li>\n            <li>\n              <a routerLink="/devices" routerLinkActive="active"><i class="fa fa-desktop"></i><span class="navLink">Devices</span></a>\n            </li>\n            <li>\n              <a routerLink="/messages" routerLinkActive="active"><i class="fa fa-envelope-o"></i><span class="navLink">Messages</span></a>\n            </li>\n            <li>\n              <a routerLink="/cases" routerLinkActive="active"><i class="fa fa-list-alt"></i><span class="navLink">Cases</span></a>\n            </li>\n            <li>\n              <a routerLink="/metrics" routerLinkActive="active"><i class="fa fa-pie-chart"></i><span class="navLink">Metrics</span></a>\n            </li>\n            <li>\n              <a routerLink="/settings" routerLinkActive="active"><i class="fa fa-wrench"></i><span class="navLink">Settings</span></a>\n            </li>\n          </ul>\n\n          \x3c!-- Navbar Right Menu --\x3e\n          <div class="navbar-custom-menu">\n            <ul class="nav navbar-nav navbar-right">\n              <li class="dropdown messages messages-menu">\n                <a href="#" class="dropdown-toggle" [class.newMessages]="newMessagesCount" data-toggle="dropdown" (click)="recalculateRelativeTimes()">\n                  <i class="fa" [ngClass]="{ \'fa-envelope\': newMessagesCount, \'fa-envelope-open-o\': !newMessagesCount }"></i>\n                  <span>{{newMessagesCount}}</span>\n                </a>\n                <div class="dropdown-menu">\n                  <span *ngIf="!messageListings.length" class="noMessages">You have no messages.</span>\n                  <table class="messageTable">\n                    <tr *ngFor="let messageListing of messageListings" [class.oldMessage]="messageListing.is_read">\n                      <td>\n                          <i *ngIf="messageListing.awaiting_response" class="fa fa-exclamation required" title="This message is awaiting response."></i>\n                      </td>\n                      <td>\n                          <a class="dropdown-item" href="#" (click)="openMessage($event, messageListing)">{{utils.getTruncatedString(messageListing.subject, 25, \'(no subject)\')}}</a>    \n                      </td>\n                      <td [title]="utils.getLocalTime(messageListing.created_at)">{{notificationRelativeTimes[messageListing.id]}}</td>\n                    </tr>\n                  </table>\n                </div>\n              </li>\n              \x3c!-- User Account Menu --\x3e\n              <li class="dropdown user user-menu">\n                \x3c!-- Menu Toggle Button --\x3e\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown">\n                  \x3c!-- The user image in the navbar--\x3e\n                  <img src="client/assets/img/genericUser.png" class="user-image" alt="User Image">\n                  \x3c!-- hidden-xs hides the username on small devices so only the image appears. --\x3e\n                  <span class="userName">{{currentUser}}</span>\n                </a>\n                <ul class="dropdown-menu">\n                  \x3c!-- The user image in the menu --\x3e\n                  <li class="user-header">\n                    <img src="client/assets/img/genericUser.png" class="rounded-circle" alt="User Image">\n\n                    <p>\n                      {{currentUser}}\n                    </p>\n                  </li>\n                  \x3c!-- Menu Body --\x3e\n                  <li class="user-body">\n                    <div class="row">\n\n                    </div>\n                    \x3c!-- /.row --\x3e\n                  </li>\n                  \x3c!-- Menu Footer--\x3e\n                  <li class="user-footer">\n\n                    <div class="pull-right">\n                      <button (click)="logout()" class="btn btn-default btn-primary">Sign out</button>\n                    </div>\n                  </li>\n                </ul>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </nav>\n  </header>\n\n  <div>\n    <section>\n      <div>\n        <router-outlet></router-outlet>\n        \x3c!--Modal container for ng-bootstrap, should remove if upgrading to bootstrap 4 / ng-bootstrap 1.0.0-alpha.18+--\x3e\n        <template ngbModalContainer></template>\n        \x3c!--Container for ng2-toasty toast messages--\x3e\n        <ng2-toasty></ng2-toasty>\n      </div>\n    </section>\n    <div></div>\n  </div>\n\n  \x3c!--<footer class="footer">\n    <strong>WALKOFF</strong>\n  </footer>--\x3e\n</div>'},546:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,".executionMain {\n\tpadding: 10px 15px;\n}\n\n.executionMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n\twhite-space: initial;\n}\n\n.actionStatusModal > .modal-dialog {\n\twidth: 95%;\n}",""])},547:function(t,e,n){var o=n(546);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},548:function(t,e,n){var o=n(547);t.exports="string"==typeof o?o:o.toString()},549:function(t,e){t.exports='<div id="main" class="executionMain">\n\t<h1>Execution Control</h1>\n\n\t<div class="row">\n\t\t<div class="col-xs-4">\n\t\t\t<select2 [data]="availableWorkflows" [options]="workflowSelectConfig" (valueChanged)="workflowSelectChange($event)"></select2>\n\t\t</div>\n\t\t<div class="col-xs-2">\n\t\t\t<button [disabled]="!selectedWorkflow" (click)="excuteSelectedWorkflow()" title="Execute Workflow" class="btn btn-secondary">\n\t\t\t\t<i class="fa fa-play"></i>\n\t\t\t\tExecute Workflow\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="col-xs-6">\n\t\t\t<div class="form-group row">\n\t\t\t\t<label class="col-xs-2 col-form-label">Search Filter</label>\n\t\t\t\t<div class="col-xs-10">\n\t\t\t\t\t<input class="form-control" [formControl]="filterQuery" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<ngx-datatable #workflowStatusTable class=\'material expandable workflowStatusTable\' [columnMode]="\'flex\'" [rows]="displayWorkflowStatuses"\n\t [sorts]="[{prop: \'started_at\', dir: \'desc\'}]" [sortType]="\'multi\'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [limit]="25">\n\t\t\x3c!-- Column Templates --\x3e\n\t\t<ngx-datatable-column name="Name" prop="name" [flexGrow]="1">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t<a href="#" (click)="openActionStatusModal($event, row)">{{row.name}}</a>\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Started At" prop="started_at" [flexGrow]="1">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t<span [title]="row.localized_started_at">\n\t\t\t\t\t{{workflowStatusStartedRelativeTimes[row.execution_id]}}\n\t\t\t\t</span>\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Completed At" prop="completed_at" [flexGrow]="1">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t<span [title]="row.localized_completed_at">\n\t\t\t\t\t{{workflowStatusCompletedRelativeTimes[row.execution_id]}}\n\t\t\t\t</span>\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Status" prop="status" [flexGrow]="1"></ngx-datatable-column>\n\t\t<ngx-datatable-column name="Current App" prop="current_action" [comparator]="appNameComparator" [flexGrow]="1">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t{{getAppName(row.current_action)}}\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Current Action" prop="current_action" [comparator]="actionNameComparator" [flexGrow]="1">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t{{getActionName(row.current_action)}}\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Actions" [resizeable]="false" [sortable]="false" [draggable]="false" [flexGrow]="2">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t<button *ngIf="row.status === \'paused\'" (click)="performWorkflowStatusAction(row, workflowStatusActions.resume)" title="Start Scheduled Task"\n\t\t\t\t class="btn btn-primary">\n\t\t\t\t\t<i class="fa fa-play"></i>\n\t\t\t\t</button>\n\t\t\t\t<button *ngIf="row.status === \'running\'" (click)="performWorkflowStatusAction(row, workflowStatusActions.pause)" title="Pause Scheduled Task"\n\t\t\t\t class="btn btn-warning">\n\t\t\t\t\t<i class="fa fa-pause"></i>\n\t\t\t\t</button>\n\t\t\t\t<button *ngIf="!(row.status === \'completed\' || row.status === \'aborted\')" (click)="performWorkflowStatusAction(row, workflowStatusActions.abort)"\n\t\t\t\t title="Abort Scheduled Task" class="btn btn-danger">\n\t\t\t\t\t<i class="fa fa-stop"></i>\n\t\t\t\t</button>\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t</ngx-datatable>\n\n\t<div class="modal fade actionStatusModal" role="dialog" aria-labelledby="actionStatusModalTitle" aria-hidden="true">\n\t\t<div class="modal-dialog" role="document">\n\t\t\t<div *ngIf="loadedWorkflowStatus" class="modal-content">\n\t\t\t\t<div class="modal-header">\n\t\t\t\t\t<h5 class="modal-title" id="actionStatusModalTitle">Action Statuses for {{loadedWorkflowStatus.name}}</h5>\n\t\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close">\n\t\t\t\t\t\t<span aria-hidden="true">&times;</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="modal-body" #actionStatusContainer>\n\t\t\t\t\t<ngx-datatable #actionStatusTable class=\'material expandable\' [columnMode]="\'flex\'" [rows]="loadedWorkflowStatus.action_statuses"\n\t\t\t\t\t [sortType]="\'multi\'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [sorts]="[{prop: \'started_at\', dir: \'desc\'}]"\n\t\t\t\t\t [limit]="10">\n\t\t\t\t\t\t\x3c!-- Column Templates --\x3e\n\t\t\t\t\t\t<ngx-datatable-column name="Action ID" prop="action_id" [flexGrow]="1"></ngx-datatable-column>\n\t\t\t\t\t\t<ngx-datatable-column name="App Name" prop="app_name" [flexGrow]="1"></ngx-datatable-column>\n\t\t\t\t\t\t<ngx-datatable-column name="Action Name" prop="action_name" [flexGrow]="1"></ngx-datatable-column>\n\t\t\t\t\t\t<ngx-datatable-column name="Started At" prop="started_at" [flexGrow]="1">\n\t\t\t\t\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t\t\t\t\t<span [title]="row.localized_started_at">\n\t\t\t\t\t\t\t\t\t{{actionStatusStartedRelativeTimes[row.execution_id]}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</ng-template>\n\t\t\t\t\t\t</ngx-datatable-column>\n\t\t\t\t\t\t<ngx-datatable-column name="Completed At" prop="completed_at" [flexGrow]="1">\n\t\t\t\t\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t\t\t\t\t<span [title]="row.localized_completed_at">\n\t\t\t\t\t\t\t\t\t{{actionStatusCompletedRelativeTimes[row.execution_id]}}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</ng-template>\n\t\t\t\t\t\t</ngx-datatable-column>\n\t\t\t\t\t\t<ngx-datatable-column name="Status" prop="status" [flexGrow]="1"></ngx-datatable-column>\n\t\t\t\t\t\t<ngx-datatable-column name="Arguments" [sortable]="false" [flexGrow]="2">\n\t\t\t\t\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t\t\t\t\t{{getFriendlyArguments(row.arguments)}}\n\t\t\t\t\t\t\t</ng-template>\n\t\t\t\t\t\t</ngx-datatable-column>\n\t\t\t\t\t\t<ngx-datatable-column name="Result" [sortable]="false" [flexGrow]="4">\n\t\t\t\t\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t\t\t\t\t{{getFriendlyJSON(row.result)}}\n\t\t\t\t\t\t\t</ng-template>\n\t\t\t\t\t\t</ngx-datatable-column>\n\t\t\t\t\t</ngx-datatable>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>'},550:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,"#main.interfacesMain {\n\tposition: absolute;\n\ttop: 50px;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\toverflow: hidden;\n}\n\n#main.interfacesMain iframe {\n\tposition: absolute;\n\tborder: none;\n\ttop:0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}",""])},551:function(t,e,n){var o=n(550);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},552:function(t,e,n){var o=n(551);t.exports="string"==typeof o?o:o.toString()},553:function(t,e){t.exports='<div id="main" class="interfacesMain" #interfacesMain>\n\t\x3c!-- interface iframe goes here --\x3e\n</div>'},554:function(t,e){t.exports='<div id="main" class="settingsMain">\n    <ul class="nav nav-tabs" role="tablist">\n        <li class="active"><a href="#systemSettings" data-toggle="tab" role="tab">System Settings</a></li>\n        <li><a href="#userSettings" data-toggle="tab" role="tab">User Settings</a></li>\n        <li><a href="#roleSettings" data-toggle="tab" role="tab">Role Settings</a></li>\n    </ul>\n    <div class="tab-content">\n        <div id="systemSettings" class="tab-pane fade in active">\n            <h1 class="settingsHeader">System Settings</h1>\n            <form (ngSubmit)="updateConfiguration()" #systemSettingsForm="ngForm">\n                <div class="row">\n                    <div class="col-md-6">\n                        <h3>Data Configuration</h3>\n                        <div class="form-group">\n                            <label for="db_path">WALKOFF Database Path</label>\n                            <input type="text" class="form-control" [(ngModel)]="configuration.db_path" name="db_path" required>\n                        </div>\n                        <div class="form-group">\n                            <label for="walkoff_db_type">WALKOFF Database Type</label>\n                            <select class="form-control" [(ngModel)]="configuration.walkoff_db_type" name="walkoff_db_type">\n                                <option *ngFor="let i of dbTypes" [value]="i" [label]="i">{{i}}</option>\n                            </select>\n                        </div>\n                        <div class="form-group">\n                            <label for="case_db_path">Case Database Path</label>\n                            <input type="text" class="form-control" [(ngModel)]="configuration.case_db_path" name="case_db_path" required>\n                        </div>\n                        <div class="form-group">\n                            <label for="case_db_type">Case Database Type</label>\n                            <select class="form-control" [(ngModel)]="configuration.case_db_type" name="case_db_type">\n                                <option *ngFor="let i of dbTypes" [value]="i" [label]="i">{{i}}</option>\n                            </select>\n                        </div>\n                        <div class="form-group">\n                            <label for="clear_case_db_on_startup">Clear Case Database on Startup</label>\n                            <input type="checkbox" class="form-control" [(ngModel)]="configuration.clear_case_db_on_startup" name="clear_case_db_on_startup"\n                                required>\n                        </div>\n                    </div>\n\n                    <div class="col-md-6">\n                        <h3>Interface Configuration</h3>\n                        <div class="form-group">\n                            <label for="host">Host Address</label>\n                            <input type="text" class="form-control" [(ngModel)]="configuration.host" name="host" required>\n                        </div>\n                        <div class="form-group">\n                            <label for="port">Port</label>\n                            <input type="number" min="1" max="65535" class="form-control" [(ngModel)]="configuration.port" name="port" required>\n                        </div>\n                        <div class="form-group">\n                            <label for="zmq_results_address">ZMQ Results Address</label>\n                            <input type="text" class="form-control" [(ngModel)]="configuration.zmq_results_address" name="zmq_results_address" required>\n                        </div>\n                        <div class="form-group">\n                            <label for="zmq_results_address">ZMQ Communication Address</label>\n                            <input type="text" class="form-control" [(ngModel)]="configuration.zmq_communication_address" name="zmq_communication_address" required>\n                        </div>\n                    </div>\n                    \n                </div>\n\n                <div class="row">\n                    <div class="col-md-6">\n                        <h3>Cache Configuration</h3>\n                        <div class="form-group">\n                            <label for="cache_type">Cache Type</label>\n                            <select class="form-control" [(ngModel)]="configuration.cache.type" name="cache_type">\n                                <option *ngFor="let i of cacheTypes" [value]="i" [label]="i">{{i}}</option>\n                            </select>\n                        </div>\n                        <div class="form-group" *ngIf="configuration.cache.type == \'disk\'" >\n                            <label for="cache_directory">Directory</label>\n                            <input type="text" class="form-control" [(ngModel)]="configuration.cache.directory" name="cache_directory" required>\n                        </div>\n                        <div class="form-group" *ngIf="configuration.cache.type == \'disk\'">\n                            <label for="cache_shards">Shards</label>\n                            <input type="number" min="1" class="form-control" [(ngModel)]="configuration.cache.shards" name="cache_shards" required>\n                        </div>\n                        <div class="form-group" *ngIf="configuration.cache.type == \'redis\'">\n                            <label for="cache_host">Host</label>\n                            <input type="text" class="form-control" [(ngModel)]="configuration.cache.host" name="cache_host" required>\n                        </div>\n                        <div class="form-group" *ngIf="configuration.cache.type == \'redis\'">\n                            <label for="cache_port">Port</label>\n                            <input type="number" min="1" max="65535" class="form-control" [(ngModel)]="configuration.cache.port" name="cache_port" required>\n                        </div>\n                        <div class="form-group" *ngIf="configuration.cache.type == \'redis\'">\n                            <label for="cache_unix_socket_path">Unix Socket Path</label>\n                            <input type="text" class="form-control" [(ngModel)]="configuration.cache.unix_socket_path" name="cache_unix_socket_path" required>\n                        </div>\n                        <div class="form-group">\n                            <label for="cache_timeout">Timeout</label>\n                            <input type="number" min="0.0" class="form-control" [(ngModel)]="configuration.cache.timeout" name="cache_timeout" required>\n                        </div>\n                        <div class="form-group">\n                            <label for="cache_retry">Retry Timed Out Connections</label>\n                            <input type="checkbox" class="form-control" [(ngModel)]="configuration.cache.retry" name="cache_retry" required>\n                        </div>\n                    </div>\n\n                    <div class="col-md-6">\n                        <h3>Other Configuration</h3>\n                        \x3c!-- <div class="form-group">\n                            <label for="name">Use HTTPS</label>\n                            <input type="checkbox" class="form-control" [(ngModel)]="configuration.https" name="https" required>\n                        </div> --\x3e\n                        \x3c!-- <div class="form-group">\n                            <label for="name">TLS Version (if enabled)</label>\n                            <select class="form-control" [(ngModel)]="configuration.tls_version" name="tls_version">\n                                <option *ngFor="let i of tlsVersions" [value]="i" [label]="i">{{i}}</option>\n                            </select>\n                        </div> --\x3e\n                        <div class="form-group">\n                            <label for="access_token_duration">JWT Access Token Duration (in minutes)</label>\n                            <input type="number" min="1" class="form-control" [(ngModel)]="configuration.access_token_duration" name="access_token_duration"\n                                required>\n                        </div>\n                        <div class="form-group">\n                            <label for="refresh_token_duration">JWT Refresh Token Duration (in days)</label>\n                            <input type="number" min="1" class="form-control" [(ngModel)]="configuration.refresh_token_duration" name="refresh_token_duration"\n                                required>\n                        </div>\n                        <div class="form-group">\n                            <label for="number_processes">Number of Processes</label>\n                            <input type="number" min="1" max="100" class="form-control" [(ngModel)]="configuration.number_processes" name="number_processes" required>\n                        </div>\n                        <div class="form-group">\n                            <label for="number_threads_per_process">Number of Threads per Process</label>\n                            <input type="number" min="1" max="100" class="form-control" [(ngModel)]="configuration.number_threads_per_process" name="number_threads_per_process" required>\n                        </div>\n                    </div>\n                </div>\n            </form>\n            <div>\n                <button (click)="updateConfiguration()" id="formSubmit" class="btn btn-primary">Submit Changes</button>\n                <button (click)="resetConfiguration()" id="resetConfiguration" class="btn btn-danger">Reset to Defaults</button>\n            </div>\n        </div>\n\n        <div id="userSettings" class="tab-pane fade">\n            <h1 class="settingsHeader">User Settings</h1>\n\n            <div class="row">\n                <div class="col-xs-6">\n                    <button (click)="addUser()" class="btn btn-primary"><i class="fa fa-plus"></i>Add User</button>\n                </div>\n                <div class="col-xs-6">\n                    <div class="form-group row">\n                        <label class="col-xs-2 col-form-label">Search Filter</label>\n                        <div class="col-xs-10">\n                            <input class="form-control" [formControl]="filterQuery" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <ngx-datatable #userTable class=\'material expandable\' [columnMode]="\'flex\'" [rows]="displayUsers"\n             [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [sortType]="\'multi\'" [sorts]="[{prop: \'username\', dir: \'asc\'}]" [limit]="10">\n                \x3c!-- Column Templates --\x3e\n                <ngx-datatable-column name="Username" prop="username" [flexGrow]="3"></ngx-datatable-column>\n                <ngx-datatable-column name="Roles" [sortable]="false" [flexGrow]="3">\n                    <ng-template let-row="row" ngx-datatable-cell-template>\n                        {{getFriendlyRoles(row.roles)}}\n                    </ng-template>\n                </ngx-datatable-column>\n                <ngx-datatable-column name="Active" prop="active" [flexGrow]="1">\n                    <ng-template let-row="row" ngx-datatable-cell-template>\n                        {{getFriendlyBool(row.active)}}\n                    </ng-template>\n                </ngx-datatable-column>\n                <ngx-datatable-column name="Actions" [resizeable]="false" [sortable]="false" [draggable]="false" [flexGrow]="2">\n                    <ng-template let-row="row" ngx-datatable-cell-template>\n                        <button (click)="editUser(row)" class="btn btn-primary" title="Edit User">\n                            <i class="fa fa-edit"></i>\n                        </button>\n                        <button (click)="deleteUser(row)" class="btn btn-danger" title="Delete User">\n                            <i class="fa fa-times"></i>\n                        </button>\n                    </ng-template>\n                </ngx-datatable-column>\n            </ngx-datatable>\n        </div>\n\n        <div id="roleSettings" class="tab-pane fade">\n            <settings-roles-component></settings-roles-component>\n        </div>\n    </div>\n</div>'},555:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,".settingsMain {\n\tpadding: 10px 15px;\n}\n\n.settingsMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n\twhite-space: initial;\n}\n\n#roleModalBody .resourceGroup {\n\tpadding: 5px;\n}\n\n#roleModalBody .resourceGroup.odd {\n\tbackground-color: #EEE;\n}\n\n\n#roleModalBody .resourceGroup .row {\n\tpadding-bottom: 5px;\n}\n\n#roleModalBody .required,\n#userModalBody .required {\n\tcolor: crimson;\n\tmargin-left: 5px;\n}\n\n.settingsMain input[type=checkbox].form-control,\n.settingsMain input[type=radio].form-control,\n#userModalBody input[type=checkbox].form-control,\n#userModalBody input[type=radio].form-control {\n\twidth: 34px;\n\tmargin: 0 5px;\n}",""])},556:function(t,e,n){var o=n(555);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},557:function(t,e){t.exports='<div class="modal-header">\n\t<h4 class="modal-title">{{title}}</h4>\n</div>\n<div id="userModalBody" class="modal-body">\n\t<div class="container-fluid">\n\t\t<div class="row">\n\t\t\t<form #userForm="ngForm" (ngSubmit)="submit()">\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="username">\n\t\t\t\t\t\t\tUsername\n\t\t\t\t\t\t\t<i class="fa fa-asterisk required" title="This field is required."></i>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingUser.username" name="username" #username="ngModel" required>\n\t\t\t\t\t\t<div *ngIf="username.errors && (username.dirty || username.touched)" class="alert alert-danger">\n\t\t\t\t\t\t\t<div [hidden]="!username.errors.required">\n\t\t\t\t\t\t\t\tUsername is required.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="active">Active</label>\n\t\t\t\t\t\t<input type="checkbox" class="form-control" [(ngModel)]="workingUser.active" name="active">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="role_ids">\n\t\t\t\t\t\t\tRoles\n\t\t\t\t\t\t\t<i class="fa fa-asterisk required" title="At least one role is required."></i>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<select2 [data]="roleSelectData" [value]="roleSelectInitialValue" [options]="roleSelectConfig"\n\t\t\t\t\t\t(valueChanged)="roleSelectChange($event)"></select2>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group" *ngIf="workingUser.id">\n\t\t\t\t\t\t<label for="currentPassword">Current Password</label>\n\t\t\t\t\t\t<input type="password" class="form-control" [(ngModel)]="workingUser.currentPassword" #currentPassword="ngModel" name="currentPassword">\n\t\t\t\t\t\t<div *ngIf="currentPassword.errors && (currentPassword.dirty || currentPassword.touched)" class="alert alert-danger">\n\t\t\t\t\t\t\t<div [hidden]="!currentPassword.errors.required">\n\t\t\t\t\t\t\t\tThe user\'s current password is required.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="newPassword">\n\t\t\t\t\t\t\tNew Password\n\t\t\t\t\t\t\t<i *ngIf="!this.workingUser.id" class="fa fa-asterisk required" title="This field is required."></i>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type="password" class="form-control" [(ngModel)]="workingUser.newPassword" #newPassword="ngModel" name="newPassword">\n\t\t\t\t\t\t<div *ngIf="((currentPassword && currentPassword.value) || !workingUser.id) && (newPassword.dirty || newPassword.touched) && !newPassword.value"\n\t\t\t\t\t\t\tclass="alert alert-danger">\n\t\t\t\t\t\t\tPassword is required.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="confirmNewPassword">\n\t\t\t\t\t\t\tConfirm New Password\n\t\t\t\t\t\t\t<i *ngIf="!this.workingUser.id" class="fa fa-asterisk required" title="This field is required."></i>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t\t<input type="password" class="form-control" [(ngModel)]="workingUser.confirmNewPassword" #confirmNewPassword="ngModel" name="confirmNewPassword">\n\t\t\t\t\t\t<div *ngIf="confirmNewPassword.dirty && confirmNewPassword.touched && confirmNewPassword.value && newPassword.value !== confirmNewPassword.value"\n\t\t\t\t\t\t\tclass="alert alert-danger">\n\t\t\t\t\t\t\tPasswords do not match.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div *ngIf="confirmNewPassword.dirty && confirmNewPassword.touched && !confirmNewPassword.value" class="alert alert-danger">\n\t\t\t\t\t\t\tYou must re-enter the new password to confirm.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t</div>\n</div>\n<div class="modal-footer">\n\t<button type="button" class="btn btn-secondary" (click)="activeModal.dismiss()">Undo Changes and Close</button>\n\t<button type="button" class="btn btn-primary" [disabled]="!userForm.form.valid || !workingUser.role_ids.length" (click)="submit()">{{submitText}}</button>\n</div>'},558:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,"#main.metricsMain {\n\tpadding: 10px 15px;\n}\n\n.metricsMain .box-title {\n\tfont-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n\tfont-weight: bold;\n}\n\n.metricsMain .form-control.input-sm {\n\tmargin-left: 10px;\n}\n\n.metricsMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n\twhite-space: initial;\n}",""])},559:function(t,e,n){var o=n(558);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},560:function(t,e,n){var o=n(559);t.exports="string"==typeof o?o:o.toString()},561:function(t,e){t.exports='<div id="main" class="metricsMain">\n\t<ul class="nav nav-tabs" role="tablist">\n\t\t<li class="active"><a href="#workflows" data-toggle="tab" role="tab">Workflow Metrics</a></li>\n\t\t<li><a href="#apps" data-toggle="tab" role="tab">App Metrics</a></li>\n\t</ul>\n\t<div class="tab-content">\n\t\t<div id="workflows" class="tab-pane fade in active">\n\t\t\t<h1>Workflow Metrics</h1>\n\n\t\t\t<ngx-datatable #workflowMetricsTable class=\'material expandable workflowMetricsTable\' [columnMode]="\'flex\'" [rows]="workflowMetrics"\n\t\t\t [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [sorts]="[{prop: \'name\', dir: \'asc\'}]" [limit]="25">\n\t\t\t\t\x3c!-- Column Templates --\x3e\n\t\t\t\t<ngx-datatable-column name="Name" prop="name" [flexGrow]="4"></ngx-datatable-column>\n                <ngx-datatable-column name="Executions (Average Time)" prop="display_text" [flexGrow]="1"></ngx-datatable-column>\n\t\t\t</ngx-datatable>\n\t\t</div>\n\t\t<div id="apps" class="tab-pane fade">\n\t\t\t\t<h1>App Metrics</h1>\n\t\n\t\t\t\t<div class="row">\n\t\t\t\t\t<div class="col-xs-offset-7 col-xs-5">\n\t\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t\t<select2 [data]="availableApps" [value]="" [options]="appSelectConfig" (valueChanged)="appSelectChange($event)"></select2>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\n\t\t\t\t<ngx-datatable #appMetricsTable class=\'material expandable appMetricsTable\' [columnMode]="\'flex\'" [rows]="displayAppMetrics()" [sortType]="\'multi\'"\n\t\t\t\t [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [sorts]="[{prop: \'app\', dir: \'asc\'}, {prop: \'action\', dir: \'asc\'}]" [limit]="25">\n\t\t\t\t\t\x3c!-- Column Templates --\x3e\n\t\t\t\t\t<ngx-datatable-column name="App" prop="app" [flexGrow]="2"></ngx-datatable-column>\n\t\t\t\t\t<ngx-datatable-column name="Action" prop="action" [flexGrow]="2"></ngx-datatable-column>\n\t\t\t\t\t<ngx-datatable-column name="Successful Executions (Average Time)" prop="success" [flexGrow]="1"></ngx-datatable-column>\n\t\t\t\t\t<ngx-datatable-column name="Failed Executions (Average Time)" prop="error" [flexGrow]="1"></ngx-datatable-column>\n\t\t\t\t</ngx-datatable>\n\t\t\t</div>\n\t</div>\n</div>'},562:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,"#main.casesMain {\n\tpadding: 10px 15px;\n}\n\n.casesMain .box-title {\n\tfont-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n\tfont-weight: bold;\n}\n\n.casesMain .form-control.input-sm {\n\tmargin-left: 10px;\n}\n\n.casesMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n\twhite-space: initial;\n}",""])},563:function(t,e,n){var o=n(562);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},564:function(t,e,n){var o=n(563);t.exports="string"==typeof o?o:o.toString()},565:function(t,e){t.exports='<div id="main" class="casesMain">\n\t<ul class="nav nav-tabs" role="tablist">\n\t\t<li class="active"><a href="#events" data-toggle="tab" role="tab">Case Event Log</a></li>\n\t\t<li><a href="#cases" data-toggle="tab" role="tab">Case Management</a></li>\n\t</ul>\n\t<div class="tab-content">\n\t\t<div id="events" class="tab-pane fade in active">\n\t\t\t<h1>Case Event Log</h1>\n\n\t\t\t<div class="row">\n\t\t\t\t<div class="box-header col-xs-2">\n\t\t\t\t\t<h3 class="box-title">Events</h3>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-5">\n\t\t\t\t\t<select2 [data]="availableCases" [value]="" [options]="caseSelectConfig" (valueChanged)="caseSelectChange($event)"></select2>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-5">\n\t\t\t\t\t<div class="form-group row">\n\t\t\t\t\t\t<label class="col-xs-2 col-form-label">Search Filter</label>\n\t\t\t\t\t\t<div class="col-xs-10">\n\t\t\t\t\t\t\t<input class="form-control" [formControl]="eventFilterQuery" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<ngx-datatable #eventsTable class=\'material expandable eventsTable\' [columnMode]="\'flex\'" [rows]="displayCaseEvents" [sortType]="\'multi\'"\n\t\t\t [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [sorts]="[{prop: \'timestamp\', dir: \'desc\'}]" [limit]="25">\n\t\t\t\t\x3c!-- Column Templates --\x3e\n\t\t\t\t<ngx-datatable-column name="ID" prop="id" [flexGrow]="1"></ngx-datatable-column>\n\t\t\t\t<ngx-datatable-column name="Timestamp" prop="timestamp" [flexGrow]="2"></ngx-datatable-column>\n\t\t\t\t<ngx-datatable-column name="Type" prop="type" [flexGrow]="2"></ngx-datatable-column>\n\t\t\t\t<ngx-datatable-column name="Originator" prop="originator" [flexGrow]="2"></ngx-datatable-column>\n\t\t\t\t<ngx-datatable-column name="Data" [sortable]="false" [flexGrow]="4">\n\t\t\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t\t\t{{getFriendlyObject(row.data)}}\n\t\t\t\t\t</ng-template>\n\t\t\t\t</ngx-datatable-column>\n\t\t\t\t<ngx-datatable-column name="Message" prop="message" [flexGrow]="3"></ngx-datatable-column>\n\t\t\t</ngx-datatable>\n\t\t</div>\n\t\t<div id="cases" class="tab-pane fade">\n\t\t\t<h1>Case Management</h1>\n\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<button (click)="addCase()" class="btn btn-primary"><i class="fa fa-plus"></i>Add Case</button>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group row">\n\t\t\t\t\t\t<label class="col-xs-2 col-form-label">Search Filter</label>\n\t\t\t\t\t\t<div class="col-xs-10">\n\t\t\t\t\t\t\t<input class="form-control" [formControl]="caseFilterQuery" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<ngx-datatable #casesTable class=\'material expandable casesTable\' [columnMode]="\'flex\'" [rows]="displayCases"\n\t\t\t [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [sorts]="[{prop: \'name\', dir: \'asc\'}]" [limit]="25">\n\t\t\t\t\x3c!-- Column Templates --\x3e\n\t\t\t\t<ngx-datatable-column name="Name" prop="name" [flexGrow]="1"></ngx-datatable-column>\n\t\t\t\t<ngx-datatable-column name="Note" prop="note" [flexGrow]="2"></ngx-datatable-column>\n\t\t\t\t<ngx-datatable-column name="Actions" [resizeable]="false" [sortable]="false" [draggable]="false" [flexGrow]="2">\n\t\t\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t\t\t<button (click)="editCase(row)" class="btn btn-primary" title="Edit Case"><i class="fa fa-edit"></i></button>\n\t\t\t\t\t\t<button (click)="deleteCase(row)" class="btn btn-danger" title="Delete Case"><i class="fa fa-times"></i></button>\n\t\t\t\t\t</ng-template>\n\t\t\t\t</ngx-datatable-column>\n\t\t\t</ngx-datatable>\n\t\t</div>\n\t</div>\n</div>'},566:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,".casesModal > .modal-dialog {\n\twidth: 95%;\n}\n.caseSubscriptionCol {\n\toverflow: auto;\n}\n.eventsList {\n\tlist-style: none;\n\tpadding-left: 0;\n}\n#caseSubscriptionsTree {\n\tuser-select: none;\n\t-webkit-user-select: none;  /* Chrome all / Safari all */\n\t-moz-user-select: none;     /* Firefox all */\n\t-ms-user-select: none;      /* IE 10+ */\n}\n\t#caseSubscriptionsTree .node circle {\n\t\tfill: #fff;\n\t\tstroke: steelblue;\n\t\tstroke-width: 3px;\n\t\tcursor: pointer;\n\t}\n\t#caseSubscriptionsTree .node.highlighted circle, \n\t#caseSubscriptionsTree .node.highlighted.included circle{\n\t\tstroke: red;\n\t}\n\t#caseSubscriptionsTree .node.included circle {\n\t\tstroke: black;\n\t}\n\t#caseSubscriptionsTree .node text {\n\t\tfont: 12px sans-serif;\n\t\tcursor: pointer;\n\t}\n\t#caseSubscriptionsTree .node.included text {\n\t\tfont-weight: bold;\n\t}\n\t#caseSubscriptionsTree .link {\n\t\tfill: none;\n\t\tstroke: #ccc;\n\t\tstroke-width: 2px;\n\t}",""])},567:function(t,e,n){var o=n(566);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},568:function(t,e,n){var o=n(567);t.exports="string"==typeof o?o:o.toString()},569:function(t,e){t.exports='<div class="modal-header">\n\t<h4 class="modal-title">{{title}}</h4>\n</div>\n<div class="modal-body">\n\t<div class="container-fluid">\n\t\t<div class="row">\n\t\t\t<form #caseForm="ngForm" (ngSubmit)="submit()">\n\t\t\t\t<div class="col-xs-3">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Name</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingCase.name" name="name" #name="ngModel" required>\n\t\t\t\t\t\t<div *ngIf="name.errors && (name.dirty || name.touched)" class="alert alert-danger">\n\t\t\t\t\t\t\t<div [hidden]="!name.errors.required">\n\t\t\t\t\t\t\t\tName is required.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-9">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Note</label>\n\t\t\t\t\t\t<input type="textarea" class="form-control" [(ngModel)]="workingCase.note" #note="ngModel" name="note">\n\t\t\t\t\t\t\x3c!--<div *ngIf="note.errors && (note.dirty || note.touched)" class="alert alert-danger">\n\t\t\t\t\t\t\t<div [hidden]="!note.errors.required">\n\t\t\t\t\t\t\t\tThe note is required.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>--\x3e\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>\n\t\t<div class="row">\n\t\t\t<div class="col-xs-10 caseSubscriptionCol">\n\t\t\t\t<svg overflow="scroll" id="caseSubscriptionsTree"></svg>\n\t\t\t</div>\n\t\t\t<div class="col-xs-2 caseSubscriptionCol">\n\t\t\t\t<h3 [hidden]="!selectedNode.name">Selected events for {{selectedNode.type}} node "{{selectedNode.name}}"</h3>\n\t\t\t\t<ul class="eventsList">\n\t\t\t\t\t<li *ngFor="let event of workingEvents">\n\t\t\t\t\t\t<input type="checkbox" [value]="event.isChecked" [checked]="event.isChecked"\n\t\t\t\t\t\t\t(change)="handleEventSelectionChange(event, $event.target.checked)"> {{event.name}}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li *ngIf="selectedNode.name && !workingEvents.length">\n\t\t\t\t\t\t<i>No events available for this node.</i>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="modal-footer">\n\t<button type="button" class="btn btn-secondary" (click)="activeModal.dismiss()">Undo Changes and Close</button>\n\t<button type="button" class="btn btn-primary" [disabled]="!caseForm.form.valid" (click)="submit()">{{submitText}}</button>\n</div>'},570:function(t,e){t.exports='<div id="main" class="messagesMain">\n\t<h1>Messages</h1>\n\n\t<div class="row">\n\t\t<div class="col-xs-6">\n\t\t\t<button (click)="deleteSelected()" class="btn btn-secondary" title="Delete Selected">\n\t\t\t\t<i class="fa fa-trash-o"></i>\n\t\t\t</button>\n\t\t\t<button (click)="markSelectedAsRead()" class="btn btn-secondary" title="Mark Selected as Read">\n\t\t\t\t<i class="fa fa-envelope-open-o"></i>\n\t\t\t</button>\n\t\t\t<button (click)="markSelectedAsUnread()" class="btn btn-secondary" title="Mark Selected as Unread">\n\t\t\t\t<i class="fa fa-envelope-o"></i>\n\t\t\t</button>\n\t\t</div>\n\t\t<div class="col-xs-6">\n\t\t\t<div class="form-group row">\n\t\t\t\t<label class="col-xs-2 col-form-label">Search Filter</label>\n\t\t\t\t<div class="col-xs-10">\n\t\t\t\t\t<input class="form-control" [formControl]="filterQuery" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<template ngbModalContainer></template>\n\t<ngx-datatable #messagesTable class=\'material expandable\' [columnMode]="\'flex\'" [rows]="displayMessages" [sortType]="\'multi\'"\n\t [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [sorts]="[{prop: \'created_at\', dir: \'desc\'}]" [limit]="25">\n\t\t\x3c!-- Column Templates --\x3e\n\t\t<ngx-datatable-column name="" [resizeable]="false" [sortable]="false" [draggable]="false" [flexGrow]="0">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t<input type="checkbox" [(ngModel)]="selectMapping[row.id]">\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Subject" prop="subject" [flexGrow]="2">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t<div>\n\t\t\t\t\t<i *ngIf="row.awaiting_response" class="fa fa-exclamation required" title="This message is awaiting response."></i>\n\t\t\t\t\t<a href="#" class="messageLink" [class.unread]="!row.is_read" (click)="openMessage($event, row)">\n\t\t\t\t\t\t{{utils.getDefaultString(row.subject, \'(no subject)\')}}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Sent" prop="created_at" [flexGrow]="1">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t<span [title]="utils.getLocalTime(row.created_at)">\n\t\t\t\t\t{{messageRelativeTimes[row.id]}}\n\t\t\t\t</span>\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t</ngx-datatable>\n</div>'},571:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,".messagesMain {\n\tpadding: 10px 15px;\n}\n\n.messagesMain .unread {\n\tfont-weight: bold;\n}\n\n.messagesMain .required {\n\tcolor: crimson;\n}",""])},572:function(t,e,n){var o=n(571);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},573:function(t,e){t.exports='<div class="modal-header">\n\t<h4 class="modal-title">\n\t\t{{message.subject}}\n\t\t<button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="dismiss()">\n\t\t  <span aria-hidden="true">&times;</span>\n\t\t</button>\n\t</h4>\n</div>\n<div id="messageModalBody" class="modal-body">\n\t<div class="container-fluid">\n\t\t<div *ngIf="message.read_by && message.read_by.length">\n\t\t\t<i>Read by: {{message.read_by.join(\', \')}}</i>\n\t\t</div>\n\t\t<div *ngIf="message.responded_by">\n\t\t\t<i>\n\t\t\t\tResponded by: {{message.responded_by}}\n\t\t\t\t<span [title]="utils.getLocalTime(message.responded_at)">({{utils.getRelativeLocalTime(message.responded_at)}})</span>\n\t\t\t</i>\n\t\t</div>\n\t\t<div *ngFor="let body of message.body">\n\t\t\t<p *ngIf="body.type === \'text\'">{{body.data.text}}</p>\n\t\t\t<a *ngIf="body.type === \'url\'" [href]="body.data.url">{{body.data.title ? body.data.title : body.data.url}}</a>\n\t\t\t<div *ngIf="body.type === \'accept_decline\'">\n\t\t\t\t<button type="button" class="btn btn-secondary" (click)="performMessageAction(\'decline\')" [disabled]="!message.awaiting_response">Decline</button>\n\t\t\t\t<button type="button" class="btn btn-primary" (click)="performMessageAction(\'accept\')" [disabled]="!message.awaiting_response">Accept</button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n\x3c!-- <div class="modal-footer">\n\t<button type="button" class="btn btn-secondary" (click)="dismiss()">Undo Changes and Close</button>\n\t<button type="button" class="btn btn-primary" [disabled]="!roleForm.form.valid" (click)="submit()">{{submitText}}</button>\n</div> --\x3e'},574:function(t,e){t.exports='<div id="main" class="devicesMain">\n    <h1>Device Management</h1>\n\n    <div class="row">\n        <div class="col-xs-2">\n            <button (click)="addDevice()" class="btn btn-primary"><i class="fa fa-plus"></i>Add Device</button>\n        </div>\n        <div class="col-xs-5">\n            <select2 [data]="availableApps" [options]="appSelectConfig" (valueChanged)="appSelectChange($event)"></select2>\n        </div>\n        <div class="col-xs-5">\n            <div class="form-group row">\n                <label class="col-xs-2 col-form-label">Search Filter</label>\n                <div class="col-xs-10">\n                    <input class="form-control" [formControl]="filterQuery" />\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <ngx-datatable #deviceTable class=\'material expandable\' [columnMode]="\'flex\'" [rows]="displayDevices" [sortType]="\'multi\'"\n     [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [sorts]="[{prop: \'name\', dir: \'asc\'}]" [limit]="25">\n        \x3c!-- Column Templates --\x3e\n        <ngx-datatable-column name="Name" prop="name" [flexGrow]="2"></ngx-datatable-column>\n        <ngx-datatable-column name="App" prop="app_name" [flexGrow]="2"></ngx-datatable-column>\n        <ngx-datatable-column name="Type" prop="type" [flexGrow]="2"></ngx-datatable-column>\n        <ngx-datatable-column name="Fields" [sortable]="false" [flexGrow]="5">\n            <ng-template let-row="row" ngx-datatable-cell-template>\n                {{getCustomFields(row)}}\n            </ng-template>\n        </ngx-datatable-column>\n        <ngx-datatable-column name="Actions" [resizeable]="false" [sortable]="false" [draggable]="false" [flexGrow]="2">\n            <ng-template let-row="row" ngx-datatable-cell-template>\n                <button (click)="editDevice(row)" class="btn btn-primary" title="Edit Device"><i class="fa fa-edit"></i></button>\n                <button (click)="deleteDevice(row)" class="btn btn-danger" title="Delete Device"><i class="fa fa-times"></i></button>\n            </ng-template>\n        </ngx-datatable-column>\n    </ngx-datatable>\n</div>'},575:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,"#main.devicesMain {\n\tpadding: 10px 15px;\n}\n\n.devicesMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n\twhite-space: initial;\n}\n\n#deviceForm input[type=checkbox].form-control {\n\twidth: 34px;\n\tmargin: 0 5px;\n}\n\n#deviceForm .confirmLabel {\n\tmargin-top: 15px;\n}\n\n#deviceForm .required {\n\tcolor: crimson;\n}\n\n#deviceForm .fa {\n\tmargin-left: 5px;\n}",""])},576:function(t,e,n){var o=n(575);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},577:function(t,e){t.exports='<div class="modal-header">\n\t<h4 class="modal-title">{{title}}</h4>\n</div>\n<div class="modal-body">\n\t<div class="container-fluid">\n\t\t<form id="deviceForm" #deviceForm="ngForm" (ngSubmit)="submit()">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Name<i class="fa fa-asterisk required" title="This field is required."></i></label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingDevice.name" #name="ngModel" name="name" required tabindex="1">\n\t\t\t\t\t\t<div *ngIf="name.errors && (name.dirty || name.touched)" class="alert alert-danger">\n\t\t\t\t\t\t\t<div [hidden]="!name.errors.required">\n\t\t\t\t\t\t\t\tName is required.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="app_name">Associated App<i class="fa fa-asterisk required" title="This field is required."></i></label>\n\t\t\t\t\t\t<select class="form-control" [ngModel]="workingDevice.app_name" #app="ngModel" (change)="handleAppSelection($event, $event.target.value)" \n\t\t\t\t\t\t [disabled]="workingDevice.id" name="app_name" tabindex="3" required>\n\t\t\t\t\t\t\t<option value=""></option>\n\t\t\t\t\t\t\t<option *ngFor="let i of appNames" [value]="i" [label]="i">{{i}}</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<div *ngIf="app.errors && (app.dirty || app.touched)" class="alert alert-danger">\n\t\t\t\t\t\t\t<div [hidden]="!app.errors.required">\n\t\t\t\t\t\t\t\tApp is required.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="description">Description</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingDevice.description" name="ip" tabindex="2">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="type">Device Type<i class="fa fa-asterisk required" title="This field is required."></i></label>\n\t\t\t\t\t\t<select class="form-control" [ngModel]="workingDevice.type" #typeRef #type="ngModel" (change)="handleDeviceTypeSelection(event, $event.target.value)"\n\t\t\t\t\t\t name="type" tabindex="4" required>\n\t\t\t\t\t\t\t<option value=""></option>\n\t\t\t\t\t\t\t<option *ngFor="let i of deviceTypesForApp" [value]="i.name" [label]="i.name">{{i.name}}</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t\t<div *ngIf="type.errors && (type.dirty || type.touched)" class="alert alert-danger">\n\t\t\t\t\t\t\t<div [hidden]="!type.errors.required">\n\t\t\t\t\t\t\t\tDevice type is required.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<ng-container *ngIf="selectedDeviceType">\n\t\t\t\t<div *ngFor="let i of selectedDeviceType.fields" class="form-group">\n\t\t\t\t\t<label for="{{i.name}}">\n\t\t\t\t\t\t{{i.name}}\n\t\t\t\t\t\t<i *ngIf="i.description != null" class="fa fa-info-circle" [title]="i.description"></i>\n\t\t\t\t\t\t<i *ngIf="i.required" class="fa fa-asterisk required" title="This field is required."></i>\n\t\t\t\t\t\t<i *ngIf="i.encrypted" class="fa fa-lock"\n\t\t\t\t\t\t title="This field will be encrypted at rest and will not be returned to the client for viewing or editing."></i>\n\t\t\t\t\t\t\x3c!-- If we have an encrypted field AND this is an edit AND there is an encrypted value on the server, allow the user to clear it if it\'s not required --\x3e\n\t\t\t\t\t\t<div *ngIf="workingDevice.id && i.encrypted && workingDevice.fields[i.name] !== undefined" class="form-check form-check-inline">\n\t\t\t\t\t\t\t<label class="form-check-label">\n\t\t\t\t\t\t\t\tClear Existing Value\n\t\t\t\t\t\t\t\t<input class="form-check-input" type="checkbox" id="inlineCheckbox1" value="option1" \n\t\t\t\t\t\t\t\t(change)="handleEncryptedFieldClear(i.name, $event.target.checked)">\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\n\t\t\t\t\t\x3c!-- Normal string text entries --\x3e\n\t\t\t\t\t<input *ngIf="i.schema.type === \'string\' && !i.schema.enum" class="form-control" name="{{i.name}}" [(ngModel)]="workingDevice.fields[i.name]"\n\t\t\t\t\t [attr.type]="i.encrypted ? \'password\' : \'text\'" [attr.minlength]="i.schema.minLength > 0 ? i.schema.minLength : null"\n\t\t\t\t\t [attr.maxlength]="i.schema.maxLength > 0 ? i.schema.maxLength : null"\n\t\t\t\t\t [attr.pattern]="i.schema.pattern ? i.schema.pattern : null" [attr.required]="i.required"\n\t\t\t\t\t [disabled]="encryptedFieldsToBeCleared[i.name]" [attr.placeholder]="i.placeholder">\n\n\t\t\t\t\t\x3c!-- Enum types, make a select box --\x3e\n\t\t\t\t\t<select *ngIf="i.schema.enum" class="form-control" name="{{i.name}}" [(ngModel)]="workingDevice.fields[i.name]"\n\t\t\t\t\t[attr.required]="i.required">\n\t\t\t\t\t\t<option *ngIf="!i.required" value=""></option>\n\t\t\t\t\t\t<option *ngFor="let i of i.schema.enum" [value]="i" [label]="i">{{i}}</option>\n\t\t\t\t\t</select>\n\n\t\t\t\t\t\x3c!-- For numbers enter number info --\x3e\n\t\t\t\t\t<input *ngIf="i.schema.type === \'number\' || i.schema.type === \'integer\'" class="form-control" name="{{i.name}}"\n\t\t\t\t\t [(ngModel)]="workingDevice.fields[i.name]" type="number" [attr.min]="getMin(i.schema)" [attr.max]="getMax(i.schema)"\n\t\t\t\t\t [attr.step]="i.schema.multipleOf > 0 ? i.schema.multipleOf : null" [attr.required]="i.required"\n\t\t\t\t\t [attr.placeholder]="i.placeholder">\n\n\t\t\t\t\t\x3c!-- Checkbox for boolean values --\x3e\n\t\t\t\t\t<input *ngIf="i.schema.type === \'boolean\'" type="checkbox" class="form-control" name="{{i.name}}" [(ngModel)]="workingDevice.fields[i.name]">\n\n\t\t\t\t\t\x3c!-- Repeat input for encrypted fields --\x3e\n\t\t\t\t\t<ng-container *ngIf="encryptedConfirmFields[i.name] !== undefined">\n\t\t\t\t\t\t<label for="_{{i.name}}" class="confirmLabel">Repeat {{i.name}}</label>\n\t\t\t\t\t\t<input type="password" class="form-control" name="_{{i.name}}" [(ngModel)]="encryptedConfirmFields[i.name]"\n\t\t\t\t\t\t[disabled]="encryptedFieldsToBeCleared[i.name]" placeholder="Enter the value for {{i.name}} again" required>\n\t\t\t\t\t</ng-container>\n\n\t\t\t\t\t\x3c!-- Validation errors go here if they exist --\x3e\n\t\t\t\t\t<div *ngIf="validationErrors[i.name]" class="alert alert-danger">\n\t\t\t\t\t\t{{validationErrors[i.name]}}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ng-container>\n\t\t</form>\n\t</div>\n</div>\n<div class="modal-footer">\n\t<button type="button" class="btn btn-secondary" (click)="activeModal.dismiss()">Undo Changes and Close</button>\n\t<button type="button" class="btn btn-primary" [disabled]="!isBasicInfoValid()" (click)="submit()">{{submitText}}</button>\n</div>'},581:function(t,e){t.exports='<div id="main" class="schedulerMain">\n\t<h1>Scheduler</h1>\n\n\t<div class="row">\n\t\t<div class="col-xs-2">\n\t\t\t<button (click)="addScheduledTask()" class="btn btn-primary"><i class="fa fa-plus"></i>Add To Schedule</button>\n\t\t</div>\n\n\t\t<div class="col-xs-4">\n\t\t\t<div id="schedulerStatus">\n\t\t\t\t<h4>Scheduler Status: <span id="status">{{schedulerStatus}}</span></h4>\n\t\t\t</div>\n\t\t\t<button *ngIf="schedulerStatus && schedulerStatus !== \'running\'" (click)="changeSchedulerStatus(\'start\')" class="btn btn-primary"\n\t\t\t\tid="startSchedulerBtn" title="Start Scheduler">\n\t\t\t\t<i class="fa fa-play"></i>\n\t\t\t</button>\n\t\t\t<button *ngIf="schedulerStatus && schedulerStatus === \'running\'" (click)="changeSchedulerStatus(\'pause\')" class="btn btn-warning"\n\t\t\t\tid="pauseSchedulerBtn" title="Pause Scheduler">\n\t\t\t\t<i class="fa fa-pause"></i>\n\t\t\t</button>\n\t\t\t<button *ngIf="schedulerStatus && schedulerStatus === \'running\'" (click)="changeSchedulerStatus(\'stop\')" class="btn btn-danger"\n\t\t\t\tid="stopSchedulerBtn" title="Stop Scheduler">\n\t\t\t\t<i class="fa fa-stop"></i>\n\t\t\t</button>\n\t\t</div>\n\n\t\t<div class="col-xs-6">\n\t\t\t<div class="form-group row">\n\t\t\t\t<label class="col-xs-2 col-form-label">Search Filter</label>\n\t\t\t\t<div class="col-xs-10">\n\t\t\t\t\t<input class="form-control" [formControl]="filterQuery" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\n\t<ngx-datatable #scheduleTable class=\'material expandable scheduledTasksTable\' [columnMode]="\'flex\'" [rows]="displayScheduledTasks"\n\t [sorts]="[{prop: \'name\', dir: \'asc\'}]" [sortType]="\'multi\'" [headerHeight]="50" [footerHeight]="50" [rowHeight]="undefined" [limit]="25">\n\t\t\x3c!-- Column Templates --\x3e\n\t\t<ngx-datatable-column name="Name" prop="name" [flexGrow]="2">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t<span title="{{row.description}}">{{row.name}}</span>\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Workflow(s)" [flexGrow]="3" [sortable]="false">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t{{getFriendlyWorkflows(row)}}\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Status" prop="status" [flexGrow]="1"></ngx-datatable-column>\n\t\t<ngx-datatable-column name="Type" prop="task_trigger.type" [flexGrow]="1"></ngx-datatable-column>\n\t\t<ngx-datatable-column name="Rule" [sortable]="false" [flexGrow]="4">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t{{getRule(row)}}\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t\t<ngx-datatable-column name="Actions" [resizeable]="false" [sortable]="false" [draggable]="false" [flexGrow]="2">\n\t\t\t<ng-template let-row="row" ngx-datatable-cell-template>\n\t\t\t\t<button *ngIf="row.status === \'stopped\' || row.status === \'paused\'" (click)="changeScheduledTaskStatus(row, \'start\')" title="Start Scheduled Task"\n\t\t\t\t\tclass="btn btn-primary">\n\t\t\t\t\t<i class="fa fa-play"></i>\n\t\t\t\t</button>\n\t\t\t\t\x3c!--<button *ngIf="row.status === \'running\'\'" (click)="changeScheduledTaskStatus(row, \'pause\')" title="Pause Scheduled Task"\n\t\t\t\t\tclass="btn btn-warning">\n\t\t\t\t\t<i class="fa fa-pause"></i>\n\t\t\t\t</button>--\x3e\n\t\t\t\t<button *ngIf="row.status === \'running\' || row.status === \'paused\'" (click)="changeScheduledTaskStatus(row, \'stop\')" title="Stop Scheduled Task"\n\t\t\t\t\tclass="btn btn-danger">\n\t\t\t\t\t<i class="fa fa-stop"></i>\n\t\t\t\t</button>\n\t\t\t\t<button (click)="editScheduledTask(row)" class="btn btn-primary" title="Edit Scheduled Task">\n\t\t\t\t\t<i class="fa fa-edit"></i>\n\t\t\t\t</button>\n\t\t\t\t<button (click)="deleteScheduledTask(row)" class="btn btn-danger" title="Delete Scheduled Task">\n\t\t\t\t\t<i class="fa fa-times"></i>\n\t\t\t\t</button>\n\t\t\t</ng-template>\n\t\t</ngx-datatable-column>\n\t</ngx-datatable>\n</div>'},582:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,"/* @import '/client/node_modules/ng-pick-datetime/styles/picker.min.css'; */\n\n.schedulerMain {\n\tpadding: 10px 15px;\n}\n\n.schedulerMain #schedulerStatus {\n\tdisplay: inline-block;\n}\n\n.schedulerMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n\twhite-space: initial;\n}",""])},583:function(t,e,n){var o=n(582);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},584:function(t,e){t.exports='<div class="modal-header">\n\t<h4 class="modal-title">{{title}}</h4>\n</div>\n<div class="modal-body">\n\t<div class="container-fluid">\n\t\t<div class="form-group">\n\t\t\t<label for="name">Workflow(s)</label>\n\t\t\t\x3c!--No two-way binding available - ng-select2 package has it but requires transpiling--\x3e\n\t\t\t<select2 [data]="availableWorkflows" [value]="workingScheduledTask.workflows" [options]="workflowSelectConfig"\n\t\t\t\tname="workflows" tabindex="2" (valueChanged)="workflowsSelectChanged($event)"></select2>\n\t\t</div>\n\t\t<div class="row">\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label for="name">Name</label>\n\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingScheduledTask.name" name="name" required tabindex="1">\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label for="name">Trigger Type</label>\n\t\t\t\t\t<select class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.type" name="type" tabindex="4" (change)="changeType($event.target.value)">\n\t\t\t\t\t\t<option value=""></option>\n\t\t\t\t\t\t<option *ngFor="let i of scheduledItemTriggerTypes" [value]="i" [label]="i">{{i}}</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-xs-6">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label for="name">Description</label>\n\t\t\t\t\t<textarea class="form-control" [(ngModel)]="workingScheduledTask.description" name="port" required tabindex="2" rows="5"></textarea>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="row" *ngIf="workingScheduledTask.task_trigger.type === \'date\'">\n\t\t\t<div class="col-xs-12">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label for="name">Run Datetime</label>\n\t\t\t\t\t<input class="form-control" [value]="workingScheduledTask.task_trigger.args.run_date | date: \'short\'" [(ngModel)]="workingScheduledTask.task_trigger.args.run_date"\n\t\t\t\t\t\tname="run_date" [minMoment]="getToday()" dateTimePicker required />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div *ngIf="workingScheduledTask.task_trigger.type === \'interval\'">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Start Datetime</label>\n\t\t\t\t\t\t<input class="form-control" [value]="workingScheduledTask.task_trigger.args.start_date | date: \'short\'" [(ngModel)]="workingScheduledTask.task_trigger.args.start_date"\n\t\t\t\t\t\t\tname="start_date" [minMoment]="getToday()" dateTimePicker required />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">End Datetime</label>\n\t\t\t\t\t\t<input class="form-control" [value]="workingScheduledTask.task_trigger.args.end_date | date: \'short\'" [(ngModel)]="workingScheduledTask.task_trigger.args.end_date"\n\t\t\t\t\t\t\tname="end_date" [minMoment]="getToday()" dateTimePicker />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-2">\n\t\t\t\t\t<h3>Occur every...</h3>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-2">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Weeks</label>\n\t\t\t\t\t\t<input type="number" min="0" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.weeks" name="weeks" required>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-2">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Days</label>\n\t\t\t\t\t\t<input type="number" min="0" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.days" name="days" required>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-2">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Hours</label>\n\t\t\t\t\t\t<input type="number" min="0" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.hours" name="hours" required>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-2">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Minutes</label>\n\t\t\t\t\t\t<input type="number" min="0" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.minutes" name="minutes"\n\t\t\t\t\t\t\trequired>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-2">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Seconds</label>\n\t\t\t\t\t\t<input type="number" min="0" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.seconds" name="seconds"\n\t\t\t\t\t\t\trequired>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div *ngIf="workingScheduledTask.task_trigger.type === \'cron\'">\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Start Datetime</label>\n\t\t\t\t\t\t<input class="form-control" [value]="workingScheduledTask.task_trigger.args.start_date | date: \'short\'" [(ngModel)]="workingScheduledTask.task_trigger.args.start_date"\n\t\t\t\t\t\t\tname="start_date" [minMoment]="getToday()" dateTimePicker required />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-6">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">End Datetime</label>\n\t\t\t\t\t\t<input class="form-control" [value]="workingScheduledTask.task_trigger.args.end_date | date: \'short\'" [(ngModel)]="workingScheduledTask.task_trigger.args.end_date"\n\t\t\t\t\t\t\tname="end_date" [minMoment]="getToday()" dateTimePicker />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="row">\n\t\t\t\t<div class="col-xs-3">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Year</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.year" name="year">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Day</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.day" name="day">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-3">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Month</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.month" name="month">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Hour</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.hour" name="hour">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-3">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Week</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.week" name="week">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Minute</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.minute" name="minute">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="col-xs-3">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Day of Week</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.day_of_week" name="day_of_week">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<label for="name">Second</label>\n\t\t\t\t\t\t<input type="text" class="form-control" [(ngModel)]="workingScheduledTask.task_trigger.args.second" name="second">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n<div class="modal-footer">\n\t<button type="button" class="btn btn-secondary" (click)="activeModal.dismiss()">Undo Changes and Close</button>\n\t<button type="button" class="btn btn-primary" (click)="submit()">{{submitText}}</button>\n</div>'},592:function(t,e,n){(t.exports=n(29)(!1)).push([t.i,'/* @import \'/client/node_modules/cytoscape-panzoom/cytoscape.js-panzoom.css\';\n@import \'/client/node_modules/ng2-dnd/bundles/style.css\'; */\n\n#main.playbookMain {\n\tpadding: 10px 15px 0 15px;\n}\n\n.playbookMain .parametersEditor .failure {\n    color: crimson;\n}\n\n#playbookToolbar {\n\tbackground-color: #aecbdc;\n\tmargin-left: 0;\n\tmargin-bottom: 5px;\n\tborder: 1px solid #8b9aa3;\n\tborder-radius: 5px;\n}\n\n#playbookToolbar .btn-default {\n\tbackground-color: #aecbdc;\n\tborder-color: #aecbdc;\n}\n\n#playbookToolbar .btn-default:hover {\n\tbackground-color: #eaf2f6;\n\tborder-color: #eaf2f6;\n\tmargin: 0;\n\tborder-radius: 0;\n}\n\n#playbookToolbar .btn-group {\n\tborder-right: 1px solid #8b9aa3;\n}\n\n#playbookToolbar .btn-group>.btn:first-child {\n\tmargin: 0;\n\tpadding: 10px;\n}\n\n#playbookToolbar .btn-toolbar>.btn, .btn-toolbar>.btn-group, .btn-toolbar>.input-group {\n\tmargin-left: 0;\n}\n\n#playbookToolbar .form-control.workflowNameInput {\n\tdisplay: inline-block;\n\twidth: auto;\n}\n\n#currentWorkflowText {\n\tmargin-left: 20px;\n\tmargin-top: 10px;\n\tfont-size: 18px;\n}\n\n.consoleRow {\n    padding:10px;\n}\n\n/* Console Row = 200px */\n.playbookMain .graphEditorRow, .playbookMain .graphEditorColumn {\n\theight: calc(100vh - 310px);\n\toverflow: auto;\n}\n\n.playbookMain .panel-heading.playbook-heading {\n\tcursor: pointer;\n}\n\n#playbookEditorTabs {\n\tdisplay: inline-block;\n\tvertical-align: top;\n\theight: 100%;\n\twidth:100%;\n\tposition: inherit;\n\tbackground: transparent;\n}\n\n#cy {\n\t/* display: inline-block; */\n\t/* vertical-align: top; */\n\twidth: 100%;\n\theight: 100%;\n}\n\n/* Need to do this else panzoom appears above modals */\n#cy .cy-panzoom {\n\tz-index: 10;\n}\n\n#cy-instructions {\n\tpadding: 20px;\n\tfont-size: 25px;\n}\n\n#cy-json-data {\n\tbackground-color: white;\n\tcolor: black;\n\tfont-weight: normal;\n\theight: 630px;\n\twidth: 500px;\n\tresize: none;\n}\n\n.playbookMain #accordion .panel-heading .panel-title:after {\n\t/* symbol for "opening" panels */\n\tfont: normal normal normal 14px/1 FontAwesome;\n\tfont-size: inherit;\n\ttext-rendering: auto;\n\tcontent: "\\F078";    /* adjust as needed, taken from bootstrap.css */\n\tfloat: right;        /* adjust as needed */\n\tcolor: grey;         /* adjust as needed */\n}\n\n#app_search_bar_container {\n  position: relative;\n  &:after {\n    content: \'\\E003\';\n    width: 18px;\n    height: 18px;\n    position: absolute;\n    right: 10px;\n    bottom: 10px;\n  }\n}\n#app_search_bar {\n    display: block;\n    margin: 10px auto;\n    width: 100%;\n    padding: 7px 10px;\n    border: 1px solid $grey;\n    border-radius: 25px;\n    outline: 0;\n}\n.playbookMain #accordion .panel-heading.collapsed .panel-title:after {\n\t/* symbol for "collapsed" panels */\n\tcontent: "\\F054";    /* adjust as needed, taken from bootstrap.css */\n}\n\n.playbookMain .panel-default>.panel-heading {\n\tbackground-color: #eaf2f6;\n\tfont-weight: bolder;\n}\n\n.playbookMain .parametersEditor input[type=checkbox].form-control {\n\twidth: 34px;\n\tmargin: 0 5px;\n}\n\n.playbookMain .parametersEditor .form-group.argument {\n\tmargin-bottom: 5px;\n\tpadding: 5px;\n}\n\n.playbookMain .parametersEditor .form-group.argument.odd {\n\tbackground-color: #EEE;\n}\n\n.playbookMain .parametersEditor .indent {\n\tborder-left: 3px solid #DDD;\n\tborder-top: 1px solid #DDD;\n\tborder-bottom: 1px solid #DDD;\n\tpadding: 5px 0 5px 15px;\n\tmargin-top: 5px;\n\tmargin-bottom: 5px;\n}\n\n.playbookMain .parametersEditor .addBar {\n\tmargin-bottom: 10px;\n}\n\n.playbookMain .parametersEditor .addBar button {\n\tmargin-top: 25px;\n}\n\n.playbookMain .parametersEditor .propertyHeader {\n\tmargin-bottom: 5px;\n}\n\n.playbookMain .parametersEditor .required {\n\tcolor: crimson;\n\tmargin-left: 5px;\n}\n\n.playbookMain ngx-datatable datatable-body datatable-body-row datatable-body-cell .datatable-body-cell-label {\n\twhite-space: initial;\n}\n\n#workflowsModal .workflowPanel a {\n\tcursor: pointer;\n}\n\n#workflowsModal .panel-heading h4 {\n\tmin-height: 30px;\n}\n\n#workflowsModal .importContainer {\n\tmargin-bottom: 5px;\n}\n\n#workflowsModal .importContainer h4 {\n\tdisplay: inline-block;\n}\n\n#workflowsModal .importPlaybookInput {\n\tdisplay: inline-block;\n}\n\n#workflowsModal .modal-title,\n#executionResultsModal .modal-title,\n#playbookAndWorkflowActionModal .modal-title {\n\tdisplay: inline-block;\n}\n\n#executionResultsModal > .modal-dialog {\n\twidth: 95%;\n}',""])},593:function(t,e,n){var o=n(592);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0};n(28)(o,a);o.locals&&(t.exports=o.locals)},594:function(t,e,n){var o=n(593);t.exports="string"==typeof o?o:o.toString()},595:function(t,e){t.exports='<div id="main" class="playbookMain">\n    \x3c!-- Graph editor toolbar --\x3e\n    <div id="playbookToolbar" class=btn-toolbar role=toolbar>\n        <div class="btn-group" role="group">\n            <button id="new-button" type="button" class="btn btn-default" data-toggle="tooltip" title="New Workflow" (click)="newWorkflowModal()">\n                <i class="fa fa-file-o"></i>\n            </button>\n        </div>\n        <div class="btn-group" role="group">\n            <button id="load-button" type="button" class="btn btn-default" data-toggle="modal" data-target="#workflowsModal" title="Load Workflow">\n                <i class="fa fa-folder-open-o"></i>\n            </button>\n        </div>\n        <div class="btn-group" role="group">\n            <button id="save-button" type="button" class="btn btn-default" data-toggle="tooltip" title="Save Workflow" [disabled]="!loadedWorkflow"\n                (click)="save()">\n                <i class="fa fa-save"></i>\n            </button>\n        </div>\n        <div class="btn-group" role="group">\n            <button id="remove-button" type="button" class="btn btn-default" data-toggle="tooltip" title="Delete Selected Nodes" [disabled]="!loadedWorkflow"\n                (click)="removeSelectedNodes()">\n                <i class="fa fa-trash-o"></i>\n            </button>\n        </div>\n        <div class="btn-group" role="group">\n            <button id="undo-button" type="button" class="btn btn-default" data-toggle="tooltip" title="Undo" [disabled]="!loadedWorkflow || (ur && ur.isUndoStackEmpty())"\n                (click)="ur.undo()">\n                <i class="fa fa-undo"></i>\n            </button>\n        </div>\n        <div class="btn-group" role="group">\n            <button id="redo-button" type="button" class="btn btn-default" data-toggle="tooltip" title="Redo" [disabled]="!loadedWorkflow || (ur && ur.isRedoStackEmpty())"\n                (click)="ur.redo()">\n                <i class="fa fa-repeat"></i>\n            </button>\n        </div>\n        \x3c!-- <div class="btn-group" role="group">\n            <button id="cut-button" type="button" class="btn btn-default" data-toggle="tooltip" title="Cut" [disabled]="!loadedWorkflow"\n                (click)="cut()">\n                <span class="fa fa-cut" style="transform: rotate(-90deg);"></span>\n            </button>\n        </div> --\x3e\n        <div class="btn-group" role="group">\n            <button id="copy-button" type="button" class="btn btn-default" data-toggle="tooltip" title="Copy" [disabled]="!loadedWorkflow"\n                (click)="copy()">\n                <i class="fa fa-copy"></i>\n            </button>\n        </div>\n        <div class="btn-group" role="group">\n            <button id="paste-button" type="button" class="btn btn-default" data-toggle="tooltip" title="Paste" [disabled]="!loadedWorkflow"\n                (click)="paste()">\n                <i class="fa fa-paste"></i>\n            </button>\n        </div>\n        <div class="btn-group" role="group">\n            <button id="execute-button" type="button" class="btn btn-default" data-toggle="tooltip" title="Execute Workflow" [disabled]="!loadedWorkflow || !loadedWorkflow.is_valid"\n                (click)="executeWorkflow()">\n                <i class="fa fa-play-circle"></i>\n            </button>\n        </div>\n        <div class="btn-group" role="group">\n            <button id="clear-execution-highlighting-button" type="button" class="btn btn-default" data-toggle="tooltip" title="Clear Execution Results"\n                [disabled]="!loadedWorkflow || !loadedWorkflow.is_valid" (click)="clearExecutionResults()">\n                <i class="fa fa-eraser"></i>\n            </button>\n        </div>\n        <label *ngIf="loadedWorkflow" id="currentWorkflowText">{{loadedPlaybook.name}} -</label>\n        <input *ngIf="loadedWorkflow" type="text" class="form-control workflowNameInput" [(ngModel)]="loadedWorkflow.name" name="name"\n            required>\n        <label *ngIf="loadedWorkflow && !loadedWorkflow?.is_valid" id="currentWorkflowText">(In Progress)</label>\n    </div>\n    \x3c!-- Graph editor --\x3e\n    <div class="row graphEditorRow">\n        \x3c!-- Column for app/action display for drag and drop --\x3e\n\n        <div class="col-md-2 graphEditorColumn">\n            <div class="panel-group" id="accordion" #accordion [hidden]="!loadedWorkflow">\n                <div id="app_search_bar_container">\n                    <input type="search" id="app_search_bar" placeholder="Search" (keyup)="search_for_actions($event)"/>\n                </div>\n                <div *ngFor="let app of getAppsWithActions()" class="panel panel-default">\n                    <div class="panel-heading playbook-heading collapsed" data-toggle="collapse" [attr.data-target]="\'#actionsCollapse\' + removeWhitespace(app.name)"\n                        [title]="app.info ? app.info.description : \'\'">\n                        <h4 class="panel-title">{{app.name}}</h4>\n                    </div>\n                    <div id="actionsCollapse{{removeWhitespace(app.name)}}" class="panel-collapse collapse">\n                        <div class="panel-body">\n                            <div *ngFor="let actionApi of app.action_apis" class="panel panel-default actionPanel" dnd-draggable [dragEnabled]="true"\n                                [dragData]="{ appName: app.name, actionApi: actionApi }" (dblclick)="handleDoubleClickEvent(app.name, actionApi.name)"\n                                [title]="actionApi.description">\n                                <div class="panel-body">\n                                    <span>{{actionApi.name}}</span>\n                                    \x3c!-- <i class="fa fa-bars pull-right" aria-hidden="true"></i> --\x3e\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        \x3c!-- Actual cytoscape graph editor --\x3e\n        <div class="col-md-6 graphEditorColumn">\n            <div id="cy" #cyRef dnd-droppable (onDropSuccess)="handleDropEvent($event)" [hidden]="!loadedWorkflow" tabindex="0"></div>\n            <div id="cy-instructions" [hidden]="loadedWorkflow">\n                <p>Instructions:</p>\n                <p>\n                    <button class="btn btn-primary" data-toggle="modal" data-target="#workflowsModal">Load Workflow</button>\n                </p>\n                <p>\n                    Use this button to load the workflow into the graph. After loading an initial workflow you may use the Load Workflow button\n                    on the toolbar.\n                </p>\n                <p>\n                    <b>Drag and drop</b> items from Actions tab into the graph to create a new workflow action.\n                    <b>Double click</b> also works.\n                </p>\n            </div>\n        </div>\n\n        \x3c!-- Parameter editors --\x3e\n        <div class="col-md-4 graphEditorColumn">\n            \x3c!-- Editor for Actions --\x3e\n            <div *ngIf="!waitingOnData && selectedAction" class="parametersEditor">\n                <h3>Action Parameters</h3>\n                <div class="row">\n                    <div class="col-xs-4">\n                        <label>App:</label>\n                        <span>{{selectedAction.app_name}}</span>\n                    </div>\n                    <div class="col-xs-4">\n                        <label>Action:</label>\n                        <span>{{selectedAction.action_name}}</span>\n                    </div>\n                    <div class="col-xs-4">\n                        <button [disabled]="selectedAction.id === loadedWorkflow.start" class="btn btn-primary pull-right" (click)="setStartNode(selectedAction.id)">Set as Start Action</button>\n                    </div>\n                </div>\n                <div class="row">\n                    <div>\n                        <label>Description:</label>\n                        <span>{{selectedActionApi.description}}</span>\n                    </div>\n                    <div>\n                        <label>Returns:</label>\n                        <div  *ngFor="let i of selectedActionApi.returns">\n                            <div class="col-xs-16 col-xs-offset-1">\n                                <label>{{i.status}}</label>\n                                <span>{{i.description}}</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class="form-group">\n                    <label for="name">Name\n                        <i class="fa fa-asterisk required" title="This field is required."></i>\n                    </label>\n                    <input type="text" class="form-control" [(ngModel)]="selectedAction.name" name="name" required>\n                </div>\n                <div *ngIf="!selectedActionApi.global" class="form-group deviceArgument">\n                    <label for="device_id">Device\n                        <i class="fa fa-asterisk required" title="This field is required."></i>\n                    </label>\n                    <playbook-argument-component [loadedWorkflow]="loadedWorkflow"\n                        [argument]="selectedAction.device_id" [id]="id"\n                        [users]="users" [roles]="roles" [devices]="relevantDevices"></playbook-argument-component>\n                </div>\n                \x3c!-- Inputs --\x3e\n                <div *ngIf="selectedActionApi.parameters.length">\n                    <h4>Arguments</h4>\n                    <playbook-argument-component *ngFor="let parameterApi of selectedActionApi.parameters; let id = index" [loadedWorkflow]="loadedWorkflow"\n                        [argument]="getOrInitializeSelectedActionArgument(parameterApi)" [parameterApi]="parameterApi" [id]="id"\n                        [users]="users" [roles]="roles"></playbook-argument-component>\n                </div>\n                \x3c!-- Triggers --\x3e\n                <div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <h4>Trigger Condition</h4>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <button *ngIf="!selectedAction.trigger" class="btn btn-primary pull-right" (click)="specifyTrigger(selectedAction)">\n                                    <i class="fa fa-plus"></i>Specify Trigger Condition\n                                </button>\n                                <button *ngIf="selectedAction.trigger" class="btn btn-danger pull-right" (click)="removeTrigger(selectedAction)">\n                                    <i class="fa fa-close"></i>Remove Trigger Condition\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <playbook-conditional-expression-component *ngIf="selectedAction.trigger" [conditionalExpression]="selectedAction.trigger"\n                        [appApis]="appApis" [selectedAppName]="selectedAction.app_name" [loadedWorkflow]="loadedWorkflow"></playbook-conditional-expression-component>\n                </div>\n            </div>\n            \x3c!-- Editor for Branches (edges) --\x3e\n            <div *ngIf="selectedBranchParams && selectedBranchParams.branch" class="parametersEditor">\n                <h3>Branch Parameters</h3>\n                <div class="form-group">\n                    <label for="status">Return Type\n                        <i class="fa fa-asterisk required" title="This field is required."></i>\n                    </label>\n                    <select class="form-control" [(ngModel)]="selectedBranchParams.branch.status" name="status">\n                        <option *ngFor="let i of selectedBranchParams.returnTypes" [value]="i.status" [label]="i.status" [class.failure]="i.failure">{{i.status}}</option>\n                    </select>\n                </div>\n                <div class="form-group">\n                    <label for="priority">Priority\n                        <i class="fa fa-asterisk required" title="This field is required."></i>\n                    </label>\n                    <input type="number" max="999" min="1" class="form-control" [(ngModel)]="selectedBranchParams.branch.priority" name="priority"\n                        required>\n                </div>\n                <div>\n                    <div class="row">\n                        <div class="col-xs-6">\n                            <h4>Condition</h4>\n                        </div>\n                        <div class="col-xs-6">\n                            <div class="form-group">\n                                <button *ngIf="!selectedBranchParams.branch.condition" class="btn btn-primary pull-right" (click)="specifyCondition(selectedBranchParams.branch)">\n                                    <i class="fa fa-plus"></i>Specify Condition\n                                </button>\n                                <button *ngIf="selectedBranchParams.branch.condition" class="btn btn-danger pull-right" (click)="removeCondition(selectedBranchParams.branch)">\n                                    <i class="fa fa-close"></i>Remove Condition\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <playbook-conditional-expression-component *ngIf="selectedBranchParams.branch.condition" [conditionalExpression]="selectedBranchParams.branch.condition"\n                        [appApis]="appApis" [selectedAppName]="selectedBranchParams.appName" [loadedWorkflow]="loadedWorkflow"></playbook-conditional-expression-component>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class="row consoleRow" *ngIf="loadedWorkflow?.id">\n        <ul class="nav nav-tabs">\n            <li *ngIf="!loadedWorkflow?.has_errors" class="active"><a data-toggle="tab" href="#console"> Console </a></li>\n            <li *ngIf="!loadedWorkflow?.has_errors"><a data-toggle="tab" href="#executionLog"> Execution </a></li>\n            <li *ngIf="loadedWorkflow?.has_errors" class="active"><a data-toggle="tab" href="#errorLog"> Workflow Errors ({{ loadedWorkflow?.all_errors.length }}) </a></li>\n        </ul>\n        <div class="tab-content">\n            <div id="console" #consoleContainer class="tab-pane fade in active" *ngIf="!loadedWorkflow?.has_errors">\n                 <ngx-datatable #consoleTable class=\'material expandable\' [columnMode]="\'flex\'" [rows]="consoleLog" [sortType]="\'multi\'"\n                        [headerHeight]="25" [footerHeight]="25" [rowHeight]="undefined" [sorts]="[]"\n                        [limit]="10">\n\n                     <ngx-datatable-column name="Level" prop="level" [flexGrow]="1">\n                         <ng-template let-row="row" ngx-datatable-cell-template>\n                             {{row.level}}\n                         </ng-template>\n                     </ngx-datatable-column>\n\n                     <ngx-datatable-column name="App Name" prop="app_name" [flexGrow]="2">\n                        <ng-template let-row="row" ngx-datatable-cell-template>\n                            {{row.app_name}}\n                        </ng-template>\n                    </ngx-datatable-column>                     \n\n                     <ngx-datatable-column name="Action Name" prop="action_name" [flexGrow]="2">\n                         <ng-template let-row="row" ngx-datatable-cell-template>\n                            {{row.action_name}}\n                         </ng-template>\n                     </ngx-datatable-column>\n\n                     <ngx-datatable-column name="Message" prop="message" [flexGrow]="4">\n                         <ng-template let-row="row" ngx-datatable-cell-template>\n                             {{row.message}}\n                         </ng-template>\n                     </ngx-datatable-column>\n         \n                 </ngx-datatable>\n            </div>\n            <div id="executionLog" class="tab-pane fade" *ngIf="!loadedWorkflow?.has_errors">\n                <div id="executionResultsModal">\n                    <div #workflowResultsContainer>\n                        <ngx-datatable #workflowResultsTable class=\'material expandable\' [columnMode]="\'flex\'" [rows]="actionStatuses" [sortType]="\'multi\'"\n                        [headerHeight]="25" [footerHeight]="25" [rowHeight]="undefined" [sorts]="[]"\n                        [limit]="10">\n                        \x3c!-- Column Templates --\x3e\n                        <ngx-datatable-column name="Action IDs" prop="action_id" [flexGrow]="1"></ngx-datatable-column>\n                        <ngx-datatable-column name="App Name" prop="app_name" [flexGrow]="1"></ngx-datatable-column>\n                        <ngx-datatable-column name="Action Name" prop="action_name" [flexGrow]="1"></ngx-datatable-column>\n                        <ngx-datatable-column name="Started At" prop="started_at" [flexGrow]="1">\n                            <ng-template let-row="row" ngx-datatable-cell-template>\n                                <span [title]="row.localized_started_at">\n                                    {{actionStatusStartedRelativeTimes[row.execution_id]}}\n                                </span>\n                            </ng-template>\n                        </ngx-datatable-column>\n                        <ngx-datatable-column name="Completed At" prop="completed_at" [flexGrow]="1">\n                            <ng-template let-row="row" ngx-datatable-cell-template>\n                                <span [title]="row.localized_completed_at">\n                                    {{actionStatusCompletedRelativeTimes[row.execution_id]}}\n                                </span>\n                            </ng-template>\n                        </ngx-datatable-column>\n                        <ngx-datatable-column name="Status" prop="status" [flexGrow]="1"></ngx-datatable-column>\n                        <ngx-datatable-column name="Arguments" [sortable]="false" [flexGrow]="2">\n                            <ng-template let-row="row" ngx-datatable-cell-template>\n                                {{getFriendlyArguments(row.arguments)}}\n                            </ng-template>\n                        </ngx-datatable-column>\n                        <ngx-datatable-column name="Result" [sortable]="false" [flexGrow]="4">\n                            <ng-template let-row="row" ngx-datatable-cell-template>\n                                {{getFriendlyJSON(row.result)}}\n                            </ng-template>\n                        </ngx-datatable-column>\n                        </ngx-datatable>\n                    </div>\n                </div>\n            </div>\n            <div id="errorLog" #errorLogContainer class="tab-pane fade in active" *ngIf="loadedWorkflow?.has_errors">\n                <ngx-datatable #errorLogTable class=\'material expandable\' [columnMode]="\'flex\'" [rows]="getErrors()" [sortType]="\'multi\'"\n                       [headerHeight]="25" [footerHeight]="25" [rowHeight]="undefined" [sorts]="[]"\n                       [limit]="10">\n                    <ngx-datatable-column name="Error"  prop="error" [sortable]="false" [flexGrow]="1"></ngx-datatable-column>\n                </ngx-datatable>\n           </div>\n        </div>\n    </div>\n\n    <div class="modal fade" id="playbookAndWorkflowActionModal" role="dialog" aria-labelledby="playbookAndWorkflowActionModalTitle"\n        aria-hidden="true">\n        <div class="modal-dialog" role="document">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h4 class="modal-title" id="playbookAndWorkflowActionModalTitle">{{modalParams.title}}</h4>\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                        <span aria-hidden="true">&times;</span>\n                    </button>\n                </div>\n                <div class="modal-body">\n                    <div *ngIf="modalParams.shouldShowPlaybook" class="form-group">\n                        <h6>{{modalParams.shouldShowExistingPlaybooks ? \'Select a Playbook\' : \'Enter a Playbook\'}}</h6>\n                        <select *ngIf="modalParams.shouldShowExistingPlaybooks" name="playbookSelect" id="playbookSelect" [(ngModel)]="modalParams.selectedPlaybookId"\n                            class="form-control">\n                            <option [ngValue]="\'\'">-- Create new Playbook --</option>\n                            <option *ngFor="let i of playbooks" [ngValue]="i.id" [label]="i.name">{{i.name}}</option>\n                        </select>\n                        <input type="text" *ngIf="modalParams.selectedPlaybookId === \'\' || !modalParams.shouldShowExistingPlaybooks" [(ngModel)]="modalParams.newPlaybook"\n                            class="form-control" placeholder="Enter a new playbook name">\n                    </div>\n                    <div *ngIf="modalParams.shouldShowWorkflow" class="form-group">\n                        <h6>Enter a Workflow</h6>\n                        <input type="text" [(ngModel)]="modalParams.newWorkflow" class="form-control" placeholder="Enter a new workflow name">\n                    </div>\n                </div>\n                <div class="modal-footer">\n                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>\n                    <button type="button" class="btn btn-primary" (click)="modalParams.submit()">{{modalParams.submitText}}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class="modal fade" id="workflowsModal" role="dialog" aria-labelledby="workflowModalTitle" aria-hidden="true">\n        <div class="modal-dialog" role="document">\n            <div class="modal-content">\n                <div class="modal-header">\n                    <h4 class="modal-title" id="workflowModalTitle">Playbooks and Workflows</h4>\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\n                        <span aria-hidden="true">&times;</span>\n                    </button>\n                </div>\n                <div class="modal-body">\n                    <div class="importContainer">\n                        <h4>Import Playbook</h4>\n                        <div class="pull-right">\n                            <input #importFile type="file" name="file" id="file" class="importPlaybookInput" (change)="onImportSelectChange($event)"/>\n                            <button [disabled]="!playbookToImport" (click)="importPlaybook()" class="btn btn-primary" title="Import Playbook">\n                                <i class="fa fa-upload"></i>\n                            </button>\n                        </div>\n                    </div>\n                    <div class="panel-group" id="workflowAccordion">\n                        <div *ngFor="let playbook of playbooks" class="panel panel-default">\n                            <div class="panel-heading playbook-heading" data-toggle="collapse" [attr.data-target]="\'#loadWorkflowCollapse\' + removeWhitespace(playbook.name)">\n                                <h4 class="panel-title">\n                                    {{playbook.name}}\n                                    <div class="pull-right">\n                                        <button (click)="renamePlaybookModal($event, playbook)" class="btn btn-primary" title="Rename Playbook">\n                                            <i class="fa fa-i-cursor"></i>\n                                        </button>\n                                        <button (click)="duplicatePlaybookModal($event, playbook)" class="btn btn-primary" title="Duplicate Playbook">\n                                            <i class="fa fa-copy"></i>\n                                        </button>\n                                        <button (click)="exportPlaybook($event, playbook)" class="btn btn-primary" title="Export Playbook">\n                                            <i class="fa fa-download"></i>\n                                        </button>\n                                        <button (click)="deletePlaybook($event, playbook)" class="btn btn-danger" title="Delete Playbook">\n                                            <i class="fa fa-times"></i>\n                                        </button>\n                                    </div>\n                                </h4>\n                            </div>\n                            <div id="loadWorkflowCollapse{{removeWhitespace(playbook.name)}}" class="panel-collapse collapse">\n                                <div class="panel-body">\n                                    <div *ngFor="let workflow of playbook.workflows" class="panel panel-default workflowPanel">\n                                        <div class="panel-body">\n                                            <a (click)="loadWorkflow(playbook, workflow)">{{workflow.name}}</a>\n                                            <div class="pull-right">\n                                                \x3c!-- <button (click)="renameWorkflowModal(playbook.id, workflow.id)" class="btn btn-primary" title="Rename Workflow">\n                                                    <i class="fa fa-i-cursor"></i>\n                                                </button> --\x3e\n                                                <button (click)="duplicateWorkflowModal(playbook.id, workflow.id)" class="btn btn-primary" title="Duplicate Workflow">\n                                                    <i class="fa fa-copy"></i>\n                                                </button>\n                                                <button (click)="deleteWorkflow(playbook, workflow)" class="btn btn-danger" title="Delete Workflow">\n                                                    <i class="fa fa-times"></i>\n                                                </button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>'},625:function(t,e,n){var o={"./af":333,"./af.js":333,"./ar":332,"./ar-dz":331,"./ar-dz.js":331,"./ar-kw":330,"./ar-kw.js":330,"./ar-ly":329,"./ar-ly.js":329,"./ar-ma":328,"./ar-ma.js":328,"./ar-sa":327,"./ar-sa.js":327,"./ar-tn":326,"./ar-tn.js":326,"./ar.js":332,"./az":325,"./az.js":325,"./be":324,"./be.js":324,"./bg":323,"./bg.js":323,"./bm":322,"./bm.js":322,"./bn":321,"./bn.js":321,"./bo":320,"./bo.js":320,"./br":319,"./br.js":319,"./bs":318,"./bs.js":318,"./ca":317,"./ca.js":317,"./cs":316,"./cs.js":316,"./cv":315,"./cv.js":315,"./cy":314,"./cy.js":314,"./da":313,"./da.js":313,"./de":312,"./de-at":311,"./de-at.js":311,"./de-ch":310,"./de-ch.js":310,"./de.js":312,"./dv":309,"./dv.js":309,"./el":308,"./el.js":308,"./en-au":307,"./en-au.js":307,"./en-ca":306,"./en-ca.js":306,"./en-gb":305,"./en-gb.js":305,"./en-ie":304,"./en-ie.js":304,"./en-nz":303,"./en-nz.js":303,"./eo":302,"./eo.js":302,"./es":301,"./es-do":300,"./es-do.js":300,"./es-us":299,"./es-us.js":299,"./es.js":301,"./et":298,"./et.js":298,"./eu":297,"./eu.js":297,"./fa":296,"./fa.js":296,"./fi":295,"./fi.js":295,"./fo":294,"./fo.js":294,"./fr":293,"./fr-ca":292,"./fr-ca.js":292,"./fr-ch":291,"./fr-ch.js":291,"./fr.js":293,"./fy":290,"./fy.js":290,"./gd":289,"./gd.js":289,"./gl":288,"./gl.js":288,"./gom-latn":287,"./gom-latn.js":287,"./gu":286,"./gu.js":286,"./he":285,"./he.js":285,"./hi":284,"./hi.js":284,"./hr":283,"./hr.js":283,"./hu":282,"./hu.js":282,"./hy-am":281,"./hy-am.js":281,"./id":280,"./id.js":280,"./is":279,"./is.js":279,"./it":278,"./it.js":278,"./ja":277,"./ja.js":277,"./jv":276,"./jv.js":276,"./ka":275,"./ka.js":275,"./kk":274,"./kk.js":274,"./km":273,"./km.js":273,"./kn":272,"./kn.js":272,"./ko":271,"./ko.js":271,"./ky":270,"./ky.js":270,"./lb":269,"./lb.js":269,"./lo":268,"./lo.js":268,"./lt":267,"./lt.js":267,"./lv":266,"./lv.js":266,"./me":265,"./me.js":265,"./mi":264,"./mi.js":264,"./mk":263,"./mk.js":263,"./ml":262,"./ml.js":262,"./mr":261,"./mr.js":261,"./ms":260,"./ms-my":259,"./ms-my.js":259,"./ms.js":260,"./mt":258,"./mt.js":258,"./my":257,"./my.js":257,"./nb":256,"./nb.js":256,"./ne":255,"./ne.js":255,"./nl":254,"./nl-be":253,"./nl-be.js":253,"./nl.js":254,"./nn":252,"./nn.js":252,"./pa-in":251,"./pa-in.js":251,"./pl":250,"./pl.js":250,"./pt":249,"./pt-br":248,"./pt-br.js":248,"./pt.js":249,"./ro":247,"./ro.js":247,"./ru":246,"./ru.js":246,"./sd":245,"./sd.js":245,"./se":244,"./se.js":244,"./si":243,"./si.js":243,"./sk":242,"./sk.js":242,"./sl":241,"./sl.js":241,"./sq":240,"./sq.js":240,"./sr":239,"./sr-cyrl":238,"./sr-cyrl.js":238,"./sr.js":239,"./ss":237,"./ss.js":237,"./sv":236,"./sv.js":236,"./sw":235,"./sw.js":235,"./ta":234,"./ta.js":234,"./te":233,"./te.js":233,"./tet":232,"./tet.js":232,"./th":231,"./th.js":231,"./tl-ph":230,"./tl-ph.js":230,"./tlh":229,"./tlh.js":229,"./tr":228,"./tr.js":228,"./tzl":227,"./tzl.js":227,"./tzm":226,"./tzm-latn":225,"./tzm-latn.js":225,"./tzm.js":226,"./uk":224,"./uk.js":224,"./ur":223,"./ur.js":223,"./uz":222,"./uz-latn":221,"./uz-latn.js":221,"./uz.js":222,"./vi":220,"./vi.js":220,"./x-pseudo":219,"./x-pseudo.js":219,"./yo":218,"./yo.js":218,"./zh-cn":217,"./zh-cn.js":217,"./zh-hk":216,"./zh-hk.js":216,"./zh-tw":215,"./zh-tw.js":215};function a(t){var e=i(t);return n(e)}function i(t){var e=o[t];if(!(e+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return e}a.keys=function(){return Object.keys(o)},a.resolve=i,t.exports=a,a.id=625},72:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=(function(){return function(){this.required=!1}})()},73:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(1),a=n(3),i=n(152),r=n(97),s=(function(){function t(){this.action_statuses=[]}return o.a([Object(a.Type)((function(){return r.a})),o.c("design:type",r.a)],t.prototype,"current_action",void 0),o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],t.prototype,"action_statuses",void 0),o.a([Object(a.Exclude)({toPlainOnly:!0}),o.c("design:type",String)],t.prototype,"localized_started_at",void 0),o.a([Object(a.Exclude)({toPlainOnly:!0}),o.c("design:type",String)],t.prototype,"localized_completed_at",void 0),t})()},74:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var o=n(1),a=n(3),i=n(49),r=n(96),s=(function(){function t(){this.roles=[]}return t.prototype.toWorkingUser=function(){var t=new r.a;return t.id=this.id,t.username=this.username,Array.isArray(this.roles)?t.role_ids=this.roles.map((function(t){return t.id})):t.role_ids=[],t.active=this.active,t},o.a([Object(a.Type)((function(){return i.a})),o.c("design:type",Array)],t.prototype,"roles",void 0),t})()},75:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(119),a=(function(){function t(){this.fields=[]}return t.prototype.toWorkingDevice=function(){var t=new o.a;return t.id=this.id,t.name=this.name,t.description=this.description,t.app_name=this.app_name,t.type=this.type,t.fields={},this.fields.forEach((function(e){t.fields[e.name]=void 0!==e.value?e.value:null})),t},t})()},96:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n(74),a=(function(){function t(){this.role_ids=[]}return t.prototype.toSave=function(){var t=new o.a;return t.id=this.id,t.username=this.username,t.roles=this.role_ids.map((function(t){return{id:t}})),t.active=this.active,t.old_password=this.currentPassword,t.password=this.newPassword,t},t})()},97:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var o=(function(){return function(){}})()}});